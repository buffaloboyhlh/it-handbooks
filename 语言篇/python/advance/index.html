
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IT 手册整理">
      
      
        <meta name="author" content="hlh">
      
      
      
        <link rel="prev" href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/zap/">
      
      
        <link rel="next" href="../basic/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Python 进阶教程 - IT-手册</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="IT-手册" class="md-header__button md-logo" aria-label="IT-手册" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IT-手册
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python 进阶教程
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="IT-手册" class="md-nav__button md-logo" aria-label="IT-手册" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    IT-手册
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IT-手册大全
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Web篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Web篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Django
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Django/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Django/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Django/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Django/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 开发中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Django/restful/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django RESTful
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FastAPI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            FastAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/FastAPI/advance./" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/FastAPI/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/FastAPI/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flask
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Flask
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Flask/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Flask/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Flask/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Web%E7%AF%87/Flask/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 工作中常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    中间件
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            中间件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kafka
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Kafka
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kafka 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rabbitmq
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Rabbitmq
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Zookeeper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Zookeeper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/zookeeper/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zookeeper 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/zookeeper/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zookeeper 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    云原生
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            云原生
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/docker/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker-基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/docker/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/crictl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crictl 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 包管理工具 helm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 监控平台和日志管理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    人工智能
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大语言模型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            大语言模型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    机器学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            机器学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    深度学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            深度学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    工具篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            工具篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%B7%A5%E5%85%B7%E7%AF%87/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git 命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%B7%A5%E5%85%B7%E7%AF%87/jenkins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jenkins 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    数据库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            数据库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Elastic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            Elastic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElastciSearch 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 基本教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 工作中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 工作中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MySQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            MySQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 面试题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Redis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Redis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 工作中常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    数据结构和算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            数据结构和算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/leetcode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LeetCode 题目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/struct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    服务器
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            服务器
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Uvicorn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Uvicorn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/uvicorn/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uvicorn 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  <span class="md-ellipsis">
    计算机基础
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            计算机基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http 手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机网络面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Websocket
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" checked>
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  <span class="md-ellipsis">
    语言篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            语言篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_1" >
        
          
          <label class="md-nav__link" for="__nav_11_1" id="__nav_11_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_1">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%2B%2B/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%2B%2B/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%2B%2B/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2" >
        
          
          <label class="md-nav__link" for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Golang
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2">
            <span class="md-nav__icon md-icon"></span>
            Golang
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2_3" >
        
          
          <label class="md-nav__link" for="__nav_11_2_3" id="__nav_11_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_11_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2_3">
            <span class="md-nav__icon md-icon"></span>
            常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/cobra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cobra
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/fmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fmt 库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/gin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/gorm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gorm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/jwt-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jwt go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/logrus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logrus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/net/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    net
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Os
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/pprof/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pprof
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/protobuf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protobuf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/testify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/viper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/zap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zap
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3" checked>
        
          
          <label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_11_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Python 进阶教程
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Python 进阶教程
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#map-reduce" class="md-nav__link">
    <span class="md-ellipsis">
      一、 map 和 reduce函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="一、 map 和 reduce函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-map" class="md-nav__link">
    <span class="md-ellipsis">
      1. map 函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. map 函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 语法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-reduce" class="md-nav__link">
    <span class="md-ellipsis">
      2. reduce 函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. reduce 函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 语法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 对比和适用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      二、网络编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="二、网络编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 网络编程基本概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 网络编程基本概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-socket" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 套接字（Socket）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-ip" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 IP 地址和端口
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-python" class="md-nav__link">
    <span class="md-ellipsis">
      2. Python 网络编程常用模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Python 网络编程常用模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-socket" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 socket 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 socket 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.1 创建 TCP 客户端
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.2 创建 TCP 服务器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-http" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 http 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 http 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-http" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 创建 HTTP 服务器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-http" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 创建 HTTP 客户端
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-requests" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 requests 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 requests 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-get" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 发送 GET 请求
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-post" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 发送 POST 请求
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. 高级网络编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 高级网络编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 异步编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 异步编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 异步 TCP 服务器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 异步 TCP 客户端
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 WebSocket
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 WebSocket">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 WebSocket 服务器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 WebSocket 客户端
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 网络编程的常见任务
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 网络编程的常见任务">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 文件上传和下载
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 文件上传和下载">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-requests" class="md-nav__link">
    <span class="md-ellipsis">
      1. 使用 requests 库实现文件上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 使用 requests 库实现文件上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      上传文件到服务器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      解释：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-requests" class="md-nav__link">
    <span class="md-ellipsis">
      2. 使用 requests 库实现文件下载
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 使用 requests 库实现文件下载">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      从 URL 下载文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      解释：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-flask" class="md-nav__link">
    <span class="md-ellipsis">
      3. 使用 Flask 创建文件上传/下载服务器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 使用 Flask 创建文件上传/下载服务器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      创建一个简单的文件上传服务器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      解释：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      启动服务器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-requests-flask" class="md-nav__link">
    <span class="md-ellipsis">
      4. 使用 requests 库上传文件到 Flask 服务器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-requests-flask" class="md-nav__link">
    <span class="md-ellipsis">
      5. 使用 requests 库从 Flask 服务器下载文件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 在生产环境中的注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      三、并发编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="三、并发编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 并发编程基础概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 并发编程基础概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 并发与并行
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 线程与进程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 多线程编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 多线程编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-python-threading" class="md-nav__link">
    <span class="md-ellipsis">
      1. Python threading 模块基础
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Python threading 模块基础">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_2" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 创建线程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_2" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 使用类方法创建线程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. 线程同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 线程同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-lock" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 使用 Lock 实现线程同步
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-rlock" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 使用 RLock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3. 线程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 线程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-queue" class="md-nav__link">
    <span class="md-ellipsis">
      1. 使用 queue 模块进行线程间通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-threadingevent" class="md-nav__link">
    <span class="md-ellipsis">
      2. 使用 threading.Event 进行线程间通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-threadingcondition" class="md-nav__link">
    <span class="md-ellipsis">
      3. 使用 threading.Condition 进行复杂同步
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_2" class="md-nav__link">
    <span class="md-ellipsis">
      4. 使用全局变量和锁进行线程间通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_3" class="md-nav__link">
    <span class="md-ellipsis">
      4. 使用线程池
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 使用线程池">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-threadpoolexecutor" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 使用 ThreadPoolExecutor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 多线程的注意事项
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 多线程的注意事项">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-gil" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 GIL 的影响
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 线程安全性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      6. 小结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 多进程编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 多进程编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1. 什么是多进程编程？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 基础多进程操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 基础多进程操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21_1" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 创建和启动进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22_1" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 使用类方法创建进程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_4" class="md-nav__link">
    <span class="md-ellipsis">
      3. 进程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 进程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-queue" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 使用 Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-pipe" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 使用 Pipe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-manager" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 使用 Manager 共享复杂数据
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 使用 Manager 共享复杂数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-multiprocessingmanager" class="md-nav__link">
    <span class="md-ellipsis">
      1. multiprocessing.Manager 的概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      2. 常用方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_5" class="md-nav__link">
    <span class="md-ellipsis">
      3. 示例代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      # 共享列表示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      # 共享字典示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      # 共享命名空间示例
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 使用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      5. 注意事项
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 注意事项">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_5" class="md-nav__link">
    <span class="md-ellipsis">
      4. 进程同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 进程同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-lock" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 使用 Lock 进行同步
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-event" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 使用 Event 同步进程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-pool" class="md-nav__link">
    <span class="md-ellipsis">
      5. 进程池（Pool）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-value-array" class="md-nav__link">
    <span class="md-ellipsis">
      6. 使用 Value 和 Array 共享数据
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 小结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      四、异步编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="四、异步编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1. 异步编程的基本概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 异步编程的基本概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11_3" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 同步与异步
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12_3" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 阻塞与非阻塞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13_1" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 回调与事件循环
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-python_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. Python 中的异步编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Python 中的异步编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-asyncio" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 asyncio 模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.1 asyncio 模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-coroutine" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.1 协程（Coroutine）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212-event-loop" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.2 事件循环（Event Loop）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#213" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.3 创建和调度任务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#214" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.4 并发执行多个任务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#215" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.5 超时与取消任务
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-io" class="md-nav__link">
    <span class="md-ellipsis">
      3. 异步 I/O 操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 异步 I/O 操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31_1" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 异步文件操作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 异步网络操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_6" class="md-nav__link">
    <span class="md-ellipsis">
      4. 高级异步编程概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 高级异步编程概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41_1" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 异步生成器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 异步上下文管理器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_3" class="md-nav__link">
    <span class="md-ellipsis">
      5. 异步编程的优点与缺点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 异步编程的优点与缺点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 优点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52_1" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 缺点
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_2" class="md-nav__link">
    <span class="md-ellipsis">
      6. 小结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    <span class="md-ellipsis">
      IO模式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-io-blocking-io" class="md-nav__link">
    <span class="md-ellipsis">
      1. 阻塞 I/O (Blocking I/O)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 阻塞 I/O (Blocking I/O)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-io-non-blocking-io" class="md-nav__link">
    <span class="md-ellipsis">
      2. 非阻塞 I/O (Non-blocking I/O)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 非阻塞 I/O (Non-blocking I/O)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-io-io-multiplexing" class="md-nav__link">
    <span class="md-ellipsis">
      3. I/O 多路复用 (I/O Multiplexing)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. I/O 多路复用 (I/O Multiplexing)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-io-signal-driven-io" class="md-nav__link">
    <span class="md-ellipsis">
      4. 信号驱动 I/O (Signal-driven I/O)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 信号驱动 I/O (Signal-driven I/O)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-io-asynchronous-io-aio" class="md-nav__link">
    <span class="md-ellipsis">
      5. 异步 I/O (Asynchronous I/O, AIO)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 异步 I/O (Asynchronous I/O, AIO)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
    <nav class="md-nav" aria-label="总结">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      实现
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-io" class="md-nav__link">
    <span class="md-ellipsis">
      1. I/O 多路复用的概念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-io" class="md-nav__link">
    <span class="md-ellipsis">
      2. I/O 模型概述
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-io_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. I/O 多路复用的机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      详细说明
    </span>
  </a>
  
    <nav class="md-nav" aria-label="详细说明">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-select" class="md-nav__link">
    <span class="md-ellipsis">
      1. select
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-poll" class="md-nav__link">
    <span class="md-ellipsis">
      2. poll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-epoll" class="md-nav__link">
    <span class="md-ellipsis">
      3. epoll
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-io" class="md-nav__link">
    <span class="md-ellipsis">
      4. I/O 多路复用的应用场景
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-io" class="md-nav__link">
    <span class="md-ellipsis">
      5. I/O 多路复用的优缺点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_3" class="md-nav__link">
    <span class="md-ellipsis">
      6. 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python_1" class="md-nav__link">
    <span class="md-ellipsis">
      五、python命令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="五、python命令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-c-command" class="md-nav__link">
    <span class="md-ellipsis">
      1. -c command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-m-module-name" class="md-nav__link">
    <span class="md-ellipsis">
      2. -m module-name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-v-version" class="md-nav__link">
    <span class="md-ellipsis">
      3. -V 或 --version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-v" class="md-nav__link">
    <span class="md-ellipsis">
      4. -v
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-o" class="md-nav__link">
    <span class="md-ellipsis">
      5. -O
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-oo" class="md-nav__link">
    <span class="md-ellipsis">
      6. -OO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-b" class="md-nav__link">
    <span class="md-ellipsis">
      7. -B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-e" class="md-nav__link">
    <span class="md-ellipsis">
      8. -E
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-s" class="md-nav__link">
    <span class="md-ellipsis">
      9. -s
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-s" class="md-nav__link">
    <span class="md-ellipsis">
      10. -S
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11-u" class="md-nav__link">
    <span class="md-ellipsis">
      11. -u
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-i" class="md-nav__link">
    <span class="md-ellipsis">
      12. -i
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-t" class="md-nav__link">
    <span class="md-ellipsis">
      13. -t
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-x" class="md-nav__link">
    <span class="md-ellipsis">
      14. -x
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-help-h" class="md-nav__link">
    <span class="md-ellipsis">
      15. --help 或 -h
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-w" class="md-nav__link">
    <span class="md-ellipsis">
      16. -W
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-r" class="md-nav__link">
    <span class="md-ellipsis">
      17. -R
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#18-q" class="md-nav__link">
    <span class="md-ellipsis">
      18. -Q
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#19-x" class="md-nav__link">
    <span class="md-ellipsis">
      19. -X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python_2" class="md-nav__link">
    <span class="md-ellipsis">
      python 自定义包
    </span>
  </a>
  
    <nav class="md-nav" aria-label="python 自定义包">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_4" class="md-nav__link">
    <span class="md-ellipsis">
      1. 准备项目结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_4" class="md-nav__link">
    <span class="md-ellipsis">
      2. 编写代码
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 编写代码">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additionpy" class="md-nav__link">
    <span class="md-ellipsis">
      addition.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtractionpy" class="md-nav__link">
    <span class="md-ellipsis">
      subtraction.py
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__init__py" class="md-nav__link">
    <span class="md-ellipsis">
      __init__.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_6" class="md-nav__link">
    <span class="md-ellipsis">
      3. 编写测试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 编写测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test_operationspy" class="md-nav__link">
    <span class="md-ellipsis">
      test_operations.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-setuppy" class="md-nav__link">
    <span class="md-ellipsis">
      4. 编写 setup.py 文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 编写 setup.py 文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setuppy" class="md-nav__link">
    <span class="md-ellipsis">
      setup.py
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-readmemd" class="md-nav__link">
    <span class="md-ellipsis">
      5. 编写 README.md 文件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 编写 README.md 文件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#readmemd" class="md-nav__link">
    <span class="md-ellipsis">
      README.md
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      7. 打包和发布
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-pypi" class="md-nav__link">
    <span class="md-ellipsis">
      8. 上传到 PyPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9" class="md-nav__link">
    <span class="md-ellipsis">
      9. 验证安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10" class="md-nav__link">
    <span class="md-ellipsis">
      10. 更新包
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3_4" >
        
          
          <label class="md-nav__link" for="__nav_11_3_4" id="__nav_11_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_11_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3_4">
            <span class="md-nav__icon md-icon"></span>
            Python常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/Seaborn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seaborn 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/beautifulsoup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    beautifulsoup 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/celery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    celery 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/datastruct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构和算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/datetime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datetime 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/functools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    functools 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logging 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/math/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    math 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/matpliot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matpliot 使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/mock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mock 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    numpy 笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    os模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pathlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pathlib 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pickle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pickle 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pymysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pymysql 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pytest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pytest 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/pytorch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pytorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    queue 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/random/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    random 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/re/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    re 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    requests 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/scikit-learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scikit-learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/scipy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scipy 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/scrapy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scrapy 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/selenium/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    selenium 使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/shutil/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shutil 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/sqlalchemy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLALchemy 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/sys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sys 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    time 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%B8%B8%E7%94%A8%E5%BA%93/urllib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urllib 模块
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="python">Python 进阶教程</h1>
<h2 id="map-reduce">一、 map 和 reduce函数</h2>
<p><code>map</code> 和 <code>reduce</code> 是 Python 中常用的函数式编程工具。它们提供了一种以声明式编程风格处理数据的方式，尤其适用于处理列表或其他可迭代对象。以下是对 <code>map</code> 和 <code>reduce</code> 函数的详细解释。</p>
<h3 id="1-map">1. <code>map</code> 函数</h3>
<h4 id="11">1.1 功能</h4>
<p><code>map</code> 函数用于将一个函数应用到可迭代对象（如列表、元组等）的每一个元素上，并返回一个包含结果的迭代器。</p>
<h4 id="12">1.2 语法</h4>
<div class="codehilite"><pre><span></span><code><span class="nb">map</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</code></pre></div>

<ul>
<li><strong>function</strong>: 需要应用到每个元素上的函数。</li>
<li><strong>iterable</strong>: 要处理的可迭代对象。<code>map</code> 函数会将 <code>function</code> 应用到 <code>iterable</code> 中的每一个元素上。</li>
<li><strong>...</strong>: 可选的多个可迭代对象（如多个列表），如果提供了多个可迭代对象，<code>function</code> 必须接受与可迭代对象数量相同的参数。</li>
</ul>
<h4 id="13">1.3 示例</h4>
<p>将每个数字平方：</p>
<div class="codehilite"><pre><span></span><code><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">squared</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">squared</span><span class="p">))</span>  <span class="c1"># [1, 4, 9, 16, 25]</span>
</code></pre></div>

<p>将两个列表中的元素逐对相加：</p>
<div class="codehilite"><pre><span></span><code><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">summed</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">summed</span><span class="p">))</span>  <span class="c1"># [5, 7, 9]</span>
</code></pre></div>

<h3 id="2-reduce">2. <code>reduce</code> 函数</h3>
<h4 id="21">2.1 功能</h4>
<p><code>reduce</code> 函数用于对一个可迭代对象的元素进行累积操作，将其合并成一个单一的结果。它通过一个累积函数将前两个元素合并，然后将结果与下一个元素合并，直到处理完所有元素。</p>
<h4 id="22">2.2 语法</h4>
<p><code>reduce</code> 函数在 Python 3.x 中位于 <code>functools</code> 模块中，语法如下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="p">[</span><span class="n">initializer</span><span class="p">])</span>
</code></pre></div>

<ul>
<li><strong>function</strong>: 累积函数，接受两个参数：当前的累积值和可迭代对象中的下一个元素。</li>
<li><strong>iterable</strong>: 要处理的可迭代对象。</li>
<li><strong>initializer</strong>: 可选的初始值。如果提供了 <code>initializer</code>，则会在第一次调用 <code>function</code> 时使用。否则，<code>reduce</code> 会将 <code>iterable</code> 中的第一个元素作为初始值。</li>
</ul>
<h4 id="23">2.3 示例</h4>
<p>计算列表中所有元素的乘积：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">numbers</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>  <span class="c1"># 120</span>
</code></pre></div>

<p>将列表中的字符串合并为一个字符串：</p>
<div class="codehilite"><pre><span></span><code><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">,</span> <span class="s2">&quot;from&quot;</span><span class="p">,</span> <span class="s2">&quot;reduce&quot;</span><span class="p">]</span>
<span class="n">sentence</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>  <span class="c1"># &quot;Hello world from reduce&quot;</span>
</code></pre></div>

<p>使用初始值进行累积操作：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">sum_with_initial</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="n">numbers</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sum_with_initial</span><span class="p">)</span>  <span class="c1"># 25</span>
</code></pre></div>

<h3 id="3">3. 总结</h3>
<ul>
<li><strong><code>map</code> 函数</strong>: 将一个函数应用到可迭代对象的每一个元素上，返回一个包含结果的迭代器。适合于对每个元素进行相同的操作。</li>
<li><strong><code>reduce</code> 函数</strong>: 将一个累积函数应用到可迭代对象的元素上，合并成一个单一的结果。适合于需要累积操作的场景，例如求和、乘积等。</li>
</ul>
<h3 id="4">4. 对比和适用场景</h3>
<ul>
<li><strong><code>map</code></strong>: 适用于当你需要对每个元素执行相同操作时，比如转换、过滤等。它不会改变数据的长度。</li>
<li><strong><code>reduce</code></strong>: 适用于将多个元素合并成一个结果时，如聚合、累积等。它会减少数据的长度，最终得到一个单一的值。</li>
</ul>
<p>通过合理使用 <code>map</code> 和 <code>reduce</code>，你可以写出更简洁、功能强大的代码。</p>
<h2 id="_1">二、网络编程</h2>
<p>Python 的网络编程功能非常强大，可以用来实现各种网络通信任务。以下是对 Python 网络编程的详细解释，包括基本的网络编程概念、常用的模块和库、以及一些常见的网络编程任务。</p>
<h3 id="1">1. 网络编程基本概念</h3>
<h4 id="11-socket">1.1 套接字（Socket）</h4>
<p>套接字是网络通信的基本接口，允许程序在网络上进行数据传输。它支持 TCP 和 UDP 协议，可以用于客户端和服务器之间的通信。</p>
<ul>
<li><strong>TCP（传输控制协议）</strong>: 面向连接的协议，提供可靠的、按顺序的数据传输。</li>
<li><strong>UDP（用户数据报协议）</strong>: 无连接的协议，适用于需要低延迟和较小开销的场景，但不保证数据的可靠传输。</li>
</ul>
<h4 id="12-ip">1.2 IP 地址和端口</h4>
<ul>
<li><strong>IP 地址</strong>: 唯一标识网络中的每一个设备，例如 <code>192.168.1.1</code>。</li>
<li><strong>端口</strong>: 用于区分同一台设备上的不同服务。例如，HTTP 协议通常使用端口 80。</li>
</ul>
<h3 id="2-python">2. Python 网络编程常用模块</h3>
<h4 id="21-socket">2.1 <code>socket</code> 模块</h4>
<p><code>socket</code> 模块是 Python 提供的标准库，用于实现低级别的网络通信。</p>
<h5 id="211-tcp">2.1.1 创建 TCP 客户端</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">socket</span>

<span class="c1"># 创建 TCP/IP 套接字</span>
<span class="n">client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>

<span class="c1"># 连接到服务器</span>
<span class="n">client_socket</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">))</span>

<span class="c1"># 发送数据</span>
<span class="n">client_socket</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Hello, Server&#39;</span><span class="p">)</span>

<span class="c1"># 接收数据</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Received&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

<span class="c1"># 关闭连接</span>
<span class="n">client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<h5 id="212-tcp">2.1.2 创建 TCP 服务器</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">socket</span>

<span class="c1"># 创建 TCP/IP 套接字</span>
<span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>

<span class="c1"># 绑定到地址和端口</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">))</span>

<span class="c1"># 监听连接</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Waiting for a connection...&#39;</span><span class="p">)</span>
<span class="n">connection</span><span class="p">,</span> <span class="n">client_address</span> <span class="o">=</span> <span class="n">server_socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Connection from&#39;</span><span class="p">,</span> <span class="n">client_address</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Received&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Hello, Client&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">break</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<h4 id="22-http">2.2 <code>http</code> 模块</h4>
<p>Python 提供了一个简单的 HTTP 服务器和客户端功能。</p>
<h5 id="221-http">2.2.1 创建 HTTP 服务器</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">http.server</span> <span class="kn">import</span> <span class="n">BaseHTTPRequestHandler</span><span class="p">,</span> <span class="n">HTTPServer</span>

<span class="k">class</span> <span class="nc">SimpleHTTPRequestHandler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s1">&#39;Content-type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Hello, world!&#39;</span><span class="p">)</span>

<span class="n">httpd</span> <span class="o">=</span> <span class="n">HTTPServer</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">),</span> <span class="n">SimpleHTTPRequestHandler</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting server at http://localhost:8080&#39;</span><span class="p">)</span>
<span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</code></pre></div>

<h5 id="222-http">2.2.2 创建 HTTP 客户端</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="c1"># 创建 HTTP 连接</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">HTTPConnection</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>

<span class="c1"># 发送 GET 请求</span>
<span class="n">connection</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="c1"># 获取响应</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reason:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">reason</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Response:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

<span class="c1"># 关闭连接</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<h4 id="23-requests">2.3 <code>requests</code> 模块</h4>
<p><code>requests</code> 是一个第三方库，简化了 HTTP 请求的处理。</p>
<h5 id="231-get">2.3.1 发送 GET 请求</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://jsonplaceholder.typicode.com/posts/1&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status Code:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Response:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>

<h5 id="232-post">2.3.2 发送 POST 请求</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status Code:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Response:&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div>

<h3 id="3_1">3. 高级网络编程</h3>
<h4 id="31">3.1 异步编程</h4>
<p><code>asyncio</code> 模块支持异步 I/O 操作，使得可以编写高效的网络应用。</p>
<h5 id="311-tcp">3.1.1 异步 TCP 服务器</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_client</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">writer</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="n">addr</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">get_extra_info</span><span class="p">(</span><span class="s1">&#39;peername&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">drain</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">server</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">start_server</span><span class="p">(</span><span class="n">handle_client</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
    <span class="n">addr</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">sockets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getsockname</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Serving on </span><span class="si">{</span><span class="n">addr</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">server</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h5 id="312-tcp">3.1.2 异步 TCP 客户端</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">tcp_client</span><span class="p">():</span>
    <span class="n">reader</span><span class="p">,</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">open_connection</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8888</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">drain</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Received: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">tcp_client</span><span class="p">())</span>
</code></pre></div>

<h4 id="32-websocket">3.2 WebSocket</h4>
<p><code>websockets</code> 是一个第三方库，用于实现 WebSocket 协议。</p>
<h5 id="321-websocket">3.2.1 WebSocket 服务器</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">websocket</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">websocket</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="n">start_server</span> <span class="o">=</span> <span class="n">websockets</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="n">echo</span><span class="p">,</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">8765</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">start_server</span><span class="p">)</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
</code></pre></div>

<h5 id="322-websocket">3.2.2 WebSocket 客户端</h5>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;ws://localhost:8765&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">hello</span><span class="p">())</span>
</code></pre></div>

<h3 id="4_1">4. 网络编程的常见任务</h3>
<ul>
<li><strong>文件上传/下载</strong>: 使用 HTTP 协议实现文件上传和下载功能。</li>
<li><strong>网络协议实现</strong>: 实现自定义的网络协议，处理特殊的应用需求。</li>
<li><strong>并发处理</strong>: 使用异步编程或多线程处理并发的网络请求。</li>
<li><strong>安全性</strong>: 实现 HTTPS 协议，处理数据加密和认证。</li>
</ul>
<h4 id="41">4.1 文件上传和下载</h4>
<p>在 Python 中，文件的上传和下载操作通常涉及到 HTTP 协议。以下是如何使用 Python 实现文件上传和下载的详细教程，包括使用 <code>requests</code> 库来处理客户端的操作和使用 <code>Flask</code> 框架来创建简单的文件上传/下载服务器。</p>
<h5 id="1-requests">1. 使用 <code>requests</code> 库实现文件上传</h5>
<p><code>requests</code> 是一个流行的 HTTP 库，可以用来发送 HTTP 请求，包括文件上传。</p>
<h6 id="_2">上传文件到服务器</h6>
<p>假设你有一个文件 <code>example.txt</code>，你想上传到一个服务器上。你可以使用以下代码来实现：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://example.com/upload&#39;</span>

<span class="c1"># 使用 with 语句来确保文件被正确关闭</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">file</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>

<h5 id="_3">解释：</h5>
<ul>
<li><code>files = {'file': open('example.txt', 'rb')}</code>：将文件以二进制模式打开，并将其封装到 <code>files</code> 参数中。</li>
<li><code>requests.post(url, files=files)</code>：向服务器发送 POST 请求，上传文件。</li>
<li><code>response.status_code</code> 和 <code>response.text</code>：分别返回响应的状态码和内容。</li>
</ul>
<h5 id="2-requests">2. 使用 <code>requests</code> 库实现文件下载</h5>
<p>文件下载也可以通过 <code>requests</code> 库轻松实现。</p>
<h6 id="url">从 URL 下载文件</h6>
<p>以下代码展示了如何从指定的 URL 下载文件并保存到本地：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://example.com/example.txt&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;downloaded_example.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>

<h6 id="_4">解释：</h6>
<ul>
<li><code>requests.get(url)</code>：发送 GET 请求，获取文件内容。</li>
<li><code>response.content</code>：获取响应的二进制内容。</li>
<li><code>with open('downloaded_example.txt', 'wb') as f</code>：将下载的文件保存到本地。</li>
</ul>
<h5 id="3-flask">3. 使用 <code>Flask</code> 创建文件上传/下载服务器</h5>
<p><code>Flask</code> 是一个轻量级的 Web 框架，使用它可以快速创建一个文件上传/下载的服务器。</p>
<h6 id="_5">创建一个简单的文件上传服务器</h6>
<p>下面是一个基本的 Flask 服务器示例，支持文件上传：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span><span class="p">,</span> <span class="n">send_from_directory</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">UPLOAD_FOLDER</span> <span class="o">=</span> <span class="s1">&#39;./uploads&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOAD_FOLDER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UPLOAD_FOLDER</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">UPLOAD_FOLDER</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">UPLOAD_FOLDER</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;!doctype html&gt;</span>
<span class="s1">    &lt;title&gt;Upload a file&lt;/title&gt;</span>
<span class="s1">    &lt;h1&gt;Upload a file&lt;/h1&gt;</span>
<span class="s1">    &lt;form method=post enctype=multipart/form-data&gt;</span>
<span class="s1">      &lt;input type=file name=file&gt;</span>
<span class="s1">      &lt;input type=submit value=Upload&gt;</span>
<span class="s1">    &lt;/form&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload_file</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;file&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;No file part&#39;</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;No selected file&#39;</span>
    <span class="k">if</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOAD_FOLDER&#39;</span><span class="p">],</span> <span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;File uploaded successfully&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/uploads/&lt;filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">uploaded_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">send_from_directory</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOAD_FOLDER&#39;</span><span class="p">],</span> <span class="n">filename</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<h6 id="_6">解释：</h6>
<ul>
<li><code>UPLOAD_FOLDER</code>：指定上传文件保存的目录。</li>
<li><code>index()</code>：返回一个简单的 HTML 表单，允许用户上传文件。</li>
<li><code>upload_file()</code>：处理文件上传请求，并将文件保存到指定目录。</li>
<li><code>uploaded_file()</code>：提供文件下载功能，通过 URL 访问上传的文件。</li>
</ul>
<h6 id="_7">启动服务器</h6>
<p>保存上述代码到 <code>app.py</code>，然后在命令行中运行：</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>app.py
</code></pre></div>

<p>访问 <code>http://127.0.0.1:5000/</code> 即可看到上传文件的表单。上传成功后，文件将保存在 <code>./uploads</code> 文件夹中。</p>
<h5 id="4-requests-flask">4. 使用 <code>requests</code> 库上传文件到 Flask 服务器</h5>
<p>一旦 Flask 服务器准备就绪，你可以使用以下 Python 脚本将文件上传到 Flask 服务器：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:5000/upload&#39;</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>

<h5 id="5-requests-flask">5. 使用 <code>requests</code> 库从 Flask 服务器下载文件</h5>
<p>你也可以通过 <code>requests</code> 库从服务器下载文件：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:5000/uploads/example.txt&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;downloaded_example.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>

<h5 id="6">6. 在生产环境中的注意事项</h5>
<p>在生产环境中，文件上传和下载的处理需要考虑更多因素：
- <strong>安全性</strong>：确保上传的文件不包含恶意代码。可以对上传文件类型进行严格的验证。
- <strong>文件大小限制</strong>：设置上传文件的大小限制，防止占用过多服务器资源。
- <strong>文件存储</strong>：考虑将文件存储在外部存储系统（如 AWS S3）而非本地服务器，以提高可扩展性和可靠性。</p>
<p>通过这些示例，你可以轻松实现 Python 中的文件上传和下载功能，并根据实际需求进行扩展和优化。</p>
<h5 id="5">5. 总结</h5>
<p>Python 的网络编程功能通过标准库和第三方库提供了强大的支持。<code>socket</code> 模块适合低级别的网络通信，<code>http</code> 模块和 <code>requests</code> 库简化了 HTTP 请求处理，而 <code>asyncio</code> 和 <code>websockets</code> 库提供了高效的异步编程支持。通过掌握这些工具，你可以实现各种网络应用，从简单的客户端-服务器通信到复杂的实时数据传输。</p>
<h2 id="_8">三、并发编程</h2>
<h3 id="1_1">1. 并发编程基础概念</h3>
<h4 id="11_1">1.1 并发与并行</h4>
<ul>
<li>并发（Concurrency）: 并发是指在同一时间段内，系统能够处理多个任务。任务之间可能是交替进行的，但在逻辑上看起来是同时进行的。并发任务可以在一个核心上交替运行。</li>
<li>并行（Parallelism）: 并行是指在同一时刻，多个任务在不同的处理器核心上同时运行。并行是真正意义上的同时执行，通常依赖于多核 CPU。</li>
</ul>
<h4 id="12_1">1.2 线程与进程</h4>
<ul>
<li>线程（Thread）: 线程是操作系统中能够独立执行的最小单位，一个进程可以包含多个线程。线程之间共享相同的内存空间，这使得线程之间的通信非常高效，但也带来了线程同步的问题。</li>
<li>进程（Process）: 进程是一个运行的程序实例，每个进程都有自己的内存空间。进程之间的通信需要通过进程间通信（IPC）机制，如管道、消息队列等。</li>
</ul>
<h3 id="2">2. 多线程编程</h3>
<p>Python 多线程编程主要通过 <code>threading</code> 模块来实现。多线程编程适合处理 I/O 密集型任务（如文件读写、网络请求等），因为这些任务在等待资源的过程中可以让出线程，从而提高整体效率。以下是 Python 多线程编程的详细介绍。</p>
<h4 id="1-python-threading">1. Python <code>threading</code> 模块基础</h4>
<p><code>threading</code> 模块是 Python 提供的标准库模块，用于创建和管理线程。以下是一些基本的概念和操作。</p>
<h5 id="11_2">1.1 创建线程</h5>
<p>你可以通过 <code>threading.Thread</code> 类创建一个新线程。线程的目标任务可以是一个函数或方法。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>

<span class="k">def</span> <span class="nf">print_numbers</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># 创建线程</span>
<span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">print_numbers</span><span class="p">)</span>

<span class="c1"># 启动线程</span>
<span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># 等待线程结束</span>
<span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<p>在上面的代码中，<code>thread.start()</code> 启动了新线程，新线程开始执行 <code>print_numbers</code> 函数。<code>thread.join()</code> 用于等待线程执行完毕。</p>
<h4 id="12_2">1.2 使用类方法创建线程</h4>
<p>除了直接使用函数作为线程目标外，还可以通过类方法来创建线程。这种方式有助于在复杂任务中管理线程状态。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>

<span class="k">class</span> <span class="nc">MyThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># 创建并启动线程</span>
<span class="n">thread</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">()</span>
<span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<p>在这里，<code>MyThread</code> 类继承自 <code>threading.Thread</code>，并覆盖了 <code>run()</code> 方法。<code>run()</code> 方法中的代码将在新线程中执行。</p>
<h4 id="2_1">2. 线程同步</h4>
<p>在多线程编程中，如果多个线程同时访问共享资源（如全局变量），可能会导致竞争条件（Race Condition）和数据不一致的问题。为了解决这些问题，Python 提供了锁（Lock）机制。</p>
<h5 id="21-lock">2.1 使用 <code>Lock</code> 实现线程同步</h5>
<p><code>Lock</code> 是一种最简单的线程同步机制。只有在锁被释放时，其他线程才能够获得锁并继续执行。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>

<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">increment_counter</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">counter</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
        <span class="c1"># 获取锁</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">increment_counter</span><span class="p">)</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>

<span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>  <span class="c1"># 输出 200000，保证线程安全</span>
</code></pre></div>

<p>在这段代码中，<code>with lock</code> 确保了 <code>counter += 1</code> 操作在多个线程之间是安全的，即同一时刻只有一个线程可以执行这段代码。</p>
<h4 id="22-rlock">2.2 使用 <code>RLock</code></h4>
<p><code>RLock</code>（可重入锁）允许同一个线程多次获取锁，而不会导致死锁。这在需要递归锁定的情况下非常有用。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">recursive_function</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Recursion level </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">recursive_function</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">recursive_function</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,))</span>
<span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h4 id="3_2">3. 线程间通信</h4>
<p>在 Python 中，线程间通信通常通过共享数据结构或使用同步原语（如锁、事件、条件变量等）来实现。<code>queue</code> 模块是其中一种常用的方法，它提供了线程安全的队列，用于在生产者和消费者线程之间传递数据。除此之外，还可以使用其他方式进行线程间的通信。</p>
<h5 id="1-queue">1. 使用 <code>queue</code> 模块进行线程间通信</h5>
<p><code>queue.Queue</code> 是一个线程安全的队列，可以让一个线程将数据放入队列，另一个线程从队列中取出数据。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">queue</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># 创建一个队列</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

<span class="c1"># 生产者线程</span>
<span class="k">def</span> <span class="nf">producer</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;item-</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Produced </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 消费者线程</span>
<span class="k">def</span> <span class="nf">consumer</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Consumed </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">q</span><span class="o">.</span><span class="n">task_done</span><span class="p">()</span>

<span class="c1"># 启动生产者和消费者线程</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producer</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">)</span>

<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># 向队列发送None信号，表示消费结束</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="2-threadingevent">2. 使用 <code>threading.Event</code> 进行线程间通信</h5>
<p><code>threading.Event</code> 是一种简单的同步原语，用于在线程之间发送信号。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># 创建一个事件对象</span>
<span class="n">event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">worker</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Worker waiting for event to start...&quot;</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>  <span class="c1"># 等待事件被设置</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Worker started...&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">controller</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Controller is starting the worker...&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>  <span class="c1"># 触发事件</span>

<span class="c1"># 启动工作线程和控制器线程</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">controller</span><span class="p">)</span>

<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="3-threadingcondition">3. 使用 <code>threading.Condition</code> 进行复杂同步</h5>
<p><code>threading.Condition</code> 可以在特定条件下唤醒等待的线程，它通常与锁一起使用。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">condition</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">()</span>

<span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># 生产者线程</span>
<span class="k">def</span> <span class="nf">producer</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">condition</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Produced </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">condition</span><span class="o">.</span><span class="n">notify</span><span class="p">()</span>  <span class="c1"># 通知消费者线程</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 消费者线程</span>
<span class="k">def</span> <span class="nf">consumer</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">condition</span><span class="p">:</span>
            <span class="n">condition</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>  <span class="c1"># 等待通知</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Consumed </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># 消费结束条件</span>
                <span class="k">break</span>

<span class="c1"># 启动线程</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producer</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">)</span>

<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="4_2">4. 使用全局变量和锁进行线程间通信</h5>
<p>尽管全局变量可以用于线程间共享数据，但需要使用锁来避免竞争条件。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">threading</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">shared_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">producer</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">shared_data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="n">shared_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Produced </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">consumer</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">shared_data</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">shared_data</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">shared_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Consumed </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># 消费结束条件</span>
                    <span class="k">break</span>

<span class="c1"># 启动线程</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producer</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">)</span>

<span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">t2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="_9">总结</h5>
<p>在 Python 中，线程间通信有多种方式可以实现，<code>queue</code> 模块是最常用且易于使用的一种。其他方式如 <code>Event</code>、<code>Condition</code> 以及全局变量加锁的方式也可以用于特定场景。选择哪种方法取决于具体的应用需求和复杂度。</p>
<h4 id="4_3">4. 使用线程池</h4>
<p>线程池是一种管理多个线程的高级机制。Python 的 <code>concurrent.futures</code> 模块提供了 <code>ThreadPoolExecutor</code> 类，用于方便地管理线程池。</p>
<h5 id="41-threadpoolexecutor">4.1 使用 <code>ThreadPoolExecutor</code></h5>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span>

<span class="c1"># 创建一个线程池，包含 3 个线程</span>
<span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>  <span class="c1"># 输出 [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span>
</code></pre></div>

<p><code>ThreadPoolExecutor</code> 自动管理线程的创建和销毁，使得并发编程更加简洁和高效。</p>
<h4 id="5_1">5. 多线程的注意事项</h4>
<h5 id="51-gil">5.1 GIL 的影响</h5>
<p>Python 的全局解释器锁（GIL）限制了多线程的并行执行，尤其是在 CPU 密集型任务中。多线程更适合 I/O 密集型任务，如果需要处理 CPU 密集型任务，通常推荐使用多进程（<code>multiprocessing</code>）来替代多线程。</p>
<h5 id="52">5.2 线程安全性</h5>
<p>在多线程环境中，确保共享资源的线程安全性非常重要。使用锁、队列或其他同步机制可以避免数据竞争和死锁等问题。</p>
<h4 id="6_1">6. 小结</h4>
<p>Python 的 <code>threading</code> 模块提供了创建和管理线程的强大工具。多线程编程在处理 I/O 密集型任务时特别有用，可以显著提高程序的性能和响应能力。然而，在处理 CPU 密集型任务时，需要注意 GIL 的影响，并考虑使用多进程或其他并发编程方式。理解并正确使用线程同步机制，可以避免多线程编程中的常见问题，如数据竞争和死锁。</p>
<h3 id="3_3">3. 多进程编程</h3>
<p>Python 多进程编程主要通过 <code>multiprocessing</code> 模块来实现。该模块允许你创建和管理多个独立的进程，从而实现真正的并行计算，尤其适用于需要充分利用多核 CPU 的任务。在多进程编程中，进程间通信（IPC, Inter-Process Communication）是一个重要的方面，用于在不同的进程之间共享数据或同步操作。</p>
<h4 id="1_2">1. 什么是多进程编程？</h4>
<ul>
<li>
<p><strong>进程（Process）</strong>：进程是一个独立的执行单元，具有自己的内存空间、全局变量和其他系统资源。操作系统调度进程执行，可以在不同的 CPU 核心上并行运行多个进程。</p>
</li>
<li>
<p><strong>线程与进程的区别</strong>：线程是进程中的一个执行路径，多个线程共享进程的内存空间和资源。进程之间相互独立，进程间通信需要专门的机制，而线程间共享数据相对容易，但需要解决同步问题。</p>
</li>
<li>
<p><strong>GIL（全局解释器锁）</strong>：Python 的 GIL 限制了同一时间只能有一个线程执行 Python 字节码，这对多线程的并行性能有影响。但多进程可以绕过 GIL 限制，每个进程都有自己的 Python 解释器实例。</p>
</li>
</ul>
<h4 id="2_2">2. 基础多进程操作</h4>
<h5 id="21_1">2.1 创建和启动进程</h5>
<p><code>multiprocessing.Process</code> 类用于创建一个新的进程。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;进程要执行的任务&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Worker: </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,))</span>
        <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<p>在这个例子中，创建了 5 个进程，每个进程执行 <code>worker</code> 函数。<code>start()</code> 方法用于启动进程，<code>join()</code> 方法用于等待进程完成。</p>
<h5 id="22_1">2.2 使用类方法创建进程</h5>
<p>可以通过继承 <code>Process</code> 类并重写 <code>run</code> 方法来创建自定义进程类。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">class</span> <span class="nc">MyProcess</span><span class="p">(</span><span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">num</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Process: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">MyProcess</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h4 id="3_4">3. 进程间通信</h4>
<p>多进程编程中，不同进程具有独立的内存空间，因此需要使用特定的机制进行进程间通信。Python 提供了多种 IPC 方式：</p>
<h5 id="31-queue">3.1 使用 <code>Queue</code></h5>
<p><code>multiprocessing.Queue</code> 提供了一个进程安全的队列，允许多个进程间进行数据传递。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">producer</span><span class="p">(</span><span class="n">queue</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Producing </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">consumer</span><span class="p">(</span><span class="n">queue</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># 退出条件</span>
            <span class="k">break</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Consuming </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

    <span class="n">p1</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producer</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># 通知消费者进程结束</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="32-pipe">3.2 使用 <code>Pipe</code></h5>
<p><code>Pipe</code> 提供了一个双向的通信通道，适合简单的两个进程之间的通信。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">sender</span><span class="p">(</span><span class="n">pipe</span><span class="p">):</span>
    <span class="n">pipe</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;Hello from sender!&quot;</span><span class="p">)</span>
    <span class="n">pipe</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">receiver</span><span class="p">(</span><span class="n">pipe</span><span class="p">):</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Received: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">pipe</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">parent_conn</span><span class="p">,</span> <span class="n">child_conn</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pipe</span><span class="p">()</span>

    <span class="n">p1</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">child_conn</span><span class="p">,))</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">receiver</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">parent_conn</span><span class="p">,))</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h5 id="33-manager">3.3 使用 <code>Manager</code> 共享复杂数据</h5>
<p><code>multiprocessing.Manager</code> 是 Python 标准库 <code>multiprocessing</code> 模块中的一个类，用于在多进程之间共享数据。<code>Manager</code> 提供了一种便捷的方式，允许多个进程在共享状态下工作，而不需要手动处理复杂的进程间通信机制，如管道或队列。</p>
<h6 id="1-multiprocessingmanager">1. <code>multiprocessing.Manager</code> 的概述</h6>
<ul>
<li><strong>共享数据</strong>: <code>Manager</code> 可以生成各种类型的共享数据结构，如列表、字典、队列、命名空间、锁等。这些数据结构可以被多个进程安全地共享和操作。</li>
<li><strong>进程安全</strong>: <code>Manager</code> 创建的对象都是进程安全的，意味着它们可以被多个进程并发访问，而不会出现数据竞争问题。</li>
</ul>
<h6 id="2_3">2. 常用方法</h6>
<ul>
<li><strong><code>Manager()</code></strong>: 创建一个 <code>Manager</code> 对象。通过该对象可以创建各种共享数据结构。</li>
<li><strong><code>list()</code></strong>: 创建一个共享的列表对象。</li>
<li><strong><code>dict()</code></strong>: 创建一个共享的字典对象。</li>
<li><strong><code>Queue()</code></strong>: 创建一个共享的队列对象。</li>
<li><strong><code>Namespace()</code></strong>: 创建一个共享的命名空间对象，类似于对象，允许动态地添加属性。</li>
<li><strong><code>Lock()</code></strong>: 创建一个共享的锁对象，用于控制对共享资源的访问。</li>
</ul>
<h6 id="3_5">3. 示例代码</h6>
<p>以下是使用 <code>multiprocessing.Manager</code> 的一些示例，展示如何在多进程中共享数据：</p>
<h6 id="_10"># 共享列表示例</h6>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">shared_list</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">shared_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
        <span class="n">shared_list</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">list</span><span class="p">([</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># 创建一个共享列表</span>
        <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">shared_list</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="mi">10</span><span class="p">))</span>
            <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">shared_list</span><span class="p">)</span>  <span class="c1"># 输出: [0, 10, 20, 30, 40]</span>
</code></pre></div>

<h6 id="_11"># 共享字典示例</h6>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">shared_dict</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">shared_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
        <span class="n">shared_dict</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>  <span class="c1"># 创建一个共享字典</span>
        <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">shared_dict</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;key</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="mi">10</span><span class="p">))</span>
            <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">shared_dict</span><span class="p">)</span>  <span class="c1"># 输出: {&#39;key0&#39;: 0, &#39;key1&#39;: 10, &#39;key2&#39;: 20, &#39;key3&#39;: 30, &#39;key4&#39;: 40}</span>
</code></pre></div>

<h6 id="_12"># 共享命名空间示例</h6>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">namespace</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>  <span class="c1"># 创建一个共享命名空间</span>
        <span class="n">namespace</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="mi">10</span><span class="p">))</span>
            <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">namespace</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># 输出: 40 (最后一个进程写入的值)</span>
</code></pre></div>

<h6 id="4_4">4. 使用场景</h6>
<ul>
<li><strong>共享状态管理</strong>: 在多进程编程中，<code>Manager</code> 非常适合用于管理共享状态。例如，在一个生产者-消费者模型中，<code>Manager</code> 可以用于管理共享队列。</li>
<li><strong>进程间通信</strong>: <code>Manager</code> 提供的共享数据结构可以在多个进程间安全通信，避免手动处理管道、队列等低级通信方式。</li>
<li><strong>复杂同步</strong>: 使用 <code>Manager</code> 创建的锁对象可以在多个进程间共享，用于控制对共享资源的访问，避免竞态条件。</li>
</ul>
<h3 id="5_2">5. 注意事项</h3>
<ul>
<li><strong>性能问题</strong>: <code>Manager</code> 提供的共享对象是在一个单独的进程中管理的，因此每次访问这些对象都会涉及进程间通信，可能会带来一定的性能开销。对于需要高性能的应用，手动使用 <code>Queue</code> 或 <code>Pipe</code> 可能会更高效。</li>
<li><strong>可扩展性</strong>: 虽然 <code>Manager</code> 提供了易用的共享对象，但在非常复杂或大规模的并行任务中，可能需要更加定制化的同步机制。</li>
</ul>
<h6 id="_13">总结</h6>
<p><code>multiprocessing.Manager</code> 是一个强大的工具，允许在 Python 的多进程环境中轻松共享和管理数据结构。它简化了多进程同步的实现，适用于大多数需要共享状态的并行任务。然而，在对性能要求较高的场景中，可能需要考虑使用其他更加轻量级的进程间通信方式。</p>
<h4 id="4_5">4. 进程同步</h4>
<p>在多进程环境下，当多个进程需要访问共享资源时，可能会发生数据竞争，导致数据不一致。<code>multiprocessing</code> 模块提供了多种同步机制。</p>
<h5 id="41-lock">4.1 使用 <code>Lock</code> 进行同步</h5>
<p><code>multiprocessing.Lock</code> 可以确保一次只有一个进程访问共享资源，从而避免数据竞争。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">increment_counter</span><span class="p">(</span><span class="n">lock</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">counter</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">increment_counter</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">lock</span><span class="p">,))</span>
        <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
</code></pre></div>

<h5 id="42-event">4.2 使用 <code>Event</code> 同步进程</h5>
<p><code>Event</code> 是一种简单的信号机制，可以让一个或多个进程等待某个事件发生。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">wait_for_event</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wait_for_event: waiting for event to start&#39;</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wait_for_event: event received, continuing&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">start_event</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;start_event: sleeping before starting event&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

    <span class="n">p1</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">wait_for_event</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">event</span><span class="p">,))</span>
    <span class="n">p2</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">start_event</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">event</span><span class="p">,))</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="n">p1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="n">p2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>

<h4 id="5-pool">5. 进程池（Pool）</h4>
<p>进程池（<code>multiprocessing.Pool</code>）提供了一种更高效的进程管理方式，尤其在需要处理大量小任务时非常有用。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">processes</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>

<p><code>Pool.map</code> 函数会自动分配任务到进程池中的多个进程执行，并返回结果列表。</p>
<h4 id="6-value-array">6. 使用 <code>Value</code> 和 <code>Array</code> 共享数据</h4>
<p><code>multiprocessing.Value</code> 和 <code>Array</code> 允许在进程间共享简单的数据类型（如整数、浮点数和数组）。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">multiprocessing</span>

<span class="k">def</span> <span class="nf">increment_value</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
    <span class="n">val</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># &#39;i&#39; 表示整型</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

    <span class="n">processes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">increment_value</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
        <span class="n">processes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">:</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># 输出 2</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">[:])</span>     <span class="c1"># 输出 [3, 4, 5, 6]</span>
</code></pre></div>

<h4 id="7">7. 注意事项</h4>
<ul>
<li>
<p><strong>性能开销</strong>：进程之间的上下文切换、进程的创建和销毁都会带来性能开销。因此，多进程编程适合任务较重且具有并行计算需求的场景。</p>
</li>
<li>
<p><strong>数据一致性</strong>：多进程编程中共享数据时需特别注意数据一致性问题，使用合适的同步机制确保数据的正确性。</p>
</li>
<li>
<p><strong>死锁问题</strong>：避免在多进程中使用多把锁或嵌套锁，可能会导致死锁。</p>
</li>
</ul>
<h4 id="8">8. 小结</h4>
<p>Python 的 <code>multiprocessing</code> 模块为多进程编程提供了丰富的工具，从简单的进程创建到复杂的进程间通信和同步。通过使用 <code>Queue</code>、<code>Pipe</code>、<code>Manager</code> 等工具，你可以在多个进程之间有效地传递数据和消息。通过 <code>Lock</code>、<code>Event</code> 等同步机制，你可以确保在并发访问共享资源时不会出现数据竞争问题。</p>
<p>多进程编程对于处理 CPU 密集型任务和需要并行计算的场景非常有效。希望这篇讲解能够帮助你更好地理解和应用 Python 的多进程编程。</p>
<h3 id="_14">四、异步编程</h3>
<p>异步编程是一种处理并发任务的编程方式，旨在高效地执行 I/O 操作或其他长时间运行的任务，而无需阻塞主线程或进程。与多线程和多进程不同，异步编程通过非阻塞操作来提高程序的响应性和性能。Python 提供了多个工具和库来实现异步编程，最主要的是 <code>asyncio</code> 模块。</p>
<h4 id="1_3">1. 异步编程的基本概念</h4>
<h5 id="11_3">1.1 同步与异步</h5>
<ul>
<li>
<p><strong>同步（Synchronous）</strong>：程序在执行一个操作时，必须等待其完成后才能继续执行下一步。这种方式简单易理解，但在等待外部资源（如文件、网络请求）时会导致阻塞，降低程序的性能。</p>
</li>
<li>
<p><strong>异步（Asynchronous）</strong>：程序在执行一个操作时，不必等待其完成，而是可以继续执行其他操作。当操作完成时，会通知程序进行后续处理。异步编程通过避免阻塞，提高了并发任务的执行效率。</p>
</li>
</ul>
<h5 id="12_3">1.2 阻塞与非阻塞</h5>
<ul>
<li>
<p><strong>阻塞（Blocking）</strong>：调用某个操作时，程序暂停执行，直到操作完成。</p>
</li>
<li>
<p><strong>非阻塞（Non-blocking）</strong>：调用某个操作时，程序不会暂停执行，可以立即继续做其他事情。</p>
</li>
</ul>
<h5 id="13_1">1.3 回调与事件循环</h5>
<ul>
<li>
<p><strong>回调（Callback）</strong>：在异步编程中，回调函数是在任务完成后自动调用的函数。传统的异步编程常使用回调来处理异步任务的结果。</p>
</li>
<li>
<p><strong>事件循环（Event Loop）</strong>：事件循环是异步编程的核心，负责管理和调度异步任务。它不断检查待执行的任务，并在任务完成时触发相应的回调或继续执行后续步骤。</p>
</li>
</ul>
<h4 id="2-python_1">2. Python 中的异步编程</h4>
<h5 id="21-asyncio">2.1 <code>asyncio</code> 模块</h5>
<p>Python 的 <code>asyncio</code> 模块是构建异步应用的基础。它提供了事件循环、协程、任务、以及异步 I/O 操作的支持。</p>
<h6 id="211-coroutine">2.1.1 协程（Coroutine）</h6>
<p>协程是 Python 中的一种特殊函数，用于实现异步操作。定义协程需要使用 <code>async def</code> 语法，并通过 <code>await</code> 关键字来挂起协程的执行，以等待异步操作完成。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">say_hello</span><span class="p">())</span>
</code></pre></div>

<p>在这个例子中，<code>say_hello</code> 是一个协程函数，它在打印 "Hello" 后，通过 <code>await asyncio.sleep(1)</code> 挂起自己 1 秒钟，然后再打印 "World"。</p>
<h6 id="212-event-loop">2.1.2 事件循环（Event Loop）</h6>
<p>事件循环是管理和调度协程的核心组件。<code>asyncio.run()</code> 函数会启动一个事件循环并执行指定的协程。</p>
<div class="codehilite"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h6 id="213">2.1.3 创建和调度任务</h6>
<p>任务是协程的包装器，它将协程提交给事件循环以便执行。通过 <code>asyncio.create_task()</code> 或 <code>loop.create_task()</code> 可以显式地创建任务。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> started&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> finished&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">task1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">task2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">await</span> <span class="n">task1</span>
    <span class="k">await</span> <span class="n">task2</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<p>在这个例子中，两个任务 <code>task1</code> 和 <code>task2</code> 会并发执行，最终输出顺序可能为 "Task A started" -&gt; "Task B started" -&gt; "Task B finished" -&gt; "Task A finished"。</p>
<h6 id="214">2.1.4 并发执行多个任务</h6>
<p>可以使用 <code>await asyncio.gather()</code> 来并发执行多个协程。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> started&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> finished&quot;</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
        <span class="n">task</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="n">task</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">task</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h6 id="215">2.1.5 超时与取消任务</h6>
<p><code>asyncio.wait_for()</code> 可以设置协程的超时时间，如果超时则抛出 <code>asyncio.TimeoutError</code> 异常。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">long_task</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;Finished&quot;</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">long_task</span><span class="p">(),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Task timed out&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h4 id="3-io">3. 异步 I/O 操作</h4>
<p>异步编程的一个重要应用场景是 I/O 操作，如文件读写、网络请求等。<code>asyncio</code> 提供了异步的 I/O 操作，避免在等待 I/O 完成时阻塞事件循环。</p>
<h5 id="31_1">3.1 异步文件操作</h5>
<p>Python 3.8 引入了 <code>aiofiles</code> 库，它允许你异步读写文件。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">aiofiles</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">async_write_read</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiofiles</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello, world!&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">aiofiles</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_write_read</span><span class="p">())</span>
</code></pre></div>

<h5 id="32">3.2 异步网络操作</h5>
<p><code>aiohttp</code> 是一个基于 <code>asyncio</code> 的异步 HTTP 客户端和服务端库。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">aiohttp</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">html</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;https://www.example.com&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h4 id="4_6">4. 高级异步编程概念</h4>
<h5 id="41_1">4.1 异步生成器</h5>
<p>异步生成器是生成器的异步版本，允许你在 <code>async for</code> 循环中使用 <code>await</code>。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">async_generator</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">i</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">async_generator</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h5 id="42">4.2 异步上下文管理器</h5>
<p>异步上下文管理器允许你在 <code>async with</code> 语句中使用 <code>await</code>，用于异步地管理资源。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">class</span> <span class="nc">AsyncContextManager</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Entering context&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting context&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncContextManager</span><span class="p">()</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Inside context&#39;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>

<h4 id="5_3">5. 异步编程的优点与缺点</h4>
<h5 id="51">5.1 优点</h5>
<ul>
<li><strong>高效的 I/O 操作</strong>：异步编程能够在等待 I/O 操作时继续执行其他任务，避免了不必要的阻塞。</li>
<li><strong>适合 I/O 密集型任务</strong>：异步编程特别适合处理大量的 I/O 操作，如网络请求、文件读写等。</li>
</ul>
<h5 id="52_1">5.2 缺点</h5>
<ul>
<li><strong>复杂性增加</strong>：异步编程的代码逻辑比同步代码更复杂，尤其是在处理错误和取消任务时。</li>
<li><strong>难以调试</strong>：由于异步代码的非线性执行，调试和追踪错误变得更加困难。</li>
</ul>
<h4 id="6_2">6. 小结</h4>
<p>Python 的异步编程提供了一种高效处理并发任务的方式，特别适用于 I/O 密集型任务。通过 <code>asyncio</code> 模块，Python 提供了强大的异步编程支持，包括协程、任务、事件循环、以及异步 I/O 操作。尽管异步编程可能增加代码复杂性，但在需要处理大量并发操作的场景下，它的优点是显而易见的。理解并掌握异步编程技巧，可以帮助你编写更高效、更响应的 Python 程序。</p>
<h4 id="io">IO模式</h4>
<p>I/O（输入/输出）模式是操作系统和程序与硬件设备（如磁盘、网络、终端等）之间进行数据交互的方式。在现代操作系统中，I/O 操作是非常关键的，因为它涉及到数据的读取和写入，直接影响到程序的性能和响应能力。</p>
<p>在操作系统和编程中，I/O 模式主要包括以下几种：</p>
<h5 id="1-io-blocking-io">1. <strong>阻塞 I/O (Blocking I/O)</strong></h5>
<h6 id="_15">概念</h6>
<ul>
<li><strong>定义</strong>: 在阻塞 I/O 模式下，当一个进程执行 I/O 操作时，如果操作无法立即完成，进程将被阻塞，直到操作完成为止。此时，进程处于等待状态，无法执行其他操作。</li>
<li><strong>特点</strong>:</li>
<li>简单易用，代码编写和理解较为直观。</li>
<li>由于进程被阻塞，资源利用率较低，尤其是在处理多个 I/O 请求时，可能会导致性能瓶颈。</li>
<li><strong>应用场景</strong>: 常用于简单的应用程序，如文件读取、基本网络通信等。</li>
</ul>
<h6 id="_16">示例</h6>
<p>假设你需要读取一个文件内容，使用阻塞 I/O 模式的代码示例如下：</p>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># 阻塞等待数据读取完成</span>
</code></pre></div>

<p>在这段代码中，<code>read</code> 操作会阻塞进程，直到文件读取完成为止。</p>
<h5 id="2-io-non-blocking-io">2. <strong>非阻塞 I/O (Non-blocking I/O)</strong></h5>
<h6 id="_17">概念</h6>
<ul>
<li><strong>定义</strong>: 在非阻塞 I/O 模式下，I/O 操作会立即返回，而不管数据是否已经准备好。如果操作无法立即完成，系统会返回一个错误（如 <code>EWOULDBLOCK</code>），进程可以继续执行其他任务。</li>
<li><strong>特点</strong>:</li>
<li>提高了进程的并发性，因为进程不会因等待 I/O 而被阻塞。</li>
<li>需要处理返回的错误或空结果，这使得编程更加复杂。</li>
<li><strong>应用场景</strong>: 常用于需要处理高并发的网络服务器等场景。</li>
</ul>
<h6 id="_18">示例</h6>
<p>在非阻塞模式下读取文件的示例：</p>
<div class="codehilite"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="s">&quot;example.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">O_NONBLOCK</span><span class="p">);</span><span class="w">  </span><span class="c1">// 以非阻塞模式打开文件</span>
<span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">);</span><span class="w">  </span><span class="c1">// 如果没有数据立即可读，read 会立即返回而不会阻塞</span>
</code></pre></div>

<p>这里的 <code>read</code> 函数会立即返回，不论数据是否准备好，进程可以继续其他操作。</p>
<h5 id="3-io-io-multiplexing">3. <strong>I/O 多路复用 (I/O Multiplexing)</strong></h5>
<h6 id="_19">概念</h6>
<ul>
<li><strong>定义</strong>: I/O 多路复用允许一个进程同时监视多个文件描述符，当其中任何一个文件描述符就绪时（如可读或可写），进程可以对其进行 I/O 操作。这种模式通过减少进程的阻塞时间来提高并发性。</li>
<li><strong>常见方法</strong>: <code>select</code>、<code>poll</code> 和 <code>epoll</code> 是常见的 I/O 多路复用方法。</li>
<li><strong>特点</strong>:</li>
<li>适合处理大量 I/O 请求，如需要同时处理多个网络连接的服务器。</li>
<li>可能在处理大量文件描述符时产生性能瓶颈，特别是在使用 <code>select</code> 和 <code>poll</code> 时。</li>
<li><strong>应用场景</strong>: 常用于高并发服务器、网络编程等需要同时处理多个 I/O 操作的场景。</li>
</ul>
<h6 id="_20">示例</h6>
<p>使用 <code>select</code> 监视多个文件描述符的示例：</p>
<div class="codehilite"><pre><span></span><code><span class="n">fd_set</span><span class="w"> </span><span class="n">readfds</span><span class="p">;</span>
<span class="n">FD_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span>
<span class="n">FD_SET</span><span class="p">(</span><span class="n">fd1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span>
<span class="n">FD_SET</span><span class="p">(</span><span class="n">fd2</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span>
<span class="n">select</span><span class="p">(</span><span class="n">fd2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">readfds</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w">  </span><span class="c1">// 阻塞等待任意一个文件描述符可读</span>
</code></pre></div>

<p>在这个示例中，<code>select</code> 会阻塞，直到 <code>fd1</code> 或 <code>fd2</code> 中有一个文件描述符可读。</p>
<h5 id="4-io-signal-driven-io">4. <strong>信号驱动 I/O (Signal-driven I/O)</strong></h5>
<h6 id="_21">概念</h6>
<ul>
<li><strong>定义</strong>: 信号驱动 I/O 允许进程在 I/O 设备准备好时接收到一个信号，然后在信号处理程序中执行 I/O 操作。它是一种异步 I/O 的形式。</li>
<li><strong>特点</strong>:</li>
<li>进程在等待 I/O 设备就绪时可以继续执行其他任务，I/O 设备就绪后通过信号通知进程。</li>
<li>编程较为复杂，需要处理信号和信号处理程序。</li>
<li><strong>应用场景</strong>: 用于对实时性要求较高的场景，如网络应用中的异步事件处理。</li>
</ul>
<h6 id="_22">示例</h6>
<p>伪代码示例：</p>
<div class="codehilite"><pre><span></span><code><span class="n">signal</span><span class="p">(</span><span class="n">SIGIO</span><span class="p">,</span><span class="w"> </span><span class="n">io_handler</span><span class="p">);</span><span class="w">  </span><span class="c1">// 设置信号处理程序</span>
<span class="n">fcntl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">F_SETFL</span><span class="p">,</span><span class="w"> </span><span class="n">O_ASYNC</span><span class="p">);</span><span class="w">  </span><span class="c1">// 使能异步 I/O</span>
<span class="c1">// 当 fd 可读时，会触发 SIGIO 信号，调用 io_handler 处理 I/O</span>
</code></pre></div>

<h5 id="5-io-asynchronous-io-aio">5. <strong>异步 I/O (Asynchronous I/O, AIO)</strong></h5>
<h6 id="_23">概念</h6>
<ul>
<li><strong>定义</strong>: 在异步 I/O 模式下，进程发起 I/O 操作后立即返回，而不等待操作完成。I/O 操作由操作系统在后台完成，完成后会通知进程（通过信号或回调函数），此时进程可以处理 I/O 结果。</li>
<li><strong>特点</strong>:</li>
<li>最大化 CPU 和 I/O 设备的利用率，适合高性能应用。</li>
<li>编程较为复杂，需要管理 I/O 操作的回调和通知。</li>
<li><strong>应用场景</strong>: 常用于高性能服务器、数据库系统等需要最大化并发和性能的应用。</li>
</ul>
<h6 id="_24">示例</h6>
<p>使用异步 I/O 读取文件的伪代码：</p>
<div class="codehilite"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">aiocb</span><span class="w"> </span><span class="n">cb</span><span class="p">;</span>
<span class="n">cb</span><span class="p">.</span><span class="n">aio_fildes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span>
<span class="n">cb</span><span class="p">.</span><span class="n">aio_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<span class="n">cb</span><span class="p">.</span><span class="n">aio_nbytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="p">;</span>
<span class="n">aio_read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cb</span><span class="p">);</span><span class="w">  </span><span class="c1">// 发起异步读取请求，立即返回</span>
<span class="c1">// 程序可以继续执行其他操作，稍后会收到 I/O 完成通知</span>
</code></pre></div>

<h5 id="_25">总结</h5>
<ul>
<li><strong>阻塞 I/O</strong>: 简单直观，但会导致进程等待 I/O 操作完成而阻塞。</li>
<li><strong>非阻塞 I/O</strong>: 提高了并发性，但需要手动处理未完成的 I/O 操作。</li>
<li><strong>I/O 多路复用</strong>: 允许同时监视多个 I/O 操作，提高了并发性，适合处理大量 I/O 请求。</li>
<li><strong>信号驱动 I/O</strong>: 通过信号异步处理 I/O 操作，适合实时性要求较高的场景。</li>
<li><strong>异步 I/O</strong>: 提供最高的并发和性能，但编程复杂度也最高。</li>
</ul>
<p>不同的 I/O 模式适用于不同的应用场景，选择合适的 I/O 模式可以显著提高程序的性能和响应能力。</p>
<h6 id="_26">实现</h6>
<p>I/O 多路复用是一种允许程序同时监控多个 I/O 通道（如网络连接、文件描述符等）的方法，通常用于处理网络服务器、并发客户端等场景。它可以避免在处理多个 I/O 操作时阻塞线程或进程，从而提高系统的并发处理能力。下面详细讲解 I/O 多路复用的概念、机制、应用场景和具体实现。</p>
<h3 id="1-io">1. I/O 多路复用的概念</h3>
<p>I/O 多路复用的核心思想是通过单一线程或进程来监控多个文件描述符（文件、套接字等），当这些描述符中的任何一个准备好执行 I/O 操作（如读或写）时，操作系统会通知应用程序，应用程序则对该文件描述符进行相应的处理。</p>
<h3 id="2-io">2. I/O 模型概述</h3>
<p>在操作系统中，常见的 I/O 模型包括：</p>
<ul>
<li>
<p><strong>阻塞 I/O</strong>：应用程序调用 I/O 操作时会被阻塞，直到操作完成。</p>
</li>
<li>
<p><strong>非阻塞 I/O</strong>：应用程序调用 I/O 操作时立即返回，如果没有数据可用，则返回一个错误。</p>
</li>
<li>
<p><strong>I/O 多路复用</strong>：通过系统调用 <code>select</code>、<code>poll</code> 或 <code>epoll</code>，一个线程可以监控多个文件描述符，只有在某些描述符可用时才进行实际的 I/O 操作。</p>
</li>
<li>
<p><strong>信号驱动 I/O</strong>：使用信号通知应用程序何时可以执行 I/O 操作。</p>
</li>
<li>
<p><strong>异步 I/O</strong>：应用程序发出 I/O 请求，操作系统在操作完成后通知应用程序。</p>
</li>
</ul>
<h3 id="3-io_1">3. I/O 多路复用的机制</h3>
<p><a href="https://blog.csdn.net/randompeople/article/details/109485146">IO多路复用详解</a></p>
<p>以下是 <code>select</code>、<code>poll</code> 和 <code>epoll</code> 的对比表格，涵盖了它们的主要特性和适用场景：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th><code>select</code></th>
<th><code>poll</code></th>
<th><code>epoll</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>实现机制</strong></td>
<td>基于轮询的机制</td>
<td>基于事件驱动的机制</td>
<td>基于事件驱动的机制，适用于 Linux</td>
</tr>
<tr>
<td><strong>文件描述符限制</strong></td>
<td>通常为 1024（取决于系统设置）</td>
<td>无固定限制</td>
<td>无固定限制</td>
</tr>
<tr>
<td><strong>性能</strong></td>
<td>性能随着文件描述符数量增加而下降</td>
<td>性能优于 <code>select</code>，适合更多文件描述符</td>
<td>性能优秀，适合大量文件描述符</td>
</tr>
<tr>
<td><strong>内核/用户态开销</strong></td>
<td>每次调用 <code>select</code> 时，传递和接收整个文件描述符集合</td>
<td>每次调用 <code>poll</code> 时，传递和接收事件数组</td>
<td>高效的事件通知，内核只维护一个文件描述符表</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>适合少量文件描述符的场景</td>
<td>适合中等数量的文件描述符</td>
<td>适合高并发、大量文件描述符的场景</td>
</tr>
<tr>
<td><strong>事件通知方式</strong></td>
<td>文件描述符集合中哪些准备好进行 I/O 操作</td>
<td>返回所有准备好的文件描述符及其事件</td>
<td>使用事件表，返回发生事件的文件描述符</td>
</tr>
<tr>
<td><strong>编程复杂度</strong></td>
<td>编程简单，但效率较低</td>
<td>编程较简单，性能较高</td>
<td>编程复杂度较高，但性能和扩展性最优</td>
</tr>
<tr>
<td><strong>线程安全</strong></td>
<td>需要注意线程安全的问题</td>
<td>需要注意线程安全的问题</td>
<td>线程安全，适合高并发应用</td>
</tr>
<tr>
<td><strong>适用操作系统</strong></td>
<td>主要适用于 Unix/Linux 和 Windows</td>
<td>主要适用于 Unix/Linux</td>
<td>主要适用于 Linux</td>
</tr>
</tbody>
</table>
<h3 id="_27">详细说明</h3>
<ul>
<li>
<p><strong><code>select</code></strong>：适用于文件描述符数量较少的情况，简单易用，但在处理大量文件描述符时性能会受到影响。每次调用都需要重新设置文件描述符集合，且有文件描述符数量的上限。</p>
</li>
<li>
<p><strong><code>poll</code></strong>：在处理大量文件描述符时性能优于 <code>select</code>，没有固定的文件描述符数量限制。每次调用只需传递和接收事件数组，适合中等规模的应用。</p>
</li>
<li>
<p><strong><code>epoll</code></strong>：专为 Linux 设计，能够处理成千上万的文件描述符，性能最好。支持边缘触发和水平触发模式，适合高并发的场景。相比 <code>select</code> 和 <code>poll</code>，<code>epoll</code> 在处理大规模并发连接时效率最高。</p>
</li>
</ul>
<p>根据实际应用场景和需求，可以选择最适合的 I/O 多路复用机制来优化系统的性能。</p>
<p>I/O 多路复用在操作系统中的实现主要有以下几种机制：</p>
<h4 id="1-select">1. <code>select</code></h4>
<p><code>select</code> 是一种最早的 I/O 多路复用机制，适用于监视少量文件描述符。</p>
<ul>
<li><strong>使用方法</strong>：</li>
<li>应用程序将一组文件描述符集合传递给 <code>select</code>。</li>
<li><code>select</code> 在指定的时间内阻塞，直到其中一个或多个文件描述符变为可读、可写或发生异常。</li>
<li>
<p>返回后，应用程序可以遍历集合，找出那些就绪的描述符进行处理。</p>
</li>
<li>
<p><strong>缺点</strong>：文件描述符集合的大小有限制（通常为 1024），且每次调用都需要重新设置集合，性能较差。</p>
</li>
</ul>
<p><strong>代码示例</strong>：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">select</span>
<span class="kn">import</span> <span class="nn">socket</span>

<span class="c1"># 创建监听套接字</span>
<span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">))</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 设置需要监控的文件描述符集合</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">server_socket</span><span class="p">]</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="n">inputs</span><span class="p">:</span>
    <span class="n">readable</span><span class="p">,</span> <span class="n">writable</span><span class="p">,</span> <span class="n">exceptional</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">readable</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="n">server_socket</span><span class="p">:</span>
            <span class="n">connection</span><span class="p">,</span> <span class="n">client_address</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">inputs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">writable</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ACK&#39;</span><span class="p">)</span>
        <span class="n">outputs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">exceptional</span><span class="p">:</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">:</span>
            <span class="n">outputs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<h4 id="2-poll">2. <code>poll</code></h4>
<p><code>poll</code> 是 <code>select</code> 的改进版本，去除了文件描述符数量限制，并返回所有就绪的文件描述符。</p>
<ul>
<li><strong>使用方法</strong>：</li>
<li>应用程序将文件描述符及其感兴趣的事件注册到 <code>poll</code> 中。</li>
<li>
<p><code>poll</code> 阻塞等待事件发生，一旦发生就返回所有就绪的文件描述符。</p>
</li>
<li>
<p><strong>优点</strong>：没有文件描述符数量限制，性能优于 <code>select</code>。</p>
</li>
</ul>
<p><strong>代码示例</strong>：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">select</span>
<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">))</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="n">poller</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
<span class="n">poller</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">server_socket</span><span class="p">,</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLIN</span><span class="p">)</span>

<span class="n">fd_to_socket</span> <span class="o">=</span> <span class="p">{</span><span class="n">server_socket</span><span class="o">.</span><span class="n">fileno</span><span class="p">():</span> <span class="n">server_socket</span><span class="p">}</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">poller</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">fd</span><span class="p">,</span> <span class="n">flag</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLIN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="n">server_socket</span><span class="p">:</span>
                <span class="n">connection</span><span class="p">,</span> <span class="n">client_address</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">connection</span><span class="o">.</span><span class="n">fileno</span><span class="p">()]</span> <span class="o">=</span> <span class="n">connection</span>
                <span class="n">poller</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLIN</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                    <span class="n">poller</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLOUT</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">poller</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">del</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">flag</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLOUT</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ACK&#39;</span><span class="p">)</span>
            <span class="n">poller</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLIN</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">flag</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLHUP</span><span class="p">:</span>
            <span class="n">poller</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">del</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
</code></pre></div>

<h4 id="3-epoll">3. <code>epoll</code></h4>
<p><code>epoll</code> 是 Linux 系统中特有的 I/O 多路复用机制，适用于处理大量并发连接，性能优越。</p>
<ul>
<li><strong>使用方法</strong>：</li>
<li><code>epoll_create</code>：创建一个 epoll 实例。</li>
<li><code>epoll_ctl</code>：将文件描述符及其感兴趣的事件注册到 epoll 中。</li>
<li>
<p><code>epoll_wait</code>：等待事件发生并返回就绪的文件描述符。</p>
</li>
<li>
<p><strong>优点</strong>：效率高、适合高并发场景，不需要每次调用都重新设置文件描述符集合。</p>
</li>
</ul>
<p><strong>代码示例</strong>：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">select</span>
<span class="kn">import</span> <span class="nn">socket</span>

<span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">))</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">server_socket</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="n">epoll</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">epoll</span><span class="p">()</span>
<span class="n">epoll</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">server_socket</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLIN</span><span class="p">)</span>

<span class="n">fd_to_socket</span> <span class="o">=</span> <span class="p">{</span><span class="n">server_socket</span><span class="o">.</span><span class="n">fileno</span><span class="p">():</span> <span class="n">server_socket</span><span class="p">}</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">epoll</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">fd</span><span class="p">,</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLIN</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="n">server_socket</span><span class="p">:</span>
                <span class="n">connection</span><span class="p">,</span> <span class="n">client_address</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">connection</span><span class="o">.</span><span class="n">fileno</span><span class="p">()]</span> <span class="o">=</span> <span class="n">connection</span>
                <span class="n">epoll</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLIN</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
                    <span class="n">epoll</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLOUT</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">epoll</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">del</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">event</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLOUT</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;ACK&#39;</span><span class="p">)</span>
            <span class="n">epoll</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLIN</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">event</span> <span class="o">&amp;</span> <span class="n">select</span><span class="o">.</span><span class="n">EPOLLHUP</span><span class="p">:</span>
            <span class="n">epoll</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">fileno</span><span class="p">())</span>
            <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">del</span> <span class="n">fd_to_socket</span><span class="p">[</span><span class="n">fd</span><span class="p">]</span>
</code></pre></div>

<h3 id="4-io">4. I/O 多路复用的应用场景</h3>
<ul>
<li><strong>高并发网络服务器</strong>：如 Web 服务器、聊天服务器，需要同时处理大量的客户端连接。</li>
<li><strong>实时数据处理</strong>：如交易系统、日志系统，能够高效处理多个数据源的实时数据。</li>
<li><strong>数据库连接池管理</strong>：管理多个数据库连接，优化资源利用。</li>
</ul>
<h3 id="5-io">5. I/O 多路复用的优缺点</h3>
<ul>
<li><strong>优点</strong>：</li>
<li>提高了系统处理大量并发连接的能力。</li>
<li>避免了线程或进程的频繁切换，降低了系统开销。</li>
<li>
<p>提供了较好的灵活性，适应多种 I/O 操作需求。</p>
</li>
<li>
<p><strong>缺点</strong>：</p>
</li>
<li>编程复杂度高，尤其是在处理大量并发连接时，需要考虑各种异常情况。</li>
<li>在一些特定场景下，性能可能不如直接使用线程或进程模型。</li>
</ul>
<h3 id="6_3">6. 总结</h3>
<p>I/O 多路复用是现代高性能服务器中不可或缺的一项技术。通过 <code>select</code>、<code>poll</code> 和 <code>epoll</code> 等机制，应用程序可以高效地处理多个 I/O 通道的并发操作。这些机制各有优缺点，开发者应根据具体的应用场景选择合适的 I/O 多路复用技术，以提高系统的并发能力和性能。</p>
<h2 id="python_1">五、python命令</h2>
<p>Python 命令行选项提供了多种功能，可以帮助你控制 Python 解释器的行为、执行特定的任务或进行调试。以下是常见的 Python 命令行选项的详细解释：</p>
<h3 id="1-c-command">1. <code>-c command</code></h3>
<ul>
<li><strong>作用</strong>：直接执行字符串中的 Python 代码。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -c "print('Hello, World!')"</code></p>
<p>这将直接输出 <code>Hello, World!</code>。</p>
<h3 id="2-m-module-name">2. <code>-m module-name</code></h3>
<ul>
<li><strong>作用</strong>：以脚本的方式运行指定的模块。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -m http.server</code></p>
<p>这将在当前目录下启动一个简单的 HTTP 服务器。</p>
<h3 id="3-v-version">3. <code>-V</code> 或 <code>--version</code></h3>
<ul>
<li><strong>作用</strong>：显示 Python 版本信息并退出。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -V</code></p>
<p>这将输出 Python 的版本号，例如 <code>Python 3.9.1</code>。</p>
<h3 id="4-v">4. <code>-v</code></h3>
<ul>
<li><strong>作用</strong>：详细模式，输出更详细的导入信息和其他调试信息。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -v script.py</code></p>
<p>这将运行 <code>script.py</code>，并输出模块导入的详细信息。</p>
<h3 id="5-o">5. <code>-O</code></h3>
<ul>
<li><strong>作用</strong>：以优化模式运行，移除断言语句并生成优化的字节码文件（<code>.pyo</code>）。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -O script.py</code></p>
<p>这将以优化模式运行 <code>script.py</code>。</p>
<h3 id="6-oo">6. <code>-OO</code></h3>
<ul>
<li><strong>作用</strong>：进一步优化，移除断言语句和 <code>__doc__</code> 文档字符串。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -OO script.py</code></p>
<p>这将移除所有断言和文档字符串，并运行 <code>script.py</code>。</p>
<h3 id="7-b">7. <code>-B</code></h3>
<ul>
<li><strong>作用</strong>：禁止生成 <code>.pyc</code> 文件（编译的字节码文件）。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -B script.py</code></p>
<p>这将运行 <code>script.py</code>，但不会生成 <code>.pyc</code> 文件。</p>
<h3 id="8-e">8. <code>-E</code></h3>
<ul>
<li><strong>作用</strong>：忽略所有与环境变量有关的设置，如 <code>PYTHONPATH</code>。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -E script.py</code></p>
<p>这将忽略所有 Python 相关的环境变量并运行 <code>script.py</code>。</p>
<h3 id="9-s">9. <code>-s</code></h3>
<ul>
<li><strong>作用</strong>：在启动时忽略用户的 <code>site-packages</code> 目录。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -s script.py</code></p>
<p>这将忽略 <code>site-packages</code> 中的内容并运行 <code>script.py</code>。</p>
<h3 id="10-s">10. <code>-S</code></h3>
<ul>
<li><strong>作用</strong>：启动时不自动导入 <code>site</code> 模块，这可以减少启动时间。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -S script.py</code></p>
<p>这将不导入 <code>site</code> 模块，并运行 <code>script.py</code>。</p>
<h3 id="11-u">11. <code>-u</code></h3>
<ul>
<li><strong>作用</strong>：强制输入输出流使用非缓冲模式，主要用于实时日志输出。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -u script.py</code></p>
<p>这将以非缓冲模式运行 <code>script.py</code>。</p>
<h3 id="12-i">12. <code>-i</code></h3>
<ul>
<li><strong>作用</strong>：在脚本执行完毕后，进入交互式解释器。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -i script.py</code></p>
<p>这将运行 <code>script.py</code>，执行完毕后进入 Python 交互模式。</p>
<h3 id="13-t">13. <code>-t</code></h3>
<ul>
<li><strong>作用</strong>：发出关于缩进混用的警告，使用两次 <code>-t</code> 则会将这些警告作为错误处理。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -t script.py</code></p>
<p>如果代码中有混合使用空格和制表符的情况，将会发出警告。</p>
<h3 id="14-x">14. <code>-x</code></h3>
<ul>
<li><strong>作用</strong>：跳过脚本文件的第一行（用于处理包含 Unix shebang 的脚本）。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -x script.py</code></p>
<p>这将跳过 <code>script.py</code> 的第一行并继续执行。</p>
<h3 id="15-help-h">15. <code>--help</code> 或 <code>-h</code></h3>
<ul>
<li><strong>作用</strong>：显示 Python 命令行选项的帮助信息并退出。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python --help</code></p>
<p>这将列出所有 Python 命令行选项及其简要说明。</p>
<h3 id="16-w">16. <code>-W</code></h3>
<ul>
<li><strong>作用</strong>：控制警告的显示，可以设置忽略、默认、错误、一次性、总是等不同级别。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -W ignore script.py</code></p>
<p>这将运行 <code>script.py</code> 并忽略所有警告。</p>
<h3 id="17-r">17. <code>-R</code></h3>
<ul>
<li><strong>作用</strong>：启用哈希随机化功能，用于安全目的，防止特定类型的攻击。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -R script.py</code></p>
<p>这将启用哈希随机化并运行 <code>script.py</code>。</p>
<h3 id="18-q">18. <code>-Q</code></h3>
<ul>
<li><strong>作用</strong>：控制 <code>/</code> 运算符的整数除法行为。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -Qnew script.py</code></p>
<p>强制 <code>/</code> 使用真正的除法，即使是在 Python 2.x 中。</p>
<h3 id="19-x">19. <code>-X</code></h3>
<ul>
<li><strong>作用</strong>：设置特定的实现选项，如 <code>-X faulthandler</code> 用于启用故障处理程序。</li>
<li><strong>示例</strong>：</li>
</ul>
<p><code>bash
  python -X faulthandler script.py</code></p>
<p>这将启用故障处理程序并运行 <code>script.py</code>。</p>
<h3 id="_28">总结</h3>
<p>通过这些命令行选项，你可以更灵活地控制 Python 解释器的行为，从而适应不同的开发和调试场景。熟悉这些选项可以帮助你更高效地编写、调试和运行 Python 代码。</p>
<h2 id="python_2">python 自定义包</h2>
<p>以下是一个关于如何创建并发布 Python 自定义包的详细示例。</p>
<h3 id="1_4">1. <strong>准备项目结构</strong></h3>
<p>假设我们创建一个名为 <code>simplemath</code> 的 Python 包，提供一些简单的数学运算功能。项目的目录结构如下：</p>
<div class="codehilite"><pre><span></span><code>simplemath/
│
├──<span class="w"> </span>simplemath/
│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>├──<span class="w"> </span>addition.py
│<span class="w">   </span>└──<span class="w"> </span>subtraction.py
│
├──<span class="w"> </span>tests/
│<span class="w">   </span>├──<span class="w"> </span>__init__.py
│<span class="w">   </span>└──<span class="w"> </span>test_operations.py
│
├──<span class="w"> </span>LICENSE
├──<span class="w"> </span>README.md
└──<span class="w"> </span>setup.py
</code></pre></div>

<h3 id="2_4">2. <strong>编写代码</strong></h3>
<p>在 <code>simplemath/simplemath/</code> 目录下，我们分别创建 <code>addition.py</code> 和 <code>subtraction.py</code>，用于实现加法和减法功能。</p>
<h4 id="additionpy"><code>addition.py</code></h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</code></pre></div>

<h4 id="subtractionpy"><code>subtraction.py</code></h4>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">subtract</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
</code></pre></div>

<p>在 <code>__init__.py</code> 中，导入这些模块，以便包的用户可以直接使用它们：</p>
<h4 id="__init__py"><code>__init__.py</code></h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">.addition</span> <span class="kn">import</span> <span class="n">add</span>
<span class="kn">from</span> <span class="nn">.subtraction</span> <span class="kn">import</span> <span class="n">subtract</span>
</code></pre></div>

<h3 id="3_6">3. <strong>编写测试</strong></h3>
<p>在 <code>tests/</code> 目录下，编写测试代码，确保我们的功能正常运行。</p>
<h4 id="test_operationspy"><code>test_operations.py</code></h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">simplemath</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">subtract</span>

<span class="k">class</span> <span class="nc">TestSimpleMath</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_subtract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>

<h3 id="4-setuppy">4. <strong>编写 <code>setup.py</code> 文件</strong></h3>
<p>在项目根目录下创建 <code>setup.py</code> 文件，配置包的元数据。</p>
<h4 id="setuppy"><code>setup.py</code></h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simplemath&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s2">&quot;Your Name&quot;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s2">&quot;your.email@example.com&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A simple math operations package&quot;</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;README.md&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s2">&quot;text/markdown&quot;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/yourusername/simplemath&quot;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Programming Language :: Python :: 3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;License :: OSI Approved :: MIT License&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Operating System :: OS Independent&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">python_requires</span><span class="o">=</span><span class="s1">&#39;&gt;=3.6&#39;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

<h3 id="5-readmemd">5. <strong>编写 <code>README.md</code> 文件</strong></h3>
<p>在 <code>README.md</code> 文件中介绍包的功能和用法。</p>
<h4 id="readmemd"><code>README.md</code></h4>
<div class="codehilite"><pre><span></span><code><span class="gh"># SimpleMath</span>

SimpleMath is a Python package that provides basic math operations like addition and subtraction.

<span class="gu">## Installation</span>

You can install this package via pip:

```bash
pip install simplemath
</code></pre></div>

<h2 id="usage">Usage</h2>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">simplemath</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">subtract</span>

<span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>        <span class="c1"># Output: 7</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Output: 5</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="c1">### 6. **编写 LICENSE 文件**</span>
<span class="n">选择一个开源许可证，比如</span><span class="w"> </span><span class="n">MIT</span><span class="w"> </span><span class="n">License，并将其内容放入</span><span class="w"> </span><span class="n n-Quoted">`LICENSE`</span><span class="w"> </span><span class="n">文件中。</span>

<span class="c1">#### `LICENSE`</span>
<span class="n n-Quoted">`</span><span class="n n-Quoted n-Quoted-Escape">``</span><span class="n n-Quoted">text</span>
<span class="n n-Quoted">MIT License</span>

<span class="n n-Quoted">Copyright (c) 2024 Your Name</span>

<span class="n n-Quoted">Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="n n-Quoted">...</span>
</code></pre></div>

<h3 id="7_1">7. <strong>打包和发布</strong></h3>
<p>在打包之前，确保 <code>setuptools</code> 和 <code>wheel</code> 已安装：</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>setuptools<span class="w"> </span>wheel
</code></pre></div>

<p>在项目根目录下运行以下命令打包：</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>setup.py<span class="w"> </span>sdist<span class="w"> </span>bdist_wheel
</code></pre></div>

<p>这将在 <code>dist/</code> 目录中生成 <code>.tar.gz</code> 和 <code>.whl</code> 文件。</p>
<h3 id="8-pypi">8. <strong>上传到 PyPI</strong></h3>
<p>使用 <code>twine</code> 上传包到 PyPI：</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>twine
twine<span class="w"> </span>upload<span class="w"> </span>dist/*
</code></pre></div>

<p>上传成功后，其他用户就可以通过 <code>pip install simplemath</code> 来安装并使用你的包了。</p>
<h3 id="9">9. <strong>验证安装</strong></h3>
<p>可以在虚拟环境中验证包的安装：</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>simplemath
</code></pre></div>

<p>然后测试包的功能：</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">simplemath</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">subtract</span>

<span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>        <span class="c1"># Output: 7</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subtract</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Output: 5</span>
</code></pre></div>

<h3 id="10">10. <strong>更新包</strong></h3>
<p>如果需要更新包，修改代码后更新 <code>setup.py</code> 中的版本号，然后重新打包并上传即可。</p>
<p>通过这个例子，你应该能够理解如何创建、打包并发布一个 Python 自定义包。</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "toc.integrate", "search.highlight", "search.suggest", "header.autohide", "footer.copyright", "footer.text", "code.annotate", "content.code", "material.nav", "material.switch", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>