
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IT 手册整理">
      
      
        <meta name="author" content="hlh">
      
      
      
        <link rel="prev" href="../../FastAPI/interview/">
      
      
        <link rel="next" href="../basic/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Flask 进阶教程 - IT-手册</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flask" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="IT-手册" class="md-header__button md-logo" aria-label="IT-手册" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IT-手册
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flask 进阶教程
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="IT-手册" class="md-nav__button md-logo" aria-label="IT-手册" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    IT-手册
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IT-手册大全
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Web篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Web篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Django
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django 开发中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/restful/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Django RESTful
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    FastAPI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            FastAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FastAPI/advance./" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FastAPI/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FastAPI/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FastAPI 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flask
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Flask
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Flask 进阶教程
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Flask 进阶教程
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 应用配置与环境管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 应用配置与环境管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置文件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      2. 蓝图（Blueprint）与模块化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 蓝图（Blueprint）与模块化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：使用蓝图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      3. 数据库迁移（Flask-Migrate）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 数据库迁移（Flask-Migrate）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Migrate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-jwt-flask-jwt-extended" class="md-nav__link">
    <span class="md-ellipsis">
      4. JWT 身份认证（Flask-JWT-Extended）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. JWT 身份认证（Flask-JWT-Extended）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-jwt-extended" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-JWT-Extended
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-flask" class="md-nav__link">
    <span class="md-ellipsis">
      5. 异步处理与 Flask
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 异步处理与 Flask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      示例：异步视图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-flask" class="md-nav__link">
    <span class="md-ellipsis">
      6. Flask 文件上传和处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Flask 文件上传和处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      文件上传示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-request-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      7. 请求钩子（Request Hooks）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 请求钩子（Request Hooks）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      示例：请求钩子
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-flask" class="md-nav__link">
    <span class="md-ellipsis">
      8. 部署 Flask 应用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. 部署 Flask 应用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gunicorn" class="md-nav__link">
    <span class="md-ellipsis">
      部署到生产环境（使用 Gunicorn）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      部署到 Docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-flask" class="md-nav__link">
    <span class="md-ellipsis">
      9. Flask 扩展生态
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-flask" class="md-nav__link">
    <span class="md-ellipsis">
      10. Flask 中间件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Flask 中间件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      示例：自定义中间件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-flask-flask-wtf" class="md-nav__link">
    <span class="md-ellipsis">
      11. Flask 表单处理（Flask-WTF）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Flask 表单处理（Flask-WTF）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-wtf" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-WTF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-flask-websocketflask-socketio" class="md-nav__link">
    <span class="md-ellipsis">
      12. Flask 与 WebSocket（Flask-SocketIO）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="12. Flask 与 WebSocket（Flask-SocketIO）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-socketio" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-SocketIO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-celery" class="md-nav__link">
    <span class="md-ellipsis">
      13. 使用 Celery 实现异步任务队列
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13. 使用 Celery 实现异步任务队列">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#celery" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Celery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-celery" class="md-nav__link">
    <span class="md-ellipsis">
      配置 Flask 和 Celery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14-flask" class="md-nav__link">
    <span class="md-ellipsis">
      14. Flask 单元测试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="14. Flask 单元测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#15-flask-admin" class="md-nav__link">
    <span class="md-ellipsis">
      15. 使用 Flask-Admin 构建后台管理系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15. 使用 Flask-Admin 构建后台管理系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-admin" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      示例：创建简单的后台管理系统
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#16-flask" class="md-nav__link">
    <span class="md-ellipsis">
      16. Flask 安全性提升
    </span>
  </a>
  
    <nav class="md-nav" aria-label="16. Flask 安全性提升">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-csrf" class="md-nav__link">
    <span class="md-ellipsis">
      1. CSRF 保护
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 密码加密与验证
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-https" class="md-nav__link">
    <span class="md-ellipsis">
      3. 使用 HTTPS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#17-flask-graphql-flask-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      17. Flask 与 GraphQL 集成（Flask-GraphQL）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="17. Flask 与 GraphQL 集成（Flask-GraphQL）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-graphql" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-GraphQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#18-flask" class="md-nav__link">
    <span class="md-ellipsis">
      18. 扩展 Flask 的日志功能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="18. 扩展 Flask 的日志功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置日志
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#19-flask-flask-caching" class="md-nav__link">
    <span class="md-ellipsis">
      19. 使用 Flask 缓存（Flask-Caching）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="19. 使用 Flask 缓存（Flask-Caching）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-caching" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      示例：缓存视图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#20-flask-mail" class="md-nav__link">
    <span class="md-ellipsis">
      20. 使用 Flask-Mail 发送电子邮件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="20. 使用 Flask-Mail 发送电子邮件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-mail" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Mail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21-flask-redis" class="md-nav__link">
    <span class="md-ellipsis">
      21. Flask 与 Redis 集成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="21. Flask 与 Redis 集成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis-flask-redis" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Redis 和 Flask-Redis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-redis" class="md-nav__link">
    <span class="md-ellipsis">
      示例：Flask 与 Redis 集成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      22. 使用 Flask-Migrate 进行数据库迁移
    </span>
  </a>
  
    <nav class="md-nav" aria-label="22. 使用 Flask-Migrate 进行数据库迁移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-migrate_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Migrate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-flask-restful-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      23. 使用 Flask-RESTful 构建 REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="23. 使用 Flask-RESTful 构建 REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-restful" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-RESTful
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#24-flask" class="md-nav__link">
    <span class="md-ellipsis">
      24. Flask 环境变量管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="24. Flask 环境变量管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-dotenv" class="md-nav__link">
    <span class="md-ellipsis">
      安装 python-dotenv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-flask-jwt-extended-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      25. 使用 Flask-JWT-Extended 进行 JWT 身份验证
    </span>
  </a>
  
    <nav class="md-nav" aria-label="25. 使用 Flask-JWT-Extended 进行 JWT 身份验证">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-jwt-extended_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-JWT-Extended
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-flask" class="md-nav__link">
    <span class="md-ellipsis">
      26. Flask 自定义错误处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="26. Flask 自定义错误处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#404" class="md-nav__link">
    <span class="md-ellipsis">
      示例：自定义 404 错误页面
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      示例：自定义 API 错误响应
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-flask-limiter" class="md-nav__link">
    <span class="md-ellipsis">
      27. 使用 Flask-Limiter 实现速率限制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="27. 使用 Flask-Limiter 实现速率限制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-limiter" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Limiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-flask-sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      28. 使用 Flask-SQLAlchemy 实现多数据库支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="28. 使用 Flask-SQLAlchemy 实现多数据库支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      示例：多数据库配置
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#29-flask-celery" class="md-nav__link">
    <span class="md-ellipsis">
      29. Flask-Celery 实现异步任务队列
    </span>
  </a>
  
    <nav class="md-nav" aria-label="29. Flask-Celery 实现异步任务队列">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#celery_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Celery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-celery_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：Flask 与 Celery 集成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#30-flask-socketio" class="md-nav__link">
    <span class="md-ellipsis">
      30. 使用 Flask-SocketIO 实现实时通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="30. 使用 Flask-SocketIO 实现实时通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-socketio_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-SocketIO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#31-flask-api-api" class="md-nav__link">
    <span class="md-ellipsis">
      31. Flask 与外部 API 集成（例如使用第三方 API）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="31. Flask 与外部 API 集成（例如使用第三方 API）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requests" class="md-nav__link">
    <span class="md-ellipsis">
      安装 requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-api" class="md-nav__link">
    <span class="md-ellipsis">
      示例：与 GitHub API 集成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32-flask-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      32. 使用 Flask-Uploads 管理文件上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="32. 使用 Flask-Uploads 管理文件上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#33-flask-principal" class="md-nav__link">
    <span class="md-ellipsis">
      33. 使用 Flask-Principal 实现角色与权限管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="33. 使用 Flask-Principal 实现角色与权限管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-principal" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Principal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#34-flask-restplus-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      34. 使用 Flask-RESTPlus 构建文档化的 REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="34. 使用 Flask-RESTPlus 构建文档化的 REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-restplus" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-RESTPlus
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#35-flask-seasurf-csrf" class="md-nav__link">
    <span class="md-ellipsis">
      35. 使用 Flask-SeaSurf 提供 CSRF 保护
    </span>
  </a>
  
    <nav class="md-nav" aria-label="35. 使用 Flask-SeaSurf 提供 CSRF 保护">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-seasurf" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-SeaSurf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#36-flask-caching" class="md-nav__link">
    <span class="md-ellipsis">
      36. 使用 Flask-Caching 实现缓存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="36. 使用 Flask-Caching 实现缓存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-caching_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-caching_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Caching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#37-flask-admin" class="md-nav__link">
    <span class="md-ellipsis">
      37. 使用 Flask-Admin 创建后台管理界面
    </span>
  </a>
  
    <nav class="md-nav" aria-label="37. 使用 Flask-Admin 创建后台管理界面">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-admin_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-admin_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Admin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#38-flask-security" class="md-nav__link">
    <span class="md-ellipsis">
      38. 使用 Flask-Security 实现用户认证和授权
    </span>
  </a>
  
    <nav class="md-nav" aria-label="38. 使用 Flask-Security 实现用户认证和授权">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-security" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-security_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Security
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#39-flask-mail" class="md-nav__link">
    <span class="md-ellipsis">
      39. 使用 Flask-Mail 发送电子邮件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="39. 使用 Flask-Mail 发送电子邮件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-mail_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Mail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-mail_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Mail
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#40-flask-jinja2" class="md-nav__link">
    <span class="md-ellipsis">
      40. 使用 Flask-Jinja2 进行模板继承和宏
    </span>
  </a>
  
    <nav class="md-nav" aria-label="40. 使用 Flask-Jinja2 进行模板继承和宏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      示例：模板继承
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#41-flask-socketio-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      41. 使用 Flask-SocketIO 处理 WebSocket 连接
    </span>
  </a>
  
    <nav class="md-nav" aria-label="41. 使用 Flask-SocketIO 处理 WebSocket 连接">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#websocket" class="md-nav__link">
    <span class="md-ellipsis">
      示例：处理 WebSocket 事件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-flask-admin" class="md-nav__link">
    <span class="md-ellipsis">
      42. 使用 Flask-Admin 实现表单处理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="42. 使用 Flask-Admin 实现表单处理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置表单处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-flask-sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      43. 使用 Flask-SQLAlchemy 实现数据库关系
    </span>
  </a>
  
    <nav class="md-nav" aria-label="43. 使用 Flask-SQLAlchemy 实现数据库关系">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      示例：一对多关系
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44-flask-babel" class="md-nav__link">
    <span class="md-ellipsis">
      44. 使用 Flask-Babel 实现国际化和本地化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="44. 使用 Flask-Babel 实现国际化和本地化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-babel" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Babel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-babel_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Babel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45-flask-restful-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      45. 使用 Flask-RESTful 实现 REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="45. 使用 Flask-RESTful 实现 REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-restful_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-RESTful
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      示例：创建 REST API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#46-flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      46. 使用 Flask-Migrate 实现数据库迁移
    </span>
  </a>
  
    <nav class="md-nav" aria-label="46. 使用 Flask-Migrate 实现数据库迁移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-migrate_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Migrate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-migrate_3" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Migrate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#47-flask-restplus-api" class="md-nav__link">
    <span class="md-ellipsis">
      47. 使用 Flask-RESTPlus 进行 API 文档自动生成
    </span>
  </a>
  
    <nav class="md-nav" aria-label="47. 使用 Flask-RESTPlus 进行 API 文档自动生成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：创建 API 并生成文档
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#48-flask-cache" class="md-nav__link">
    <span class="md-ellipsis">
      48. 使用 Flask-Cache 实现更高级的缓存策略
    </span>
  </a>
  
    <nav class="md-nav" aria-label="48. 使用 Flask-Cache 实现更高级的缓存策略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-cache" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Cache
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#49-flask-bootstrap-bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      49. 使用 Flask-Bootstrap 集成 Bootstrap 前端框架
    </span>
  </a>
  
    <nav class="md-nav" aria-label="49. 使用 Flask-Bootstrap 集成 Bootstrap 前端框架">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Bootstrap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      示例：集成 Bootstrap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50-flask-testing" class="md-nav__link">
    <span class="md-ellipsis">
      50. 使用 Flask-Testing 进行单元测试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="50. 使用 Flask-Testing 进行单元测试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-testing" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      示例：编写测试用例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#51-flask-mail" class="md-nav__link">
    <span class="md-ellipsis">
      51. 使用 Flask-Mail 进行模板化电子邮件
    </span>
  </a>
  
    <nav class="md-nav" aria-label="51. 使用 Flask-Mail 进行模板化电子邮件">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      示例：发送模板化电子邮件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#52-flask-principal" class="md-nav__link">
    <span class="md-ellipsis">
      52. 使用 Flask-Principal 实现多角色权限控制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="52. 使用 Flask-Principal 实现多角色权限控制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置多角色权限
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#53-flask-sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      53. 使用 Flask-SQLAlchemy 处理复杂查询
    </span>
  </a>
  
    <nav class="md-nav" aria-label="53. 使用 Flask-SQLAlchemy 处理复杂查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      示例：复杂查询
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#54-flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      54. 使用 Flask-Migrate 实现复杂数据库迁移
    </span>
  </a>
  
    <nav class="md-nav" aria-label="54. 使用 Flask-Migrate 实现复杂数据库迁移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      示例：复杂迁移操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#55-flask-babel" class="md-nav__link">
    <span class="md-ellipsis">
      55. 使用 Flask-Babel 实现多语言支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="55. 使用 Flask-Babel 实现多语言支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      示例：实现多语言支持
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#56-flask-user" class="md-nav__link">
    <span class="md-ellipsis">
      56. 使用 Flask-User 实现用户认证和管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="56. 使用 Flask-User 实现用户认证和管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-user" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-User
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-user_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#57-flask-socketio-websocket" class="md-nav__link">
    <span class="md-ellipsis">
      57. 使用 Flask-SocketIO 实现 WebSocket
    </span>
  </a>
  
    <nav class="md-nav" aria-label="57. 使用 Flask-SocketIO 实现 WebSocket">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-socketio_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-SocketIO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-socketio_3" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-SocketIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#58-flask-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      58. 使用 Flask-Uploads 管理文件上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="58. 使用 Flask-Uploads 管理文件上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-uploads_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-uploads_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Uploads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#59-flask-security" class="md-nav__link">
    <span class="md-ellipsis">
      59. 使用 Flask-Security 实现安全功能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="59. 使用 Flask-Security 实现安全功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-security_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-security_3" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Security
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#60-flask-caching" class="md-nav__link">
    <span class="md-ellipsis">
      60. 使用 Flask-Caching 实现缓存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="60. 使用 Flask-Caching 实现缓存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-caching_3" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flask-caching_4" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 Flask-Caching
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#61-flask-restplus-api" class="md-nav__link">
    <span class="md-ellipsis">
      61. 使用 Flask-RESTPlus 进行 API 版本管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="61. 使用 Flask-RESTPlus 进行 API 版本管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：API 版本管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#62-flask-jwt-extended-jwt" class="md-nav__link">
    <span class="md-ellipsis">
      62. 使用 Flask-JWT-Extended 实现 JWT 认证
    </span>
  </a>
  
    <nav class="md-nav" aria-label="62. 使用 Flask-JWT-Extended 实现 JWT 认证">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-jwt-extended_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-JWT-Extended
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwt" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 JWT 认证
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#63-flask-session" class="md-nav__link">
    <span class="md-ellipsis">
      63. 使用 Flask-Session 实现服务器端会话存储
    </span>
  </a>
  
    <nav class="md-nav" aria-label="63. 使用 Flask-Session 实现服务器端会话存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-session" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置服务器端会话
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#64-flask-accepts" class="md-nav__link">
    <span class="md-ellipsis">
      64. 使用 Flask-Accepts 实现请求内容协商
    </span>
  </a>
  
    <nav class="md-nav" aria-label="64. 使用 Flask-Accepts 实现请求内容协商">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-accepts" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Accepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      示例：实现内容协商
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#65-flask-restx-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      65. 使用 Flask-RESTX 实现 REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="65. 使用 Flask-RESTX 实现 REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-restx" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-RESTX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-api_1" class="md-nav__link">
    <span class="md-ellipsis">
      示例：创建 REST API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#66-flask-sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      66. 使用 Flask-SQLAlchemy 进行复杂模型关系
    </span>
  </a>
  
    <nav class="md-nav" aria-label="66. 使用 Flask-SQLAlchemy 进行复杂模型关系">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      示例：定义复杂模型关系
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#67-flask-restful-restful-api" class="md-nav__link">
    <span class="md-ellipsis">
      67. 使用 Flask-RESTful 实现 RESTful API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="67. 使用 Flask-RESTful 实现 RESTful API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-restful_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-RESTful
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restful-api" class="md-nav__link">
    <span class="md-ellipsis">
      示例：构建 RESTful API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#68-flask-mail" class="md-nav__link">
    <span class="md-ellipsis">
      68. 使用 Flask-Mail 实现邮件发送功能
    </span>
  </a>
  
    <nav class="md-nav" aria-label="68. 使用 Flask-Mail 实现邮件发送功能">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-mail_3" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Mail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      示例：发送邮件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#69-flask-admin" class="md-nav__link">
    <span class="md-ellipsis">
      69. 使用 Flask-Admin 实现管理界面
    </span>
  </a>
  
    <nav class="md-nav" aria-label="69. 使用 Flask-Admin 实现管理界面">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-admin_3" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Admin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      示例：创建管理界面
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#70-flask-debugtoolbar" class="md-nav__link">
    <span class="md-ellipsis">
      70. 使用 Flask-DebugToolbar 进行调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="70. 使用 Flask-DebugToolbar 进行调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-debugtoolbar" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-DebugToolbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置调试工具栏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#71-flask-babel" class="md-nav__link">
    <span class="md-ellipsis">
      71. 使用 Flask-Babel 实现多语言支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="71. 使用 Flask-Babel 实现多语言支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-babel_2" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Babel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置多语言支持
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#72-flask-principal" class="md-nav__link">
    <span class="md-ellipsis">
      72. 使用 Flask-Principal 实现角色和权限管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="72. 使用 Flask-Principal 实现角色和权限管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-principal_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Principal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置角色和权限管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#73-flask-restful-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      73. 使用 Flask-RESTful 构建 REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="73. 使用 Flask-RESTful 构建 REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rest-api_2" class="md-nav__link">
    <span class="md-ellipsis">
      示例：构建 REST API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#74-flask-cache" class="md-nav__link">
    <span class="md-ellipsis">
      74. 使用 Flask-Cache 实现缓存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="74. 使用 Flask-Cache 实现缓存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-cache_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置缓存
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#75-flask-sqlalchemy" class="md-nav__link">
    <span class="md-ellipsis">
      75. 使用 Flask-SQLAlchemy 进行数据模型管理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="75. 使用 Flask-SQLAlchemy 进行数据模型管理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      示例：定义和操作数据模型
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#76-flask-uploads" class="md-nav__link">
    <span class="md-ellipsis">
      76. 使用 Flask-Uploads 管理文件上传
    </span>
  </a>
  
    <nav class="md-nav" aria-label="76. 使用 Flask-Uploads 管理文件上传">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-uploads_3" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Uploads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置文件上传
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#77-flask-httpauth" class="md-nav__link">
    <span class="md-ellipsis">
      77. 使用 Flask-HTTPAuth 实现认证
    </span>
  </a>
  
    <nav class="md-nav" aria-label="77. 使用 Flask-HTTPAuth 实现认证">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-httpauth" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-HTTPAuth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 HTTP 认证
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#78-flask-migrate" class="md-nav__link">
    <span class="md-ellipsis">
      78. 使用 Flask-Migrate 进行数据库迁移
    </span>
  </a>
  
    <nav class="md-nav" aria-label="78. 使用 Flask-Migrate 进行数据库迁移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-migrate_4" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Migrate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置数据库迁移
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#79-flask-cors" class="md-nav__link">
    <span class="md-ellipsis">
      79. 使用 Flask-Cors 处理跨域请求
    </span>
  </a>
  
    <nav class="md-nav" aria-label="79. 使用 Flask-Cors 处理跨域请求">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-cors" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-Cors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cors" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置 CORS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#80-flask-debugtoolbar" class="md-nav__link">
    <span class="md-ellipsis">
      80. 使用 Flask-DebugToolbar 进行调试
    </span>
  </a>
  
    <nav class="md-nav" aria-label="80. 使用 Flask-DebugToolbar 进行调试">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flask-debugtoolbar_1" class="md-nav__link">
    <span class="md-ellipsis">
      安装 Flask-DebugToolbar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      示例：配置调试工具栏
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flask 工作中常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    中间件
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            中间件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kafka
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Kafka
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kafka 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kafka 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rabbitmq
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Rabbitmq
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Zookeeper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Zookeeper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/zookeeper/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zookeeper 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%AD%E9%97%B4%E4%BB%B6/zookeeper/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    zookeeper 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    云原生
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            云原生
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/docker/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker-基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/docker/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker 面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/crictl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crictl 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 包管理工具 helm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes 监控平台和日志管理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    人工智能
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大语言模型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            大语言模型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    机器学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            机器学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    深度学习
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            深度学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    工具篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            工具篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%B7%A5%E5%85%B7%E7%AF%87/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git 命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%B7%A5%E5%85%B7%E7%AF%87/jenkins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jenkins 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    数据库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            数据库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Elastic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            Elastic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElastciSearch 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 基本教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Elastic/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ElasticSearch 工作中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            MongoDB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB 工作中遇到的问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MySQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            MySQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 面试题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL 常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Redis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Redis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/questions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis 工作中常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    数据结构和算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            数据结构和算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/leetcode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LeetCode 题目
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/struct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    服务器
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            服务器
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nginx 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Uvicorn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Uvicorn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9C%8D%E5%8A%A1%E5%99%A8/uvicorn/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    uvicorn 教程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  <span class="md-ellipsis">
    计算机基础
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            计算机基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http 手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机网络面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    操作系统面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/websocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Websocket
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="">
            
  
  <span class="md-ellipsis">
    语言篇
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            语言篇
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_1" >
        
          
          <label class="md-nav__link" for="__nav_11_1" id="__nav_11_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_1">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/C%2B%2B/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/C%2B%2B/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/C%2B%2B/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 面试手册
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2" >
        
          
          <label class="md-nav__link" for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Golang
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2">
            <span class="md-nav__icon md-icon"></span>
            Golang
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_2_3" >
        
          
          <label class="md-nav__link" for="__nav_11_2_3" id="__nav_11_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_11_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_2_3">
            <span class="md-nav__icon md-icon"></span>
            常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/cobra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cobra
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/encoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/fmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fmt 库
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/gin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/gorm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gorm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/jwt-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jwt go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/logrus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logrus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/net/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    net
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Os
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/pprof/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pprof
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/protobuf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Protobuf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sync
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/testify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/viper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/Golang/%E5%B8%B8%E7%94%A8%E5%BA%93/zap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zap
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3" >
        
          
          <label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/advance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python 进阶教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/basic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python 基础教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python 面试手册
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_3_4" >
        
          
          <label class="md-nav__link" for="__nav_11_3_4" id="__nav_11_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python常用库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_11_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11_3_4">
            <span class="md-nav__icon md-icon"></span>
            Python常用库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/Seaborn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seaborn 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/beautifulsoup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    beautifulsoup 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/celery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    celery 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/datastruct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构和算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/datetime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datetime 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/functools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    functools 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    logging 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/math/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    math 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/matpliot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matpliot 使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/mock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mock 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    numpy 笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    os模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pandas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pandas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pathlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pathlib 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pickle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pickle 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pymysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pymysql 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pytest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pytest 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/pytorch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pytorch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    queue 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/random/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    random 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/re/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    re 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    requests 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/scikit-learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scikit-learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/scipy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scipy 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/scrapy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scrapy 教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/selenium/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    selenium 使用教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/shutil/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shutil 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/sqlalchemy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLALchemy 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/sys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sys 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    time 模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E7%AF%87/python/Python%E5%B8%B8%E7%94%A8%E5%BA%93/urllib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    urllib 模块
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="flask">Flask 进阶教程</h1>
<p>Flask 作为一个轻量级的 Python Web 框架，其灵活性使得它适用于多种场景。为了构建大型、可扩展的应用程序，需要掌握一些进阶技巧和概念。本教程将详细介绍 Flask 的进阶功能，包括应用配置、蓝图（Blueprint）、数据库迁移、JWT 身份认证、异步处理、文件上传和处理、以及部署等内容。</p>
<hr />
<h3 id="1">1. 应用配置与环境管理</h3>
<p>Flask 提供了多种方式来管理应用配置，例如通过配置文件、环境变量等。</p>
<h4 id="_1">配置文件</h4>
<p>你可以将配置项放在一个独立的配置文件中，如 <code>config.py</code>。</p>
<p><strong>示例：config.py</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
    <span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;hard_to_guess_string&#39;</span>
    <span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;sqlite:///app.db&#39;</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">TESTING</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">class</span> <span class="nc">DevelopmentConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">class</span> <span class="nc">TestingConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">TESTING</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">SQLALCHEMY_DATABASE_URI</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///:memory:&#39;</span>

<span class="k">class</span> <span class="nc">ProductionConfig</span><span class="p">(</span><span class="n">Config</span><span class="p">):</span>
    <span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

<p><strong>应用配置：</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">DevelopmentConfig</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">DevelopmentConfig</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>

<hr />
<h3 id="2-blueprint">2. 蓝图（Blueprint）与模块化</h3>
<p>在大型应用中，建议将应用拆分为多个独立的模块，这样可以提高代码的可维护性。<code>Blueprint</code> 是 Flask 提供的用于模块化开发的工具。</p>
<h4 id="_2">示例：使用蓝图</h4>
<ol>
<li><strong>定义蓝图</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1"># blog.py</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Blueprint</span>

<span class="n">blog_bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@blog_bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/posts&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">posts</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;This is the blog posts page&quot;</span>
</code></pre></div>

<ol>
<li><strong>注册蓝图</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="c1"># app.py</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">blog</span> <span class="kn">import</span> <span class="n">blog_bp</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">blog_bp</span><span class="p">,</span> <span class="n">url_prefix</span><span class="o">=</span><span class="s1">&#39;/blog&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Blueprint</code></strong>：用于组织应用的路由和视图逻辑。</li>
<li><strong><code>url_prefix</code></strong>：设置蓝图的 URL 前缀，<code>/blog/posts</code> 将映射到 <code>/posts</code>。</li>
</ul>
<hr />
<h3 id="3-flask-migrate">3. 数据库迁移（Flask-Migrate）</h3>
<p>在应用中，数据库结构经常需要调整。<code>Flask-Migrate</code> 使用 Alembic 进行数据库迁移，帮助你管理数据库版本。</p>
<h4 id="flask-migrate">安装 Flask-Migrate</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Migrate
</code></pre></div>

<h4 id="_3">使用示例</h4>
<ol>
<li><strong>初始化数据库迁移</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_migrate</span> <span class="kn">import</span> <span class="n">Migrate</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///app.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">migrate</span> <span class="o">=</span> <span class="n">Migrate</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">128</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>

<ol>
<li><strong>执行迁移命令</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>flask<span class="w"> </span>db<span class="w"> </span>init
flask<span class="w"> </span>db<span class="w"> </span>migrate<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial migration&quot;</span>
flask<span class="w"> </span>db<span class="w"> </span>upgrade
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>flask db init</code></strong>：初始化迁移目录。</li>
<li><strong><code>flask db migrate</code></strong>：生成迁移文件。</li>
<li><strong><code>flask db upgrade</code></strong>：将迁移应用到数据库。</li>
</ul>
<hr />
<h3 id="4-jwt-flask-jwt-extended">4. JWT 身份认证（Flask-JWT-Extended）</h3>
<p>在需要保护 API 端点时，使用 JWT（JSON Web Token）是一种常见的方式。<code>Flask-JWT-Extended</code> 是 Flask 中用于实现 JWT 的扩展。</p>
<h4 id="flask-jwt-extended">安装 Flask-JWT-Extended</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-JWT-Extended
</code></pre></div>

<h4 id="_4">使用示例</h4>
<ol>
<li><strong>设置 JWT 身份验证</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_jwt_extended</span> <span class="kn">import</span> <span class="n">JWTManager</span><span class="p">,</span> <span class="n">create_access_token</span><span class="p">,</span> <span class="n">jwt_required</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;JWT_SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;super-secret&#39;</span>  <span class="c1"># 更换为真实密钥</span>
<span class="n">jwt</span> <span class="o">=</span> <span class="n">JWTManager</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="c1"># 在真实应用中验证用户凭据</span>
    <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span><span class="n">identity</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;john_doe&#39;</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/protected&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">protected</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;You have access to this protected endpoint&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>create_access_token</code></strong>：生成 JWT 令牌。</li>
<li><strong><code>@jwt_required()</code></strong>：保护路由，只有有效的 JWT 令牌才能访问。</li>
</ul>
<hr />
<h3 id="5-flask">5. 异步处理与 Flask</h3>
<p>从 Flask 2.0 开始，支持异步视图函数，允许在视图中处理异步操作，例如调用异步 I/O 操作。</p>
<h4 id="_5">示例：异步视图</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/async&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">async_view</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;This is an async view&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>async</code> 和 <code>await</code></strong>：用于处理异步任务，如 I/O 操作。</li>
<li><strong>异步支持</strong>：在 Flask 2.0 及更高版本中默认支持异步视图函数。</li>
</ul>
<hr />
<h3 id="6-flask">6. Flask 文件上传和处理</h3>
<p>Flask 提供了对文件上传的支持，你可以通过 <code>request.files</code> 来获取上传的文件，并对其进行处理或存储。</p>
<h4 id="_6">文件上传示例</h4>
<ol>
<li><strong>HTML 文件上传表单</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>File Upload<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;/upload&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;file&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Upload&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ol>
<li><strong>Flask 文件处理</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload_file</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;file&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;No file part&#39;</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;No selected file&#39;</span>
    <span class="n">file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;./uploads/</span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;File uploaded successfully&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<hr />
<h3 id="7-request-hooks">7. 请求钩子（Request Hooks）</h3>
<p>Flask 提供了几个钩子函数，用于在请求的不同阶段执行操作。常用的钩子包括 <code>before_request</code>、<code>after_request</code> 和 <code>teardown_request</code>。</p>
<h4 id="_7">示例：请求钩子</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">request</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">before_request</span>
<span class="k">def</span> <span class="nf">before_request</span><span class="p">():</span>
    <span class="n">g</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;current_user&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before request: </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">after_request</span>
<span class="k">def</span> <span class="nf">after_request</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After request: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>before_request</code></strong>：在每次请求处理之前执行。</li>
<li><strong><code>after_request</code></strong>：在视图函数执行后，但在响应返回之前执行。</li>
<li><strong><code>g</code> 对象</strong>：用于在请求期间存储临时数据。</li>
</ul>
<hr />
<h3 id="8-flask">8. 部署 Flask 应用</h3>
<h4 id="gunicorn">部署到生产环境（使用 Gunicorn）</h4>
<p>Flask 自带的开发服务器不适合用于生产环境。可以使用 <code>Gunicorn</code> 或其他 WSGI 服务器来运行 Flask 应用。</p>
<p><strong>安装 Gunicorn</strong></p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>gunicorn
</code></pre></div>

<p><strong>运行 Flask 应用</strong></p>
<div class="codehilite"><pre><span></span><code>gunicorn<span class="w"> </span>-w<span class="w"> </span><span class="m">4</span><span class="w"> </span>app:app
</code></pre></div>

<ul>
<li><strong><code>-w 4</code></strong>：指定 4 个工作进程以处理请求。</li>
<li><strong><code>app:app</code></strong>：<code>app.py</code> 文件中的 Flask 实例名为 <code>app</code>。</li>
</ul>
<h4 id="docker">部署到 Docker</h4>
<p><strong>Dockerfile 示例</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>/app

<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app:app&quot;</span><span class="p">]</span>
</code></pre></div>

<p><strong>构建并运行 Docker 镜像</strong></p>
<div class="codehilite"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>flask-app<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8000</span>:8000<span class="w"> </span>flask-app
</code></pre></div>

<hr />
<h3 id="9-flask">9. Flask 扩展生态</h3>
<p>Flask 具有丰富的扩展生态，提供了各种功能的插件，以下是几个常用的扩展：</p>
<ul>
<li><strong>Flask-SQLAlchemy</strong>：用于与数据库进行交互的 ORM 工具。</li>
<li><strong>Flask-Migrate</strong>：提供数据库迁移功能。</li>
<li><strong>Flask-Login</strong>：用于用户认证和会话管理。</li>
<li><strong>Flask-JWT-Extended</strong>：用于基于 JWT 的身份认证。</li>
<li><strong>Flask-Caching</strong>：提供缓存支持。</li>
<li><strong>Flask-Mail</strong>：用于发送电子邮件。</li>
</ul>
<hr />
<h3 id="10-flask">10. Flask 中间件</h3>
<p>Flask 支持中间件机制，可以在请求和响应处理过程中拦截并修改请求或响应。中间件可以用于执行日志记录、处理 CORS（跨域资源共享）、进行身份验证等任务。</p>
<h4 id="_8">示例：自定义中间件</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">werkzeug.wrappers</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Response</span>

<span class="k">class</span> <span class="nc">SimpleMiddleware</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
        <span class="c1"># 请求前逻辑</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Middleware before request&quot;</span><span class="p">)</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">environ</span><span class="p">)</span>

        <span class="c1"># 继续处理请求</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>

        <span class="c1"># 请求后逻辑</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Middleware after request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">wsgi_app</span> <span class="o">=</span> <span class="n">SimpleMiddleware</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">wsgi_app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello, Flask with Middleware!&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><code>__call__</code> 方法接收 <code>environ</code> 和 <code>start_response</code>，它是 WSGI 应用的标准调用格式。</li>
<li>中间件可以在请求处理前和响应处理后执行逻辑。</li>
</ul>
<hr />
<h3 id="11-flask-flask-wtf">11. Flask 表单处理（Flask-WTF）</h3>
<p>Flask-WTF 是一个集成了 WTForms 的 Flask 扩展，提供了对表单的处理和 CSRF 保护。</p>
<h4 id="flask-wtf">安装 Flask-WTF</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-WTF
</code></pre></div>

<h4 id="_9">使用示例</h4>
<ol>
<li><strong>创建表单</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask_wtf</span> <span class="kn">import</span> <span class="n">FlaskForm</span>
<span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">SubmitField</span>
<span class="kn">from</span> <span class="nn">wtforms.validators</span> <span class="kn">import</span> <span class="n">DataRequired</span>

<span class="k">class</span> <span class="nc">NameForm</span><span class="p">(</span><span class="n">FlaskForm</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">(</span><span class="s1">&#39;Your Name&#39;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">DataRequired</span><span class="p">()])</span>
    <span class="n">submit</span> <span class="o">=</span> <span class="n">SubmitField</span><span class="p">(</span><span class="s1">&#39;Submit&#39;</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>视图处理表单</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">flash</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">forms</span> <span class="kn">import</span> <span class="n">NameForm</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a_secret_key&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/form&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">form</span><span class="p">():</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">NameForm</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">validate_on_submit</span><span class="p">():</span>
        <span class="n">flash</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello, </span><span class="si">{</span><span class="n">form</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;form.html&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>HTML 模板</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Form Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="p">&gt;</span>
        {{ form.hidden_tag() }}
        {{ form.name.label }} {{ form.name(size=32) }}
        {{ form.submit() }}
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        {% for message in messages %}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>{{ message }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    {% endif %}
    {% endwith %}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>FlaskForm</code></strong>：处理表单数据的基类。</li>
<li><strong><code>validate_on_submit</code></strong>：当表单通过验证后返回 <code>True</code>。</li>
<li><strong><code>flash</code></strong>：显示临时消息。</li>
</ul>
<hr />
<h3 id="12-flask-websocketflask-socketio">12. Flask 与 WebSocket（Flask-SocketIO）</h3>
<p>Flask-SocketIO 是 Flask 的扩展，支持 WebSocket 和实时通信。</p>
<h4 id="flask-socketio">安装 Flask-SocketIO</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-SocketIO
</code></pre></div>

<h4 id="_10">使用示例</h4>
<ol>
<li><strong>WebSocket 服务器</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_socketio</span> <span class="kn">import</span> <span class="n">SocketIO</span><span class="p">,</span> <span class="n">send</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecret&#39;</span>
<span class="n">socketio</span> <span class="o">=</span> <span class="n">SocketIO</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="nd">@socketio</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Message received: &#39;</span> <span class="o">+</span> <span class="n">msg</span><span class="p">)</span>
    <span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">broadcast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">socketio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>前端 WebSocket 客户端</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>WebSocket Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>WebSocket Chat<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messageInput&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;sendMessage()&quot;</span><span class="p">&gt;</span>Send<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;//cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">();</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;messages&quot;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;messageInput&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">            </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SocketIO</code></strong>：集成 WebSocket 的核心对象。</li>
<li><strong><code>@socketio.on('message')</code></strong>：监听 WebSocket 消息事件。</li>
<li><strong>前端 WebSocket 客户端</strong>：通过 <code>io()</code> 连接服务器并发送消息。</li>
</ul>
<hr />
<h3 id="13-celery">13. 使用 Celery 实现异步任务队列</h3>
<p>Flask 和 Celery 可以组合使用，实现异步任务的处理，比如发送电子邮件、执行耗时的计算等。</p>
<h4 id="celery">安装 Celery</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>celery
</code></pre></div>

<h4 id="flask-celery">配置 Flask 和 Celery</h4>
<ol>
<li><strong>初始化 Celery</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_BROKER_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost:6379/0&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_RESULT_BACKEND&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost:6379/0&#39;</span>

<span class="k">def</span> <span class="nf">make_celery</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">celery</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">import_name</span><span class="p">,</span> <span class="n">broker</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_BROKER_URL&#39;</span><span class="p">])</span>
    <span class="n">celery</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">celery</span>

<span class="n">celery</span> <span class="o">=</span> <span class="n">make_celery</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>定义异步任务</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@celery</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="n">email_address</span><span class="p">):</span>
    <span class="c1"># 假设有发送邮件的逻辑</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending email to </span><span class="si">{</span><span class="n">email_address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>在视图中调用异步任务</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send/&lt;email&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
    <span class="n">send_email</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Email will be sent to </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>celery.task</code></strong>：定义一个异步任务。</li>
<li><strong><code>delay()</code></strong>：以异步方式执行任务，而不阻塞主线程。</li>
</ul>
<hr />
<h3 id="14-flask">14. Flask 单元测试</h3>
<p>单元测试是确保应用程序正常工作的关键步骤。Flask 提供了测试客户端，用于模拟请求并测试响应。</p>
<h4 id="_11">使用示例</h4>
<ol>
<li><strong>编写测试</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">app</span>

<span class="k">class</span> <span class="nc">FlaskTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;TESTING&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;Hello, Flask&#39;</span> <span class="ow">in</span> <span class="n">rv</span><span class="o">.</span><span class="n">data</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>

<ol>
<li><strong>运行测试</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>test_app.py
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>setUp</code></strong>：在测试开始前设置测试环境。</li>
<li><strong><code>test_client</code></strong>：创建一个 Flask 测试客户端用于模拟 HTTP 请求。</li>
</ul>
<hr />
<h3 id="15-flask-admin">15. 使用 Flask-Admin 构建后台管理系统</h3>
<p>在一些应用中，需要一个后台管理系统来管理数据或用户。<code>Flask-Admin</code> 是一个快速构建后台管理面板的扩展，它能够自动为你生成增删改查的界面。</p>
<h4 id="flask-admin">安装 Flask-Admin</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Admin
</code></pre></div>

<h4 id="_12">示例：创建简单的后台管理系统</h4>
<ol>
<li><strong>定义模型</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_admin</span> <span class="kn">import</span> <span class="n">Admin</span>
<span class="kn">from</span> <span class="nn">flask_admin.contrib.sqla</span> <span class="kn">import</span> <span class="n">ModelView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///admin_example.db&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecretkey&#39;</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="c1"># 定义模型</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="c1"># 初始化数据库</span>
<span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>

<span class="c1"># 添加 Flask-Admin</span>
<span class="n">admin</span> <span class="o">=</span> <span class="n">Admin</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;MyAdmin&#39;</span><span class="p">,</span> <span class="n">template_mode</span><span class="o">=</span><span class="s1">&#39;bootstrap3&#39;</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ModelView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>访问管理面板</strong></li>
</ol>
<p>启动应用后，访问 <code>http://127.0.0.1:5000/admin</code>，你会看到一个自动生成的后台管理界面，可以对 <code>User</code> 模型进行增删改查操作。</p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Flask-Admin</code></strong>：用于快速生成管理面板。</li>
<li><strong><code>ModelView</code></strong>：为数据库模型提供基础的管理视图。</li>
</ul>
<hr />
<h3 id="16-flask">16. Flask 安全性提升</h3>
<p>在 Web 开发中，安全性是至关重要的，Flask 也提供了一些内置的安全机制。以下是一些关键的安全性方面的实践。</p>
<h4 id="1-csrf">1. CSRF 保护</h4>
<p>跨站请求伪造（CSRF）攻击是一种常见的安全威胁。通过使用 <code>Flask-WTF</code> 提供的 CSRF 保护，你可以避免这种攻击。</p>
<p><strong>启用 CSRF 保护</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_wtf.csrf</span> <span class="kn">import</span> <span class="n">CSRFProtect</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_secret_key&#39;</span>
<span class="n">csrf</span> <span class="o">=</span> <span class="n">CSRFProtect</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<p>在启用 CSRF 后，所有带有表单的 POST 请求必须包含 CSRF 令牌。</p>
<h4 id="2">2. 密码加密与验证</h4>
<p>当存储用户密码时，必须对密码进行加密。可以使用 <code>Werkzeug</code> 提供的 <code>generate_password_hash</code> 和 <code>check_password_hash</code> 方法。</p>
<p><strong>示例：密码加密与验证</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">generate_password_hash</span><span class="p">,</span> <span class="n">check_password_hash</span>

<span class="c1"># 加密密码</span>
<span class="n">hashed_password</span> <span class="o">=</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="s1">&#39;mysecretpassword&#39;</span><span class="p">)</span>

<span class="c1"># 验证密码</span>
<span class="n">check_password_hash</span><span class="p">(</span><span class="n">hashed_password</span><span class="p">,</span> <span class="s1">&#39;mysecretpassword&#39;</span><span class="p">)</span>
</code></pre></div>

<h4 id="3-https">3. 使用 HTTPS</h4>
<p>在生产环境中，所有流量应该通过 HTTPS 进行加密，Flask 支持通过 SSL 来启用 HTTPS。</p>
<p><strong>启用 SSL 示例</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">ssl_context</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;cert.pem&#39;</span><span class="p">,</span> <span class="s1">&#39;key.pem&#39;</span><span class="p">))</span>
</code></pre></div>

<p>通过 <code>ssl_context</code> 参数，你可以指定证书文件和密钥文件，从而启用 HTTPS。</p>
<hr />
<h3 id="17-flask-graphql-flask-graphql">17. Flask 与 GraphQL 集成（Flask-GraphQL）</h3>
<p>GraphQL 是一种灵活的查询语言，能够精确控制前端需要的数据，避免传统 REST API 的一些弊端。<code>Flask-GraphQL</code> 是用于将 GraphQL 与 Flask 集成的扩展。</p>
<h4 id="flask-graphql">安装 Flask-GraphQL</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-GraphQL<span class="w"> </span>graphene
</code></pre></div>

<h4 id="_13">使用示例</h4>
<ol>
<li><strong>定义 GraphQL Schema</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">graphene</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">graphene</span><span class="o">.</span><span class="n">ObjectType</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">graphene</span><span class="o">.</span><span class="n">Int</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">graphene</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Query</span><span class="p">(</span><span class="n">graphene</span><span class="o">.</span><span class="n">ObjectType</span><span class="p">):</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">graphene</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_users</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;John Doe&quot;</span><span class="p">),</span>
            <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Jane Doe&quot;</span><span class="p">)</span>
        <span class="p">]</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">graphene</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">Query</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>集成到 Flask</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_graphql</span> <span class="kn">import</span> <span class="n">GraphQLView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span>
    <span class="s1">&#39;/graphql&#39;</span><span class="p">,</span>
    <span class="n">view_func</span><span class="o">=</span><span class="n">GraphQLView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span>
        <span class="s1">&#39;graphql&#39;</span><span class="p">,</span>
        <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span>
        <span class="n">graphiql</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># 启用 GraphiQL IDE</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p>通过访问 <code>http://127.0.0.1:5000/graphql</code>，可以通过 GraphiQL UI 来发送查询请求。</p>
<p><strong>GraphQL 查询示例</strong></p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="n">users</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">id</span>
<span class="w">    </span><span class="n">name</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<hr />
<h3 id="18-flask">18. 扩展 Flask 的日志功能</h3>
<p>在大型应用中，日志记录是十分重要的，尤其是在调试和跟踪问题时。Flask 提供了基础的日志支持，并且可以通过 Python 的 <code>logging</code> 模块来扩展日志功能。</p>
<h4 id="_14">示例：配置日志</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># 设置日志级别</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;This is an info message&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, Flask logging!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>app.logger</code></strong>：Flask 提供的默认日志记录器，可以记录不同级别的信息。</li>
<li><strong><code>logging.basicConfig</code></strong>：配置日志输出的文件和级别。</li>
</ul>
<p>通过这种方式，可以将日志写入文件，或者配置其他日志处理器，如远程日志服务器、日志轮转等。</p>
<hr />
<h3 id="19-flask-flask-caching">19. 使用 Flask 缓存（Flask-Caching）</h3>
<p>缓存可以大幅提升应用性能，特别是在处理一些频繁访问且计算开销较大的请求时。<code>Flask-Caching</code> 提供了方便的缓存支持。</p>
<h4 id="flask-caching">安装 Flask-Caching</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Caching
</code></pre></div>

<h4 id="_15">示例：缓存视图</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_caching</span> <span class="kn">import</span> <span class="n">Cache</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;simple&#39;</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@cache</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;This is cached for 60 seconds.&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>CACHE_TYPE</code></strong>：配置缓存类型，如 <code>simple</code> 表示使用内存缓存，<code>redis</code> 表示使用 Redis 缓存。</li>
<li><strong><code>@cache.cached(timeout=60)</code></strong>：缓存装饰器，用于缓存视图的响应。</li>
</ul>
<hr />
<h3 id="20-flask-mail">20. 使用 Flask-Mail 发送电子邮件</h3>
<p>在某些应用中，发送电子邮件是常见需求，<code>Flask-Mail</code> 提供了简洁的接口来实现这一功能。</p>
<h4 id="flask-mail">安装 Flask-Mail</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Mail
</code></pre></div>

<h4 id="_16">使用示例</h4>
<ol>
<li><strong>配置 Flask-Mail</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_mail</span> <span class="kn">import</span> <span class="n">Mail</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_SERVER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;smtp.example.com&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PORT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">587</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_TLS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your-email@example.com&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your-password&#39;</span>

<span class="n">mail</span> <span class="o">=</span> <span class="n">Mail</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>发送邮件</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send-mail&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">():</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;your-email@example.com&quot;</span><span class="p">,</span> <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;to@example.com&quot;</span><span class="p">])</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;This is a test email&quot;</span>
    <span class="n">mail</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;Mail sent!&quot;</span>
</code></pre></div>

<p>通过配置 <code>MAIL_SERVER</code>、<code>MAIL_PORT</code> 等参数，Flask 可以通过 SMTP 服务器发送电子邮件。</p>
<hr />
<h3 id="21-flask-redis">21. Flask 与 Redis 集成</h3>
<p>Redis 是一个高性能的键值对存储系统，广泛用于缓存、消息队列和会话管理中。Flask 可以通过 <code>Flask-Redis</code> 扩展与 Redis 进行集成。</p>
<h4 id="redis-flask-redis">安装 Redis 和 Flask-Redis</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>redis<span class="w"> </span>Flask-Redis
</code></pre></div>

<h4 id="flask-redis">示例：Flask 与 Redis 集成</h4>
<ol>
<li><strong>配置 Redis</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_redis</span> <span class="kn">import</span> <span class="n">FlaskRedis</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;REDIS_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;redis://localhost:6379/0&quot;</span>
<span class="n">redis_client</span> <span class="o">=</span> <span class="n">FlaskRedis</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用 Redis 存储和读取数据</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/set/&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">redis_client</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Name set to </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/get&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_name</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">redis_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Name is </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>FlaskRedis</code></strong>：<code>Flask-Redis</code> 提供的 Redis 客户端。</li>
<li><strong><code>redis_client.set</code> 和 <code>redis_client.get</code></strong>：用于设置和获取 Redis 中的键值对。</li>
</ul>
<hr />
<h3 id="22-flask-migrate">22. 使用 Flask-Migrate 进行数据库迁移</h3>
<p>在 Flask 应用开发中，随着数据库结构的变化，数据库迁移是一项非常重要的任务。<code>Flask-Migrate</code> 基于 Alembic，提供了方便的数据库迁移功能。</p>
<h4 id="flask-migrate_1">安装 Flask-Migrate</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Migrate
</code></pre></div>

<h4 id="_17">使用示例</h4>
<ol>
<li><strong>配置 Flask-Migrate</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_migrate</span> <span class="kn">import</span> <span class="n">Migrate</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///migrate_example.db&#39;</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">migrate</span> <span class="o">=</span> <span class="n">Migrate</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建数据库模型</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div>

<ol>
<li>
<p><strong>迁移命令</strong></p>
</li>
<li>
<p>初始化迁移目录：</p>
</li>
</ol>
<p><code>bash
  flask db init</code></p>
<ul>
<li>创建迁移脚本：</li>
</ul>
<p><code>bash
  flask db migrate -m "Initial migration."</code></p>
<ul>
<li>应用迁移：</li>
</ul>
<p><code>bash
  flask db upgrade</code></p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>flask db migrate</code></strong>：生成数据库迁移脚本。</li>
<li><strong><code>flask db upgrade</code></strong>：应用迁移，更新数据库结构。</li>
</ul>
<hr />
<h3 id="23-flask-restful-rest-api">23. 使用 Flask-RESTful 构建 REST API</h3>
<p>Flask-RESTful 是用于构建 REST API 的 Flask 扩展，简化了 API 资源定义和路由处理。</p>
<h4 id="flask-restful">安装 Flask-RESTful</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-RESTful
</code></pre></div>

<h4 id="_18">使用示例</h4>
<ol>
<li><strong>创建 API</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">Api</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Hello, World!&#39;</span><span class="p">}</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">HelloWorld</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>扩展 API</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;user_id&#39;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">}</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="s1">&#39;/user/&lt;int:user_id&gt;&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Resource</code></strong>：每个 API 资源类继承自 <code>Resource</code>。</li>
<li><strong><code>api.add_resource</code></strong>：定义路由和资源之间的映射。</li>
</ul>
<hr />
<h3 id="24-flask">24. Flask 环境变量管理</h3>
<p>在实际开发中，管理应用的环境变量（如数据库连接、API 密钥等）是很常见的需求。可以使用 <code>python-dotenv</code> 来管理这些变量。</p>
<h4 id="python-dotenv">安装 python-dotenv</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>python-dotenv
</code></pre></div>

<h4 id="_19">使用示例</h4>
<ol>
<li><strong>创建 <code>.env</code> 文件</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your_secret_key
</code></pre></div>

<ol>
<li><strong>加载环境变量</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">load_dotenv</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Secret key is </span><span class="si">{</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;SECRET_KEY&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>load_dotenv</code></strong>：从 <code>.env</code> 文件加载环境变量。</li>
<li><strong><code>os.getenv</code></strong>：获取指定环境变量的值。</li>
</ul>
<hr />
<h3 id="25-flask-jwt-extended-jwt">25. 使用 Flask-JWT-Extended 进行 JWT 身份验证</h3>
<p>JSON Web Token (JWT) 是一种常见的身份验证机制，<code>Flask-JWT-Extended</code> 可以帮助你在 Flask 中快速实现基于 JWT 的身份验证。</p>
<h4 id="flask-jwt-extended_1">安装 Flask-JWT-Extended</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-JWT-Extended
</code></pre></div>

<h4 id="_20">使用示例</h4>
<ol>
<li><strong>配置 Flask-JWT-Extended</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_jwt_extended</span> <span class="kn">import</span> <span class="n">JWTManager</span><span class="p">,</span> <span class="n">create_access_token</span><span class="p">,</span> <span class="n">jwt_required</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;JWT_SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;super-secret-key&#39;</span>

<span class="n">jwt</span> <span class="o">=</span> <span class="n">JWTManager</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建登录和保护路由</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span><span class="n">identity</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;test&#39;</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/protected&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">protected</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;You are viewing a protected route.&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>create_access_token</code></strong>：生成 JWT 令牌。</li>
<li><strong><code>@jwt_required()</code></strong>：保护路由，使其只能被已认证的用户访问。</li>
</ul>
<hr />
<h3 id="26-flask">26. Flask 自定义错误处理</h3>
<p>在生产环境中，自定义错误页面或 API 错误响应是提升用户体验的重要手段。</p>
<h4 id="404">示例：自定义 404 错误页面</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;404.html&#39;</span><span class="p">),</span> <span class="mi">404</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>@app.errorhandler(404)</code></strong>：拦截 404 错误并自定义返回内容。</li>
<li><strong><code>render_template</code></strong>：返回自定义 HTML 页面。</li>
</ul>
<h4 id="api">示例：自定义 API 错误响应</h4>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">bad_request</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="s2">&quot;Bad request&quot;</span><span class="p">),</span> <span class="mi">400</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>jsonify</code></strong>：用于 API 返回 JSON 格式的错误消息。</li>
<li><strong>自定义状态码</strong>：第二个参数指定 HTTP 状态码，如 400 表示请求错误。</li>
</ul>
<hr />
<h3 id="27-flask-limiter">27. 使用 Flask-Limiter 实现速率限制</h3>
<p>在 Web 应用中，为了防止某些 IP 或用户过度访问 API，需要进行速率限制。<code>Flask-Limiter</code> 提供了对 API 或页面访问速率的控制。</p>
<h4 id="flask-limiter">安装 Flask-Limiter</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Limiter
</code></pre></div>

<h4 id="_21">使用示例</h4>
<ol>
<li><strong>配置 Flask-Limiter</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_limiter</span> <span class="kn">import</span> <span class="n">Limiter</span>
<span class="kn">from</span> <span class="nn">flask_limiter.util</span> <span class="kn">import</span> <span class="n">get_remote_address</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">limiter</span> <span class="o">=</span> <span class="n">Limiter</span><span class="p">(</span>
    <span class="n">get_remote_address</span><span class="p">,</span>
    <span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">,</span>
    <span class="n">default_limits</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;200 per day&quot;</span><span class="p">,</span> <span class="s2">&quot;50 per hour&quot;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>为路由添加速率限制</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/limited&#39;</span><span class="p">)</span>
<span class="nd">@limiter</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="s2">&quot;10 per minute&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">limited</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;This route is rate limited.&quot;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>default_limits</code></strong>：设置全局默认的速率限制。</li>
<li><strong><code>@limiter.limit</code></strong>：为特定路由设置速率限制，格式为“次数/时间单位”。</li>
</ul>
<hr />
<h3 id="28-flask-sqlalchemy">28. 使用 Flask-SQLAlchemy 实现多数据库支持</h3>
<p>在某些场景下，可能需要同时连接多个数据库。<code>Flask-SQLAlchemy</code> 支持多个数据库连接。</p>
<h4 id="_22">示例：多数据库配置</h4>
<div class="codehilite"><pre><span></span><code><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_BINDS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;users_db&#39;</span><span class="p">:</span> <span class="s1">&#39;sqlite:///users.db&#39;</span><span class="p">,</span>
    <span class="s1">&#39;products_db&#39;</span><span class="p">:</span> <span class="s1">&#39;sqlite:///products.db&#39;</span>
<span class="p">}</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__bind_key__</span> <span class="o">=</span> <span class="s1">&#39;users_db&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Product</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__bind_key__</span> <span class="o">=</span> <span class="s1">&#39;products_db&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SQLALCHEMY_BINDS</code></strong>：配置多个数据库。</li>
<li><strong><code>__bind_key__</code></strong>：模型类的 <code>__bind_key__</code> 属性指定其连接的数据库。</li>
</ul>
<hr />
<h3 id="29-flask-celery">29. Flask-Celery 实现异步任务队列</h3>
<p>在某些情况下，Flask 应用需要处理一些耗时的任务，例如发送电子邮件、生成报告等。<code>Celery</code> 是一个分布式任务队列，可以帮助 Flask 实现异步任务处理。</p>
<h4 id="celery_1">安装 Celery</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>celery
</code></pre></div>

<h4 id="flask-celery_1">示例：Flask 与 Celery 集成</h4>
<ol>
<li><strong>配置 Celery</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_BROKER_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost:6379/0&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_RESULT_BACKEND&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost:6379/0&#39;</span>

<span class="k">def</span> <span class="nf">make_celery</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">celery</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">import_name</span><span class="p">,</span> <span class="n">broker</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CELERY_BROKER_URL&#39;</span><span class="p">])</span>
    <span class="n">celery</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">celery</span>

<span class="n">celery</span> <span class="o">=</span> <span class="n">make_celery</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>定义异步任务</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@celery</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span> <span class="nf">send_email_task</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
    <span class="c1"># 假设这里是发送电子邮件的逻辑</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sending email to </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Email sent!&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send/&lt;email&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
    <span class="n">send_email_task</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Sending email to </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s1"> in background!&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Celery</code></strong>：创建任务队列的核心工具。</li>
<li><strong><code>@celery.task</code></strong>：定义异步任务。</li>
<li><strong><code>delay()</code></strong>：调用异步任务并在后台运行。</li>
</ul>
<hr />
<h3 id="30-flask-socketio">30. 使用 Flask-SocketIO 实现实时通信</h3>
<p>WebSocket 可以用于实现实时的双向通信，例如聊天应用或实时通知。<code>Flask-SocketIO</code> 是用于在 Flask 中集成 WebSocket 的扩展。</p>
<h4 id="flask-socketio_1">安装 Flask-SocketIO</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-SocketIO
</code></pre></div>

<h4 id="_23">使用示例</h4>
<ol>
<li><strong>配置 Flask-SocketIO</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_socketio</span> <span class="kn">import</span> <span class="n">SocketIO</span><span class="p">,</span> <span class="n">send</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecret&#39;</span>
<span class="n">socketio</span> <span class="o">=</span> <span class="n">SocketIO</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="nd">@socketio</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">send</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">broadcast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">socketio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>前端代码</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>SocketIO Chat<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Chat<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;message&quot;</span> <span class="na">autocomplete</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;sendMessage()&quot;</span><span class="p">&gt;</span>Send<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;//cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">();</span>

<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;messages&quot;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">            </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SocketIO</code></strong>：Flask-SocketIO 提供的实时通信支持。</li>
<li><strong><code>@socketio.on('message')</code></strong>：处理客户端发送的消息。</li>
</ul>
<hr />
<h3 id="31-flask-api-api">31. Flask 与外部 API 集成（例如使用第三方 API）</h3>
<p>在实际开发中，很多时候需要与外部 API 集成，如社交登录、天气查询等。可以使用 <code>requests</code> 库来与外部 API 进行交互。</p>
<h4 id="requests">安装 requests</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>requests
</code></pre></div>

<h4 id="github-api">示例：与 GitHub API 集成</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/github/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">github_user</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://api.github.com/users/</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">user_data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">user_data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;User not found&quot;</span><span class="p">}),</span> <span class="mi">404</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>requests.get</code></strong>：发送 HTTP GET 请求。</li>
<li><strong><code>response.json()</code></strong>：将 API 返回的 JSON 数据转换为 Python 字典。</li>
</ul>
<hr />
<h3 id="32-flask-uploads">32. 使用 Flask-Uploads 管理文件上传</h3>
<p>文件上传是 Web 应用中常见的功能，<code>Flask-Uploads</code> 可以帮助你管理文件上传。</p>
<h4 id="flask-uploads">安装 Flask-Uploads</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Uploads
</code></pre></div>

<h4 id="_24">使用示例</h4>
<ol>
<li><strong>配置 Flask-Uploads</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_uploads</span> <span class="kn">import</span> <span class="n">UploadSet</span><span class="p">,</span> <span class="n">configure_uploads</span><span class="p">,</span> <span class="n">IMAGES</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># 配置上传路径</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOADED_PHOTOS_DEST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;uploads&#39;</span>

<span class="n">photos</span> <span class="o">=</span> <span class="n">UploadSet</span><span class="p">(</span><span class="s1">&#39;photos&#39;</span><span class="p">,</span> <span class="n">IMAGES</span><span class="p">)</span>
<span class="n">configure_uploads</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">photos</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建文件上传路由</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span> <span class="ow">and</span> <span class="s1">&#39;photo&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">photos</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Photo saved as </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;file&quot; name=&quot;photo&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;submit&quot; value=&quot;Upload&quot;&gt;</span>
<span class="s1">        &lt;/form&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>UploadSet</code></strong>：定义允许上传的文件类型，如图片。</li>
<li><strong><code>photos.save</code></strong>：保存上传的文件到指定目录。</li>
</ul>
<hr />
<h3 id="33-flask-principal">33. 使用 Flask-Principal 实现角色与权限管理</h3>
<p>在一些复杂的系统中，不同用户具有不同的权限，可以使用 <code>Flask-Principal</code> 实现基于角色的权限管理。</p>
<h4 id="flask-principal">安装 Flask-Principal</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Principal
</code></pre></div>

<h4 id="_25">使用示例</h4>
<ol>
<li><strong>配置 Flask-Principal</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">flask_principal</span> <span class="kn">import</span> <span class="n">Principal</span><span class="p">,</span> <span class="n">Permission</span><span class="p">,</span> <span class="n">RoleNeed</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">principals</span> <span class="o">=</span> <span class="n">Principal</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="c1"># 定义权限</span>
<span class="n">admin_permission</span> <span class="o">=</span> <span class="n">Permission</span><span class="p">(</span><span class="n">RoleNeed</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Home Page&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@admin_permission</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">http_exception</span><span class="o">=</span><span class="mi">403</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Admin Page&#39;</span>
</code></pre></div>

<ol>
<li><strong>模拟用户角色</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">before_request</span>
<span class="k">def</span> <span class="nf">before_request</span><span class="p">():</span>
    <span class="c1"># 假设此处设置用户角色，实际应用中应根据用户登录信息设置</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">==</span> <span class="s1">&#39;admin&#39;</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">identity</span> <span class="o">=</span> <span class="n">Identity</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>RoleNeed</code></strong>：定义角色需求。</li>
<li><strong><code>Permission.require</code></strong>：对路由进行权限检查，未通过则返回指定错误码。</li>
</ul>
<hr />
<h3 id="34-flask-restplus-rest-api">34. 使用 Flask-RESTPlus 构建文档化的 REST API</h3>
<p><code>Flask-RESTPlus</code> 不仅提供 REST API 的支持，还能生成 API 文档（如 Swagger UI）。</p>
<h4 id="flask-restplus">安装 Flask-RESTPlus</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-RESTPlus
</code></pre></div>

<h4 id="_26">使用示例</h4>
<ol>
<li><strong>配置 Flask-RESTPlus</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restplus</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Hello, World!&#39;</span><span class="p">}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>访问 API 文档</strong></li>
</ol>
<p>启动应用后，访问 <code>http://127.0.0.1:5000/</code> 可以查看自动生成的 Swagger 文档界面。</p>
<hr />
<h3 id="35-flask-seasurf-csrf">35. 使用 Flask-SeaSurf 提供 CSRF 保护</h3>
<p>在 Web 开发中，防止跨站请求伪造（CSRF）是重要的安全措施，<code>Flask-SeaSurf</code> 可以帮助你实现 CSRF 保护。</p>
<h4 id="flask-seasurf">安装 Flask-SeaSurf</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-SeaSurf
</code></pre></div>

<h4 id="_27">使用示例</h4>
<ol>
<li><strong>配置 Flask-SeaSurf</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_seasurf</span> <span class="kn">import</span> <span class="n">SeaSurf</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">csrf</span> <span class="o">=</span> <span class="n">SeaSurf</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;CSRF protected page&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>自动启用 CSRF 保护</strong></li>
</ol>
<p><code>Flask-SeaSurf</code> 会自动为所有非 GET 请求添加 CSRF 保护，确保安全性。</p>
<hr />
<h3 id="36-flask-caching">36. 使用 Flask-Caching 实现缓存</h3>
<p>缓存可以显著提高应用性能，<code>Flask-Caching</code> 允许你在 Flask 应用中轻松实现缓存。</p>
<h4 id="flask-caching_1">安装 Flask-Caching</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Caching
</code></pre></div>

<h4 id="flask-caching_2">示例：配置 Flask-Caching</h4>
<ol>
<li><strong>配置缓存</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_caching</span> <span class="kn">import</span> <span class="n">Cache</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;simple&#39;</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用缓存</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/expensive&#39;</span><span class="p">)</span>
<span class="nd">@cache</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">expensive</span><span class="p">():</span>
    <span class="c1"># 模拟一个耗时的操作</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;This is an expensive operation.&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>@cache.cached</code></strong>：装饰器用于缓存视图函数的结果，<code>timeout</code> 指定缓存的过期时间（秒）。</li>
</ul>
<hr />
<h3 id="37-flask-admin">37. 使用 Flask-Admin 创建后台管理界面</h3>
<p><code>Flask-Admin</code> 提供了一个简单的方式来为 Flask 应用生成后台管理界面。</p>
<h4 id="flask-admin_1">安装 Flask-Admin</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Admin
</code></pre></div>

<h4 id="flask-admin_2">示例：配置 Flask-Admin</h4>
<ol>
<li><strong>创建管理界面</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_admin</span> <span class="kn">import</span> <span class="n">Admin</span>
<span class="kn">from</span> <span class="nn">flask_admin.contrib.sqla</span> <span class="kn">import</span> <span class="n">ModelView</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///admin_example.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="n">admin</span> <span class="o">=</span> <span class="n">Admin</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Admin Dashboard&#39;</span><span class="p">,</span> <span class="n">template_mode</span><span class="o">=</span><span class="s1">&#39;bootstrap3&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="n">admin</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ModelView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>访问管理界面</strong></li>
</ol>
<p>启动应用后，访问 <code>http://127.0.0.1:5000/admin</code> 可以查看后台管理界面。</p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>ModelView</code></strong>：自动生成模型的管理界面。</li>
<li><strong><code>admin.add_view</code></strong>：将视图添加到后台管理界面。</li>
</ul>
<hr />
<h3 id="38-flask-security">38. 使用 Flask-Security 实现用户认证和授权</h3>
<p><code>Flask-Security</code> 提供了全面的用户认证和授权功能，包括登录、注册、角色管理等。</p>
<h4 id="flask-security">安装 Flask-Security</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Security
</code></pre></div>

<h4 id="flask-security_1">示例：配置 Flask-Security</h4>
<ol>
<li><strong>配置 Flask-Security</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_security</span> <span class="kn">import</span> <span class="n">Security</span><span class="p">,</span> <span class="n">SQLAlchemyUserDatastore</span><span class="p">,</span> <span class="n">UserMixin</span><span class="p">,</span> <span class="n">RoleMixin</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///security_example.db&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecret&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECURITY_REGISTERABLE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECURITY_CONFIRMABLE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">RoleMixin</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">UserMixin</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Boolean</span><span class="p">())</span>

<span class="n">user_datastore</span> <span class="o">=</span> <span class="n">SQLAlchemyUserDatastore</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">Role</span><span class="p">)</span>
<span class="n">security</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">user_datastore</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建用户认证和授权</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Login page&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@roles_required</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Admin page&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SQLAlchemyUserDatastore</code></strong>：将 SQLAlchemy 用户模型与 Flask-Security 集成。</li>
<li><strong><code>@roles_required</code></strong>：装饰器用于限制访问特定角色的页面。</li>
</ul>
<hr />
<h3 id="39-flask-mail">39. 使用 Flask-Mail 发送电子邮件</h3>
<p><code>Flask-Mail</code> 允许你在 Flask 应用中发送电子邮件，适用于用户通知、密码重置等功能。</p>
<h4 id="flask-mail_1">安装 Flask-Mail</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Mail
</code></pre></div>

<h4 id="flask-mail_2">示例：配置 Flask-Mail</h4>
<ol>
<li><strong>配置邮件发送</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">render_template_string</span>
<span class="kn">from</span> <span class="nn">flask_mail</span> <span class="kn">import</span> <span class="n">Mail</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_SERVER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;smtp.example.com&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PORT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">587</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_username&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_password&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_TLS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_SSL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">mail</span> <span class="o">=</span> <span class="n">Mail</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send_email&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_email</span><span class="p">():</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="s1">&#39;from@example.com&#39;</span><span class="p">,</span> <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;to@example.com&#39;</span><span class="p">])</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;This is a test email sent from Flask.&#39;</span>
    <span class="n">mail</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Email sent!&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Message</code></strong>：创建邮件消息。</li>
<li><strong><code>mail.send</code></strong>：发送邮件。</li>
</ul>
<hr />
<h3 id="40-flask-jinja2">40. 使用 Flask-Jinja2 进行模板继承和宏</h3>
<p><code>Jinja2</code> 是 Flask 默认的模板引擎，支持模板继承和宏，允许你创建可复用的模板结构。</p>
<h4 id="_28">示例：模板继承</h4>
<ol>
<li><strong>创建基础模板 <code>base.html</code></strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{% block title %}My Site{% endblock %}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My Site<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
        {% block content %}{% endblock %}
    <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Footer content<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ol>
<li><strong>继承基础模板</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>{% extends &quot;base.html&quot; %}

{% block title %}Home{% endblock %}

{% block content %}
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Welcome to the home page!<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the home page content.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endblock %}
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>{% extends %}</code></strong>：继承基础模板。</li>
<li><strong><code>{% block %}</code></strong>：定义可以被子模板覆盖的块。</li>
</ul>
<hr />
<h3 id="41-flask-socketio-websocket">41. 使用 Flask-SocketIO 处理 WebSocket 连接</h3>
<p>除了实时通信，<code>Flask-SocketIO</code> 还支持 WebSocket 连接，用于双向数据传输。</p>
<h4 id="websocket">示例：处理 WebSocket 事件</h4>
<ol>
<li><strong>配置 WebSocket 连接</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_socketio</span> <span class="kn">import</span> <span class="n">SocketIO</span><span class="p">,</span> <span class="n">emit</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">socketio</span> <span class="o">=</span> <span class="n">SocketIO</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="nd">@socketio</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_connect</span><span class="p">():</span>
    <span class="n">emit</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;Connected!&#39;</span><span class="p">})</span>

<span class="nd">@socketio</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">emit</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Received message: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">socketio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>前端 WebSocket 连接</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>WebSocket Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>WebSocket Example<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;sendMessage()&quot;</span><span class="p">&gt;</span>Send Message<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;response&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;//cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">();</span>

<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">).</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello, server!&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>emit</code></strong>：发送消息到客户端或其他事件处理器。</li>
<li><strong><code>@socketio.on('connect')</code></strong>：处理 WebSocket 连接事件。</li>
</ul>
<hr />
<h3 id="42-flask-admin">42. 使用 Flask-Admin 实现表单处理</h3>
<p><code>Flask-Admin</code> 提供了一个强大的界面来处理模型数据的创建、更新和删除。</p>
<h4 id="_29">示例：配置表单处理</h4>
<ol>
<li><strong>创建表单视图</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask_admin.contrib.sqla</span> <span class="kn">import</span> <span class="n">ModelView</span>

<span class="k">class</span> <span class="nc">MyModelView</span><span class="p">(</span><span class="n">ModelView</span><span class="p">):</span>
    <span class="n">form_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="n">column_searchable_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">column_filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">MyModelView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">))</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>form_columns</code></strong>：定义在表单中显示的字段。</li>
<li><strong><code>column_searchable_list</code></strong> 和 <strong><code>column_filters</code></strong>：定义可搜索和过滤的字段。</li>
</ul>
<hr />
<h3 id="43-flask-sqlalchemy">43. 使用 Flask-SQLAlchemy 实现数据库关系</h3>
<p><code>Flask-SQLAlchemy</code> 支持定义和操作复杂的数据库关系，例如一对多、多对多等。</p>
<h4 id="_30">示例：一对多关系</h4>
<ol>
<li><strong>定义模型</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">books</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Book&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">author_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;author.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>操作关系</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/add_book&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_book</span><span class="p">():</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="n">book</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;New Book&#39;</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">return</span> <span class="s1">&#39;Book added!&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>db.relationship</code></strong>：定义模型之间的关系。</li>
<li><strong><code>db.ForeignKey</code></strong>：定义外键约束。</li>
</ul>
<hr />
<h3 id="44-flask-babel">44. 使用 Flask-Babel 实现国际化和本地化</h3>
<p><code>Flask-Babel</code> 允许你在 Flask 应用中实现国际化（i18n）和本地化（l10n）。</p>
<h4 id="flask-babel">安装 Flask-Babel</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Babel
</code></pre></div>

<h4 id="flask-babel_1">示例：配置 Flask-Babel</h4>
<ol>
<li><strong>配置国际化</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_babel</span> <span class="kn">import</span> <span class="n">Babel</span><span class="p">,</span> <span class="n">_</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;BABEL_DEFAULT_LOCALE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;en&#39;</span>
<span class="n">babel</span> <span class="o">=</span> <span class="n">Babel</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">greeting</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">))</span>

<span class="nd">@babel</span><span class="o">.</span><span class="n">localeselector</span>
<span class="k">def</span> <span class="nf">get_locale</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">accept_languages</span><span class="o">.</span><span class="n">best_match</span><span class="p">([</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;es&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>模板中使用</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ _(&#39;Welcome&#39;) }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ greeting }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>_()</code></strong>：用于标记需要翻译的文本。</li>
<li><strong><code>babel.localeselector</code></strong>：选择用户的语言设置。</li>
</ul>
<hr />
<h3 id="45-flask-restful-rest-api">45. 使用 Flask-RESTful 实现 REST API</h3>
<p><code>Flask-RESTful</code> 是 <code>Flask</code> 的扩展，用于构建 REST API。</p>
<h4 id="flask-restful_1">安装 Flask-RESTful</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-RESTful
</code></pre></div>

<h4 id="rest-api">示例：创建 REST API</h4>
<ol>
<li><strong>配置 REST API</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Hello, World!&#39;</span><span class="p">}</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">HelloWorld</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Resource</code></strong>：定义 API 资源。</li>
<li><strong><code>api.add_resource</code></strong>：将资源添加到 API 路由中。</li>
</ul>
<hr />
<h3 id="46-flask-migrate">46. 使用 Flask-Migrate 实现数据库迁移</h3>
<p><code>Flask-Migrate</code> 基于 <code>Alembic</code>，用于处理数据库迁移和版本控制。</p>
<h4 id="flask-migrate_2">安装 Flask-Migrate</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Migrate
</code></pre></div>

<h4 id="flask-migrate_3">示例：配置 Flask-Migrate</h4>
<ol>
<li><strong>配置迁移</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_migrate</span> <span class="kn">import</span> <span class="n">Migrate</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///migrate_example.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">migrate</span> <span class="o">=</span> <span class="n">Migrate</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建迁移</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>flask<span class="w"> </span>db<span class="w"> </span>init
flask<span class="w"> </span>db<span class="w"> </span>migrate<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial migration.&quot;</span>
flask<span class="w"> </span>db<span class="w"> </span>upgrade
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>flask db init</code></strong>：初始化迁移仓库。</li>
<li><strong><code>flask db migrate</code></strong>：创建迁移脚本。</li>
<li><strong><code>flask db upgrade</code></strong>：应用迁移到数据库。</li>
</ul>
<hr />
<h3 id="47-flask-restplus-api">47. 使用 Flask-RESTPlus 进行 API 文档自动生成</h3>
<p><code>Flask-RESTPlus</code> 提供了自动生成 API 文档的功能，帮助你创建清晰的 API 文档。</p>
<h4 id="api_1">示例：创建 API 并生成文档</h4>
<ol>
<li><strong>配置 Flask-RESTPlus</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restplus</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My API&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A simple API&#39;</span><span class="p">)</span>

<span class="n">ns</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">namespace</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Item operations&#39;</span><span class="p">)</span>

<span class="c1"># 定义模型</span>
<span class="n">item_model</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="s1">&#39;Item&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">api</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The item name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">api</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The item description&#39;</span><span class="p">),</span>
<span class="p">})</span>

<span class="c1"># 存储数据</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nd">@ns</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemList</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="nd">@ns</span><span class="o">.</span><span class="n">doc</span><span class="p">(</span><span class="s1">&#39;list_items&#39;</span><span class="p">)</span>
    <span class="nd">@ns</span><span class="o">.</span><span class="n">marshal_list_with</span><span class="p">(</span><span class="n">item_model</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">items</span>

    <span class="nd">@ns</span><span class="o">.</span><span class="n">doc</span><span class="p">(</span><span class="s1">&#39;create_item&#39;</span><span class="p">)</span>
    <span class="nd">@ns</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="n">item_model</span><span class="p">)</span>
    <span class="nd">@ns</span><span class="o">.</span><span class="n">marshal_with</span><span class="p">(</span><span class="n">item_model</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">201</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">payload</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span><span class="p">,</span> <span class="mi">201</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>访问 API 文档</strong></li>
</ol>
<p>启动应用后，访问 <code>http://127.0.0.1:5000/</code>，可以查看 Swagger 自动生成的 API 文档界面。</p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Api</code></strong>：创建 API 文档和路由。</li>
<li><strong><code>marshal_with</code></strong>：将数据转换为 JSON 格式，并应用模型。</li>
<li><strong><code>expect</code></strong>：定义请求负载的数据模型。</li>
</ul>
<hr />
<h3 id="48-flask-cache">48. 使用 Flask-Cache 实现更高级的缓存策略</h3>
<p><code>Flask-Cache</code> 提供了更多的缓存后端和策略选择。</p>
<h4 id="flask-cache">示例：配置 Flask-Cache</h4>
<ol>
<li><strong>配置 Flask-Cache</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_caching</span> <span class="kn">import</span> <span class="n">Cache</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_REDIS_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost:6379/0&#39;</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用缓存</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/cached&#39;</span><span class="p">)</span>
<span class="nd">@cache</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cached_view</span><span class="p">():</span>
    <span class="c1"># 假设这里有复杂的计算</span>
    <span class="k">return</span> <span class="s1">&#39;This view is cached for 5 minutes.&#39;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>CACHE_TYPE</code></strong>：指定缓存后端，例如 Redis、Memcached。</li>
<li><strong><code>CACHE_REDIS_URL</code></strong>：Redis 缓存的连接 URL。</li>
</ul>
<hr />
<h3 id="49-flask-bootstrap-bootstrap">49. 使用 Flask-Bootstrap 集成 Bootstrap 前端框架</h3>
<p><code>Flask-Bootstrap</code> 使得在 Flask 应用中集成 Bootstrap 变得更容易。</p>
<h4 id="flask-bootstrap">安装 Flask-Bootstrap</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Bootstrap
</code></pre></div>

<h4 id="bootstrap">示例：集成 Bootstrap</h4>
<ol>
<li><strong>配置 Flask-Bootstrap</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_bootstrap</span> <span class="kn">import</span> <span class="n">Bootstrap</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">bootstrap</span> <span class="o">=</span> <span class="n">Bootstrap</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用 Bootstrap 模板</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Flask-Bootstrap Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    {{ bootstrap.load_css() }}
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello, Flask-Bootstrap!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is a Bootstrap-styled page.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    {{ bootstrap.load_js() }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>bootstrap.load_css()</code></strong> 和 <strong><code>bootstrap.load_js()</code></strong>：加载 Bootstrap 的 CSS 和 JavaScript 文件。</li>
</ul>
<hr />
<h3 id="50-flask-testing">50. 使用 Flask-Testing 进行单元测试</h3>
<p><code>Flask-Testing</code> 提供了便捷的工具来测试 Flask 应用。</p>
<h4 id="flask-testing">安装 Flask-Testing</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Testing
</code></pre></div>

<h4 id="_31">示例：编写测试用例</h4>
<ol>
<li><strong>编写测试</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_testing</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, World!&#39;</span>

<span class="k">class</span> <span class="nc">TestApp</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">app</span>

    <span class="k">def</span> <span class="nf">test_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert200</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>TestCase</code></strong>：提供测试功能的基类。</li>
<li><strong><code>self.client.get</code></strong>：发送 GET 请求并获取响应。</li>
</ul>
<hr />
<h3 id="51-flask-mail">51. 使用 Flask-Mail 进行模板化电子邮件</h3>
<p><code>Flask-Mail</code> 允许你发送模板化的电子邮件，提升用户体验。</p>
<h4 id="_32">示例：发送模板化电子邮件</h4>
<ol>
<li><strong>配置 Flask-Mail</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_mail</span> <span class="kn">import</span> <span class="n">Mail</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_SERVER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;smtp.example.com&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PORT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">587</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_username&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_password&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_TLS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mail</span> <span class="o">=</span> <span class="n">Mail</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>发送模板化电子邮件</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send_email&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_email</span><span class="p">():</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;Hello from Flask-Mail&#39;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="s1">&#39;from@example.com&#39;</span><span class="p">,</span> <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;to@example.com&#39;</span><span class="p">])</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;email_template.html&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;User&#39;</span><span class="p">)</span>
    <span class="n">mail</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Email sent!&#39;</span>
</code></pre></div>

<ol>
<li><strong>电子邮件模板</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Email Template<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello {{ name }}!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is a test email sent from Flask with a template.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>render_template</code></strong>：渲染 HTML 模板并插入动态数据。</li>
</ul>
<hr />
<h3 id="52-flask-principal">52. 使用 Flask-Principal 实现多角色权限控制</h3>
<p><code>Flask-Principal</code> 允许你实现复杂的权限控制，包括多角色支持。</p>
<h4 id="_33">示例：配置多角色权限</h4>
<ol>
<li><strong>配置角色和权限</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_principal</span> <span class="kn">import</span> <span class="n">Principal</span><span class="p">,</span> <span class="n">RoleNeed</span><span class="p">,</span> <span class="n">Permission</span><span class="p">,</span> <span class="n">Identity</span><span class="p">,</span> <span class="n">identity_loaded</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">&#39;supersecretkey&#39;</span>
<span class="n">principals</span> <span class="o">=</span> <span class="n">Principal</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="n">admin_permission</span> <span class="o">=</span> <span class="n">Permission</span><span class="p">(</span><span class="n">RoleNeed</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">))</span>
<span class="n">user_permission</span> <span class="o">=</span> <span class="n">Permission</span><span class="p">(</span><span class="n">RoleNeed</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">))</span>

<span class="nd">@identity_loaded</span><span class="o">.</span><span class="n">connect_via</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">on_identity_loaded</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">identity</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">identity</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">):</span>
        <span class="n">identity</span><span class="o">.</span><span class="n">provides</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">admin_permission</span><span class="p">)</span>
        <span class="n">identity</span><span class="o">.</span><span class="n">provides</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user_permission</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@admin_permission</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">http_exception</span><span class="o">=</span><span class="mi">403</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Admin area&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">)</span>
<span class="nd">@user_permission</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">http_exception</span><span class="o">=</span><span class="mi">403</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">user</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;User area&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>identity.provides.add</code></strong>：为用户身份添加权限。</li>
<li><strong><code>Permission.require</code></strong>：检查访问权限。</li>
</ul>
<hr />
<h3 id="53-flask-sqlalchemy">53. 使用 Flask-SQLAlchemy 处理复杂查询</h3>
<p><code>Flask-SQLAlchemy</code> 支持执行复杂的 SQL 查询。</p>
<h4 id="_34">示例：复杂查询</h4>
<ol>
<li><strong>定义模型</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///complex_query.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">author_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;author.id&#39;</span><span class="p">))</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Author&#39;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s1">&#39;posts&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>执行复杂查询</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/author_posts/&lt;int:author_id&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">author_posts</span><span class="p">(</span><span class="n">author_id</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">Author</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">author_id</span><span class="p">)</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">author</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="n">author</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;posts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">post</span><span class="o">.</span><span class="n">title</span> <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">]}</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>db.relationship</code></strong>：定义模型之间的关系。</li>
<li><strong><code>filter_by</code></strong>：根据条件过滤查询结果。</li>
</ul>
<hr />
<h3 id="54-flask-migrate">54. 使用 Flask-Migrate 实现复杂数据库迁移</h3>
<p><code>Flask-Migrate</code> 支持复杂的数据库迁移，包括添加索引、修改列类型等。</p>
<h4 id="_35">示例：复杂迁移操作</h4>
<ol>
<li><strong>创建迁移</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>flask<span class="w"> </span>db<span class="w"> </span>migrate<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add new field&quot;</span>
</code></pre></div>

<ol>
<li><strong>编辑迁移脚本</strong></li>
</ol>
<p>编辑生成的迁移脚本以进行复杂的迁移操作，例如添加索引或修改字段。</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">alembic</span> <span class="kn">import</span> <span class="n">op</span>
<span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span>

<span class="k">def</span> <span class="nf">upgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;published_date&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">DateTime</span><span class="p">(),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="n">op</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span><span class="s1">&#39;ix_post_title&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">downgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">drop_index</span><span class="p">(</span><span class="s1">&#39;ix_post_title&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">)</span>
    <span class="n">op</span><span class="o">.</span><span class="n">drop_column</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;published_date&#39;</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>op.create_index</code></strong>：创建数据库索引。</li>
<li><strong><code>op.add_column</code></strong> 和 <strong><code>op.drop_column</code></strong>：添加或删除列。</li>
</ul>
<hr />
<h3 id="55-flask-babel">55. 使用 Flask-Babel 实现多语言支持</h3>
<p><code>Flask-Babel</code> 提供了多语言支持，可以为应用程序实现本地化和国际化。</p>
<h4 id="_36">示例：实现多语言支持</h4>
<ol>
<li><strong>配置 Flask-Babel</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_babel</span> <span class="kn">import</span> <span class="n">Babel</span><span class="p">,</span> <span class="n">_</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;BABEL_DEFAULT_LOCALE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;en&#39;</span>
<span class="n">babel</span> <span class="o">=</span> <span class="n">Babel</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@babel</span><span class="o">.</span><span class="n">localeselector</span>
<span class="k">def</span> <span class="nf">get_locale</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">accept_languages</span><span class="o">.</span><span class="n">best_match</span><span class="p">([</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;es&#39;</span><span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">greeting</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>翻译文件</strong></li>
</ol>
<p>使用 <code>pybabel</code> 工具生成和更新翻译文件：</p>
<div class="codehilite"><pre><span></span><code>pybabel<span class="w"> </span>extract<span class="w"> </span>-F<span class="w"> </span>babel.cfg<span class="w"> </span>-o<span class="w"> </span>messages.pot<span class="w"> </span>.
pybabel<span class="w"> </span>init<span class="w"> </span>-i<span class="w"> </span>messages.pot<span class="w"> </span>-d<span class="w"> </span>translations<span class="w"> </span>-l<span class="w"> </span>es
pybabel<span class="w"> </span>update<span class="w"> </span>-i<span class="w"> </span>messages.pot<span class="w"> </span>-d<span class="w"> </span>translations
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>get_locale</code></strong>：根据请求的语言选择适当的语言环境。</li>
<li><strong><code>pybabel</code></strong>：管理翻译文件的工具。</li>
</ul>
<hr />
<h3 id="56-flask-user">56. 使用 Flask-User 实现用户认证和管理</h3>
<p><code>Flask-User</code> 提供了完整的用户认证、注册、密码重置等功能的实现。</p>
<h4 id="flask-user">安装 Flask-User</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-User
</code></pre></div>

<h4 id="flask-user_1">示例：配置 Flask-User</h4>
<ol>
<li><strong>配置 Flask-User</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_user</span> <span class="kn">import</span> <span class="n">UserManager</span><span class="p">,</span> <span class="n">UserMixin</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///user_example.db&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;USER_ENABLE_EMAIL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecretkey&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">UserMixin</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">user_manager</span> <span class="o">=</span> <span class="n">UserManager</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">User</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用 Flask-User 的视图</strong></li>
</ol>
<p>Flask-User 自动提供了用户认证相关的视图，如登录、注册和密码重置。你可以通过访问默认路由来使用这些功能。</p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>UserManager</code></strong>：提供用户管理功能。</li>
<li><strong><code>UserMixin</code></strong>：提供用户模型所需的默认方法和属性。</li>
</ul>
<hr />
<h3 id="57-flask-socketio-websocket">57. 使用 Flask-SocketIO 实现 WebSocket</h3>
<p><code>Flask-SocketIO</code> 为 Flask 应用提供了 WebSocket 支持。</p>
<h4 id="flask-socketio_2">安装 Flask-SocketIO</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>flask-socketio
</code></pre></div>

<h4 id="flask-socketio_3">示例：配置 Flask-SocketIO</h4>
<ol>
<li><strong>配置 WebSocket</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_socketio</span> <span class="kn">import</span> <span class="n">SocketIO</span><span class="p">,</span> <span class="n">emit</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecretkey&#39;</span>
<span class="n">socketio</span> <span class="o">=</span> <span class="n">SocketIO</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="nd">@socketio</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Message received: </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">emit</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;Message received!&#39;</span><span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">socketio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>前端代码</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>WebSocket Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.socket.io/4.0.0/socket.io.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>WebSocket Example<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;sendMessage&quot;</span><span class="p">&gt;</span>Send Message<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">();</span>

<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;sendMessage&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello from client!&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SocketIO</code></strong>：提供 WebSocket 功能。</li>
<li><strong><code>@socketio.on('message')</code></strong>：定义处理消息的事件处理器。</li>
<li><strong><code>emit</code></strong>：向客户端发送消息。</li>
</ul>
<hr />
<h3 id="58-flask-uploads">58. 使用 Flask-Uploads 管理文件上传</h3>
<p><code>Flask-Uploads</code> 使文件上传变得简单，支持各种文件类型和存储位置。</p>
<h4 id="flask-uploads_1">安装 Flask-Uploads</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Uploads
</code></pre></div>

<h4 id="flask-uploads_2">示例：配置 Flask-Uploads</h4>
<ol>
<li><strong>配置文件上传</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">flask_uploads</span> <span class="kn">import</span> <span class="n">UploadSet</span><span class="p">,</span> <span class="n">configure_uploads</span><span class="p">,</span> <span class="n">ALL</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOADED_PHOTOS_DEST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;uploads/photos&#39;</span>
<span class="n">photos</span> <span class="o">=</span> <span class="n">UploadSet</span><span class="p">(</span><span class="s1">&#39;photos&#39;</span><span class="p">,</span> <span class="n">ALL</span><span class="p">)</span>
<span class="n">configure_uploads</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">photos</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;h1&gt;Upload a photo&lt;/h1&gt;</span>
<span class="s1">        &lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;file&quot; name=&quot;photo&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;submit&quot;&gt;</span>
<span class="s1">        &lt;/form&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;photo&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">photos</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;No file uploaded&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>UploadSet</code></strong>：定义文件集合和类型。</li>
<li><strong><code>configure_uploads</code></strong>：配置上传文件的保存位置和设置。</li>
</ul>
<hr />
<h3 id="59-flask-security">59. 使用 Flask-Security 实现安全功能</h3>
<p><code>Flask-Security</code> 提供了用户认证、角色管理、密码加密等功能。</p>
<h4 id="flask-security_2">安装 Flask-Security</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Security
</code></pre></div>

<h4 id="flask-security_3">示例：配置 Flask-Security</h4>
<ol>
<li><strong>配置 Flask-Security</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_security</span> <span class="kn">import</span> <span class="n">Security</span><span class="p">,</span> <span class="n">SQLAlchemyUserDatastore</span><span class="p">,</span> <span class="n">UserMixin</span><span class="p">,</span> <span class="n">RoleMixin</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///security_example.db&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecretkey&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECURITY_PASSWORD_SALT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;somesalt&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="n">roles_users</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s1">&#39;roles_users&#39;</span><span class="p">,</span>
    <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;user.id&#39;</span><span class="p">)),</span>
    <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;role_id&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;role.id&#39;</span><span class="p">))</span>
<span class="p">)</span>

<span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">RoleMixin</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">UserMixin</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">(),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span>
    <span class="n">active</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Boolean</span><span class="p">())</span>
    <span class="n">roles</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Role&#39;</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="n">roles_users</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">backref</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="s1">&#39;dynamic&#39;</span><span class="p">))</span>

<span class="n">user_datastore</span> <span class="o">=</span> <span class="n">SQLAlchemyUserDatastore</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">Role</span><span class="p">)</span>
<span class="n">security</span> <span class="o">=</span> <span class="n">Security</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">user_datastore</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>创建用户和角色</strong></li>
</ol>
<p>使用 Flask-Security 提供的命令行工具创建用户和角色，或通过应用程序脚本进行创建。</p>
<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SQLAlchemyUserDatastore</code></strong>：提供与 SQLAlchemy 结合的用户数据存储功能。</li>
<li><strong><code>RoleMixin</code> 和 <code>UserMixin</code></strong>：提供角色和用户的默认实现。</li>
</ul>
<hr />
<h3 id="60-flask-caching">60. 使用 Flask-Caching 实现缓存</h3>
<p><code>Flask-Caching</code> 允许你使用不同的缓存机制来缓存视图和数据。</p>
<h4 id="flask-caching_3">安装 Flask-Caching</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Caching
</code></pre></div>

<h4 id="flask-caching_4">示例：配置 Flask-Caching</h4>
<ol>
<li><strong>配置缓存</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_caching</span> <span class="kn">import</span> <span class="n">Cache</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;simple&#39;</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@cache</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>CACHE_TYPE</code></strong>：指定缓存类型，例如 <code>simple</code>、<code>redis</code>、<code>memcached</code> 等。</li>
<li><strong><code>@cache.cached</code></strong>：将视图函数的结果缓存起来。</li>
</ul>
<hr />
<h3 id="61-flask-restplus-api">61. 使用 Flask-RESTPlus 进行 API 版本管理</h3>
<p><code>Flask-RESTPlus</code> 支持 API 版本管理，帮助你组织和管理不同版本的 API。</p>
<h4 id="api_2">示例：API 版本管理</h4>
<ol>
<li><strong>配置版本管理</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restplus</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My API&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A simple API&#39;</span><span class="p">)</span>

<span class="n">v1</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">namespace</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Version 1 operations&#39;</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">namespace</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Version 2 operations&#39;</span><span class="p">)</span>

<span class="nd">@v1</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/items&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemsV1</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;item1&#39;</span><span class="p">,</span> <span class="s1">&#39;item2&#39;</span><span class="p">]}</span>

<span class="nd">@v2</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/items&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemsV2</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;2.0&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;itemA&#39;</span><span class="p">,</span> <span class="s1">&#39;itemB&#39;</span><span class="p">]}</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>namespace</code></strong>：创建 API 的不同命名空间，用于版本管理和组织。</li>
<li><strong><code>version</code></strong>：定义 API 的版本。</li>
</ul>
<hr />
<h3 id="62-flask-jwt-extended-jwt">62. 使用 Flask-JWT-Extended 实现 JWT 认证</h3>
<p><code>Flask-JWT-Extended</code> 提供了使用 JSON Web Tokens (JWT) 进行认证和授权的功能。</p>
<h4 id="flask-jwt-extended_2">安装 Flask-JWT-Extended</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-JWT-Extended
</code></pre></div>

<h4 id="jwt">示例：配置 JWT 认证</h4>
<ol>
<li><strong>配置 Flask-JWT-Extended</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_jwt_extended</span> <span class="kn">import</span> <span class="n">JWTManager</span><span class="p">,</span> <span class="n">create_access_token</span><span class="p">,</span> <span class="n">jwt_required</span><span class="p">,</span> <span class="n">get_jwt_identity</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;JWT_SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_secret_key&#39;</span>
<span class="n">jwt</span> <span class="o">=</span> <span class="n">JWTManager</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">username</span><span class="p">:</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span><span class="n">identity</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">access_token</span><span class="p">),</span> <span class="mi">200</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="s2">&quot;Missing username&quot;</span><span class="p">}),</span> <span class="mi">400</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/protected&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">protected</span><span class="p">():</span>
    <span class="n">current_user</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">logged_in_as</span><span class="o">=</span><span class="n">current_user</span><span class="p">),</span> <span class="mi">200</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>create_access_token</code></strong>：生成 JWT。</li>
<li><strong><code>@jwt_required()</code></strong>：保护视图，要求请求中包含有效的 JWT。</li>
<li><strong><code>get_jwt_identity</code></strong>：获取当前用户身份信息。</li>
</ul>
<hr />
<h3 id="63-flask-session">63. 使用 Flask-Session 实现服务器端会话存储</h3>
<p><code>Flask-Session</code> 支持将 Flask 的会话存储在服务器端，增强安全性和可扩展性。</p>
<h4 id="flask-session">安装 Flask-Session</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Session
</code></pre></div>

<h4 id="_37">示例：配置服务器端会话</h4>
<ol>
<li><strong>配置 Flask-Session</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_session</span> <span class="kn">import</span> <span class="n">Session</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SESSION_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;filesystem&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_secret_key&#39;</span>
<span class="n">Session</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;username&#39;</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Logged in as </span><span class="si">{</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;You are not logged in&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">session</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/logout&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
    <span class="n">session</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SESSION_TYPE</code></strong>：指定会话存储类型，例如 <code>filesystem</code>、<code>redis</code>、<code>memcached</code> 等。</li>
<li><strong><code>session</code></strong>：用于存储用户会话数据。</li>
</ul>
<hr />
<h3 id="64-flask-accepts">64. 使用 Flask-Accepts 实现请求内容协商</h3>
<p><code>Flask-Accepts</code> 提供了内容协商功能，可以根据客户端请求的内容类型（如 JSON 或 XML）返回不同的响应。</p>
<h4 id="flask-accepts">安装 Flask-Accepts</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Accepts
</code></pre></div>

<h4 id="_38">示例：实现内容协商</h4>
<ol>
<li><strong>配置 Flask-Accepts</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_accepts</span> <span class="kn">import</span> <span class="n">Accepts</span><span class="p">,</span> <span class="n">respond_to</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">accepts</span> <span class="o">=</span> <span class="n">Accepts</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/data&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="nd">@respond_to</span><span class="p">(</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;application/xml&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">data</span><span class="p">():</span>
    <span class="n">response_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, World!&quot;</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">response_data</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>respond_to</code></strong>：根据客户端请求的内容类型返回不同的响应格式。</li>
<li><strong><code>Accepts</code></strong>：配置内容协商功能。</li>
</ul>
<hr />
<h3 id="65-flask-restx-rest-api">65. 使用 Flask-RESTX 实现 REST API</h3>
<p><code>Flask-RESTX</code> 是 <code>Flask-RESTPlus</code> 的一个分支，提供了更简洁和稳定的 REST API 开发功能。</p>
<h4 id="flask-restx">安装 Flask-RESTX</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>flask-restx
</code></pre></div>

<h4 id="rest-api_1">示例：创建 REST API</h4>
<ol>
<li><strong>创建 API</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restx</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My API&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A simple API&#39;</span><span class="p">)</span>

<span class="n">ns</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">namespace</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Item operations&#39;</span><span class="p">)</span>

<span class="nd">@ns</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ItemList</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;item1&#39;</span><span class="p">,</span> <span class="s1">&#39;item2&#39;</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Item created&#39;</span><span class="p">},</span> <span class="mi">201</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Api</code></strong>：创建 API 文档和路由。</li>
<li><strong><code>namespace</code></strong>：定义 API 的命名空间。</li>
</ul>
<hr />
<h3 id="66-flask-sqlalchemy">66. 使用 Flask-SQLAlchemy 进行复杂模型关系</h3>
<p><code>Flask-SQLAlchemy</code> 支持复杂的模型关系，例如一对多、多对多关系。</p>
<h4 id="_39">示例：定义复杂模型关系</h4>
<ol>
<li><strong>定义模型</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///complex_relationship.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">books</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Book&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">author_id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;author.id&#39;</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>db.relationship</code></strong>：定义模型之间的关系。</li>
<li><strong><code>db.ForeignKey</code></strong>：定义外键。</li>
</ul>
<hr />
<h3 id="67-flask-restful-restful-api">67. 使用 Flask-RESTful 实现 RESTful API</h3>
<p><code>Flask-RESTful</code> 提供了一种简洁的方式来构建 RESTful API。</p>
<h4 id="flask-restful_2">安装 Flask-RESTful</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>flask-restful
</code></pre></div>

<h4 id="restful-api">示例：构建 RESTful API</h4>
<ol>
<li><strong>创建 API</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">}</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">HelloWorld</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Api</code></strong>：创建 RESTful API。</li>
<li><strong><code>Resource</code></strong>：定义资源和处理请求的方法。</li>
</ul>
<hr />
<h3 id="68-flask-mail">68. 使用 Flask-Mail 实现邮件发送功能</h3>
<p><code>Flask-Mail</code> 提供了发送电子邮件的功能，支持多种邮件服务。</p>
<h4 id="flask-mail_3">安装 Flask-Mail</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Mail
</code></pre></div>

<h4 id="_40">示例：发送邮件</h4>
<ol>
<li><strong>配置 Flask-Mail</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_mail</span> <span class="kn">import</span> <span class="n">Mail</span><span class="p">,</span> <span class="n">Message</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_SERVER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;smtp.example.com&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PORT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">587</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USERNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_username&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_PASSWORD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_password&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;MAIL_USE_TLS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mail</span> <span class="o">=</span> <span class="n">Mail</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/send&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_mail</span><span class="p">():</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="s1">&#39;from@example.com&#39;</span><span class="p">,</span> <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;to@example.com&#39;</span><span class="p">])</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;This is a test email&#39;</span>
    <span class="n">mail</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Mail sent!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Message</code></strong>：创建邮件消息。</li>
<li><strong><code>mail.send</code></strong>：发送邮件。</li>
</ul>
<hr />
<h3 id="69-flask-admin">69. 使用 Flask-Admin 实现管理界面</h3>
<p><code>Flask-Admin</code> 提供了一个功能丰富的管理界面，便于管理数据模型。</p>
<h4 id="flask-admin_3">安装 Flask-Admin</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Admin
</code></pre></div>

<h4 id="_41">示例：创建管理界面</h4>
<ol>
<li><strong>配置 Flask-Admin</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_admin</span> <span class="kn">import</span> <span class="n">Admin</span>
<span class="kn">from</span> <span class="nn">flask_admin.contrib.sqla</span> <span class="kn">import</span> <span class="n">ModelView</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///admin_example.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

<span class="n">admin</span> <span class="o">=</span> <span class="n">Admin</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Admin Interface&#39;</span><span class="p">,</span> <span class="n">template_mode</span><span class="o">=</span><span class="s1">&#39;bootstrap3&#39;</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="n">ModelView</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>ModelView</code></strong>：提供对 SQLAlchemy 模型的管理界面。</li>
</ul>
<hr />
<h3 id="70-flask-debugtoolbar">70. 使用 Flask-DebugToolbar 进行调试</h3>
<p><code>Flask-DebugToolbar</code> 提供了一个调试工具栏，可以帮助你调试 Flask 应用。</p>
<h4 id="flask-debugtoolbar">安装 Flask-DebugToolbar</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>flask-debugtoolbar
</code></pre></div>

<h4 id="_42">示例：配置调试工具栏</h4>
<ol>
<li><strong>配置 Flask-DebugToolbar</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_debugtoolbar</span> <span class="kn">import</span> <span class="n">DebugToolbarExtension</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_secret_key&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;DEBUG_TB_INTERCEPT_REDIRECTS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">toolbar</span> <span class="o">=</span> <span class="n">DebugToolbarExtension</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, Debug Toolbar!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>DebugToolbarExtension</code></strong>：提供调试工具栏功能。</li>
</ul>
<hr />
<h3 id="71-flask-babel">71. 使用 Flask-Babel 实现多语言支持</h3>
<p><code>Flask-Babel</code> 提供了对 Flask 应用的国际化（i18n）和本地化（l10n）支持，使得你的应用能够支持多语言环境。</p>
<h4 id="flask-babel_2">安装 Flask-Babel</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Babel
</code></pre></div>

<h4 id="_43">示例：配置多语言支持</h4>
<ol>
<li><strong>配置 Flask-Babel</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_babel</span> <span class="kn">import</span> <span class="n">Babel</span><span class="p">,</span> <span class="n">_</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;BABEL_DEFAULT_LOCALE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;en&#39;</span>
<span class="n">babel</span> <span class="o">=</span> <span class="n">Babel</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@babel</span><span class="o">.</span><span class="n">localeselector</span>
<span class="k">def</span> <span class="nf">get_locale</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">accept_languages</span><span class="o">.</span><span class="n">best_match</span><span class="p">([</span><span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;es&#39;</span><span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">greeting</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>生成翻译文件</strong></li>
</ol>
<p>使用 <code>pybabel</code> 工具生成翻译文件：</p>
<div class="codehilite"><pre><span></span><code>pybabel<span class="w"> </span>extract<span class="w"> </span>-F<span class="w"> </span>babel.cfg<span class="w"> </span>-o<span class="w"> </span>messages.pot<span class="w"> </span>.
pybabel<span class="w"> </span>init<span class="w"> </span>-i<span class="w"> </span>messages.pot<span class="w"> </span>-d<span class="w"> </span>translations<span class="w"> </span>-l<span class="w"> </span>es
pybabel<span class="w"> </span>update<span class="w"> </span>-i<span class="w"> </span>messages.pot<span class="w"> </span>-d<span class="w"> </span>translations
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>get_locale</code></strong>：根据请求的语言环境选择语言。</li>
<li><strong><code>babel</code></strong>：配置 Flask-Babel。</li>
<li><strong><code>pybabel</code></strong>：生成和管理翻译文件的工具。</li>
</ul>
<hr />
<h3 id="72-flask-principal">72. 使用 Flask-Principal 实现角色和权限管理</h3>
<p><code>Flask-Principal</code> 提供了基于角色的权限管理功能，使得应用可以基于用户角色和权限来控制访问。</p>
<h4 id="flask-principal_1">安装 Flask-Principal</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Principal
</code></pre></div>

<h4 id="_44">示例：配置角色和权限管理</h4>
<ol>
<li><strong>配置 Flask-Principal</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">flask_principal</span> <span class="kn">import</span> <span class="n">Principal</span><span class="p">,</span> <span class="n">Permission</span><span class="p">,</span> <span class="n">RoleNeed</span><span class="p">,</span> <span class="n">UserNeed</span><span class="p">,</span> <span class="n">identity_loaded</span><span class="p">,</span> <span class="n">Identity</span><span class="p">,</span> <span class="n">AnonymousIdentity</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mysecretkey&#39;</span>
<span class="n">principal</span> <span class="o">=</span> <span class="n">Principal</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="n">admin_permission</span> <span class="o">=</span> <span class="n">Permission</span><span class="p">(</span><span class="n">RoleNeed</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Welcome to the home page&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">)</span>
<span class="nd">@admin_permission</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">http_exception</span><span class="o">=</span><span class="mi">403</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Welcome to the admin page&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Permission</code></strong>：定义权限，基于角色或其他需求。</li>
<li><strong><code>RoleNeed</code></strong>：定义角色需求。</li>
</ul>
<hr />
<h3 id="73-flask-restful-rest-api">73. 使用 Flask-RESTful 构建 REST API</h3>
<p><code>Flask-RESTful</code> 提供了一个更简洁的方式来构建 RESTful API，使得你可以快速开发和部署 API。</p>
<h4 id="rest-api_2">示例：构建 REST API</h4>
<ol>
<li><strong>配置 Flask-RESTful</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">}</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">HelloWorld</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>Api</code></strong>：用于创建 REST API 的实例。</li>
<li><strong><code>Resource</code></strong>：定义 API 资源和请求处理方法。</li>
</ul>
<hr />
<h3 id="74-flask-cache">74. 使用 Flask-Cache 实现缓存</h3>
<p><code>Flask-Cache</code> 提供了缓存功能，可以显著提高应用性能，特别是在处理计算密集型任务时。</p>
<h4 id="flask-cache_1">安装 Flask-Cache</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Cache
</code></pre></div>

<h4 id="_45">示例：配置缓存</h4>
<ol>
<li><strong>配置 Flask-Cache</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flask_cache</span> <span class="kn">import</span> <span class="n">Cache</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;CACHE_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;simple&#39;</span>
<span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@cache</span><span class="o">.</span><span class="n">cached</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;This is a cached response!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>CACHE_TYPE</code></strong>：定义缓存类型，例如 <code>simple</code>、<code>redis</code> 等。</li>
<li><strong><code>@cache.cached</code></strong>：缓存视图的响应。</li>
</ul>
<hr />
<h3 id="75-flask-sqlalchemy">75. 使用 Flask-SQLAlchemy 进行数据模型管理</h3>
<p><code>Flask-SQLAlchemy</code> 是 Flask 的 SQLAlchemy 扩展，提供了强大的数据模型管理功能。</p>
<h4 id="_46">示例：定义和操作数据模型</h4>
<ol>
<li><strong>配置 Flask-SQLAlchemy</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///example.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>SQLAlchemy</code></strong>：提供对 SQLAlchemy 的支持，进行数据模型定义和数据库操作。</li>
<li><strong><code>db.create_all()</code></strong>：创建所有模型对应的数据库表。</li>
</ul>
<hr />
<h3 id="76-flask-uploads">76. 使用 Flask-Uploads 管理文件上传</h3>
<p><code>Flask-Uploads</code> 提供了一个简便的方式来管理文件上传，支持多种文件类型和存储方式。</p>
<h4 id="flask-uploads_3">安装 Flask-Uploads</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Uploads
</code></pre></div>

<h4 id="_47">示例：配置文件上传</h4>
<ol>
<li><strong>配置 Flask-Uploads</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
<span class="kn">from</span> <span class="nn">flask_uploads</span> <span class="kn">import</span> <span class="n">UploadSet</span><span class="p">,</span> <span class="n">configure_uploads</span><span class="p">,</span> <span class="n">ALL</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOADED_PHOTOS_DEST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;uploads/photos&#39;</span>
<span class="n">photos</span> <span class="o">=</span> <span class="n">UploadSet</span><span class="p">(</span><span class="s1">&#39;photos&#39;</span><span class="p">,</span> <span class="n">ALL</span><span class="p">)</span>
<span class="n">configure_uploads</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">photos</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;h1&gt;Upload a photo&lt;/h1&gt;</span>
<span class="s1">        &lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;file&quot; name=&quot;photo&quot;&gt;</span>
<span class="s1">            &lt;input type=&quot;submit&quot;&gt;</span>
<span class="s1">        &lt;/form&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;photo&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">photos</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;photo&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;No file uploaded&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>UploadSet</code></strong>：定义文件上传集合和类型。</li>
<li><strong><code>configure_uploads</code></strong>：配置上传的存储位置和文件类型。</li>
</ul>
<hr />
<h3 id="77-flask-httpauth">77. 使用 Flask-HTTPAuth 实现认证</h3>
<p><code>Flask-HTTPAuth</code> 提供了简单的 HTTP 认证功能，支持基本认证和摘要认证。</p>
<h4 id="flask-httpauth">安装 Flask-HTTPAuth</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-HTTPAuth
</code></pre></div>

<h4 id="http">示例：配置 HTTP 认证</h4>
<ol>
<li><strong>配置 Flask-HTTPAuth</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_httpauth</span> <span class="kn">import</span> <span class="n">HTTPBasicAuth</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">HTTPBasicAuth</span><span class="p">()</span>

<span class="n">users</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
<span class="p">}</span>

<span class="nd">@auth</span><span class="o">.</span><span class="n">verify_password</span>
<span class="k">def</span> <span class="nf">verify_password</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">users</span> <span class="ow">and</span> <span class="n">users</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">==</span> <span class="n">password</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">username</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="nd">@auth</span><span class="o">.</span><span class="n">login_required</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Hello, </span><span class="si">{</span><span class="n">auth</span><span class="o">.</span><span class="n">current_user</span><span class="p">()</span><span class="si">}</span><span class="s1">!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>HTTPBasicAuth</code></strong>：提供基本的 HTTP 认证功能。</li>
<li><strong><code>verify_password</code></strong>：验证用户名和密码。</li>
</ul>
<hr />
<h3 id="78-flask-migrate">78. 使用 Flask-Migrate 进行数据库迁移</h3>
<p><code>Flask-Migrate</code> 是一个数据库迁移工具，支持对数据库模式的版本管理。</p>
<h4 id="flask-migrate_4">安装 Flask-Migrate</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Migrate
</code></pre></div>

<h4 id="_48">示例：配置数据库迁移</h4>
<ol>
<li><strong>配置 Flask-Migrate</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>
<span class="kn">from</span> <span class="nn">flask_migrate</span> <span class="kn">import</span> <span class="n">Migrate</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///migrate_example.db&#39;</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">migrate</span> <span class="o">=</span> <span class="n">Migrate</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<ol>
<li><strong>使用命令行工具</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code>flask<span class="w"> </span>db<span class="w"> </span>init
flask<span class="w"> </span>db<span class="w"> </span>migrate<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Initial migration.&quot;</span>
flask<span class="w"> </span>db<span class="w"> </span>upgrade
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>flask db init</code></strong>：初始化迁移目录。</li>
<li><strong><code>flask db migrate</code></strong>：创建迁移脚本。</li>
<li><strong><code>flask db upgrade</code></strong>：应用迁移脚本。</li>
</ul>
<hr />
<h3 id="79-flask-cors">79. 使用 Flask-Cors 处理跨域请求</h3>
<p><code>Flask-Cors</code> 提供了对跨域资源共享（CORS）的支持，允许来自不同域的请求访问资源。</p>
<h4 id="flask-cors">安装 Flask-Cors</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>Flask-Cors
</code></pre></div>

<h4 id="cors">示例：配置 CORS</h4>
<ol>
<li><strong>配置 Flask-Cors</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_cors</span> <span class="kn">import</span> <span class="n">CORS</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;CORS is enabled!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>CORS</code></strong>：启用 CORS 支持，允许来自不同域的请求访问资源。</li>
</ul>
<hr />
<h3 id="80-flask-debugtoolbar">80. 使用 Flask-DebugToolbar 进行调试</h3>
<p><code>Flask-DebugToolbar</code> 提供了一个调试工具栏，可以帮助你更好地调试 Flask 应用。</p>
<h4 id="flask-debugtoolbar_1">安装 Flask-DebugToolbar</h4>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>flask-debugtoolbar
</code></pre></div>

<h4 id="_49">示例：配置调试工具栏</h4>
<ol>
<li><strong>配置 Flask-DebugToolbar</strong></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_debugtoolbar</span> <span class="kn">import</span> <span class="n">DebugToolbarExtension</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;your_secret_key&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;DEBUG_TB_INTERCEPT_REDIRECTS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">toolbar</span> <span class="o">=</span> <span class="n">DebugToolbarExtension</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Debug Toolbar is enabled!&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

<p><strong>详解：</strong></p>
<ul>
<li><strong><code>DebugToolbarExtension</code></strong>：提供调试工具栏功能。</li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "toc.integrate", "search.highlight", "search.suggest", "header.autohide", "footer.copyright", "footer.text", "code.annotate", "content.code", "material.nav", "material.switch", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>